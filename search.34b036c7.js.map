{"mappings":"A,I,E,A,W,iB,C,E,E,Q,C,E,Q,S,C,C,C,ECSC,IAAA,EAAA,EAAA,S,E,aAKU,EAgwBR,OAhwBiB,E,AAgwBT,G,AAAA,E,U,C,AAAA,E,O,CAAA,EA7vBV,SAAS,EAAO,CAAI,CAAE,CAAQ,EAC7B,IAAI,CAAC,GAAG,CAAG,EAAE,GACb,IAAI,CAAC,EAAE,CAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CACrB,IAAI,CAAC,SAAS,CAAI,EAAW,EAAE,GAAY,EAAE,QAE7C,IAAI,CAAC,OAAO,CAAG,GACf,IAAI,CAAC,CAAC,CAAG,KAAA,EACT,IAAI,CAAC,UAAU,CAAG,CAAA,EAElB,IAAI,CAAC,SAAS,CAAG,KACjB,IAAI,CAAC,OAAO,CAAG,KACf,IAAI,CAAC,OAAO,CAAG,KACf,IAAI,CAAC,aAAa,CAAG,EACrB,IAAI,CAAC,aAAa,CAAG,CAAA,EACrB,IAAI,CAAC,cAAc,CAAG,CAAA,EACtB,IAAI,CAAC,GAAG,CAAG,CAAC,EACZ,IAAI,CAAC,QAAQ,CAAG,KAChB,IAAI,CAAC,GAAG,CAAG,EACX,IAAI,CAAC,GAAG,CAAG,KAEX,IAAI,CAAC,MAAM,CAAG,IAAI,UAClB,OAAO,MAAM,CAAG,IAAI,CAEpB,IAAI,EAAO,IAAI,CACf,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,QAAS,eAAgB,SAAU,CAAC,EAC/C,EAAE,cAAc,GAChB,EAAK,YAAY,CAAC,CAAA,EACnB,GACA,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,QAAS,UAAW,SAAU,CAAC,EAC1C,EAAE,cAAc,GAChB,EAAK,YAAY,CAAC,GACd,EAAK,QAAQ,EAAE,EAAK,QAAQ,CAAC,KAAK,EACvC,GACA,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,QAAS,WAAY,SAAU,CAAC,EAC3C,EAAE,cAAc,GAChB,EAAE,eAAe,GACjB,IAAI,EAAU,EAAE,aAAa,CAAC,OAAO,CAAC,IAAI,CAC1C,EAAK,MAAM,CAAC,UAAU,CAAC,GACvB,EAAK,OAAO,CAAG,EAAK,MAAM,CAAC,OAAO,CAClC,EAAK,IAAI,CAAC,GACX,EACD,CAEA,EAAO,SAAS,CAAC,CAAC,CAAG,SAAU,CAAK,EACnC,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EACtB,EAMA,EAAO,SAAS,CAAC,IAAI,CAAG,SAAU,CAAK,CAAE,CAAS,EACjD,GAAK,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAKtB,GAHA,IAAI,CAAC,UAAU,CAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CACxC,IAAI,CAAC,CAAC,CAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAC1B,IAAI,CAAC,SAAS,CAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAChC,IACH,IAAI,CAAC,SAAS,CAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAE,EAAU,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EACpF,IAAI,CAAC,SAAS,CAAC,MAAM,CAAG,GAAK,CAAC,cAAe,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,GAAG,CAC5F,IAAI,EAAU,IAAI,CAAC,SAAS,CAAC,EAAE,AAC/B,CAAA,IAAI,CAAC,SAAS,CAAC,EAAE,CAAG,IAAI,CAAC,SAAS,CAAC,EAAE,CACrC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAG,CACrB,CASD,OAPI,IAAI,CAAC,OAAO,EACf,CAAA,IAAI,CAAC,SAAS,CAAG,CAAC,CAAC,OAAQ,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAA,EAGxE,IAAI,CAAC,aAAa,CAAG,EACrB,IAAI,CAAC,aAAa,CAAG,CAAA,EACrB,IAAI,CAAC,YAAY,GACV,CAAA,EACR,EACA,EAAO,SAAS,CAAC,SAAS,CAAG,SAAU,CAAI,EAC1C,GAAI,CAAC,EAAK,OAAO,CAAC,KAAK,CAAE,MAAO,CAAA,EAChC,IAAI,EAAQ,EAAK,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,KACjC,EAAS,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAEnC,OADA,IAAI,CAAC,OAAO,CAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAC3B,CACR,EACA,EAAO,SAAS,CAAC,YAAY,CAAG,SAAU,CAAC,EAC1C,IAAI,EAQJ,OANC,EADG,EACM,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,aAAa,CAAC,KAAK,CAAC,KAAK,CAAC,MAErD,IAAI,CAAC,MAAM,CAAC,YAAY,GAElC,IAAI,CAAC,OAAO,CAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAClC,IAAI,CAAC,IAAI,CAAC,IACH,CACR,EACA,EAAO,SAAS,CAAC,aAAa,CAAG,SAAU,CAAC,EAE3C,IAAK,IADD,EAAM,eACD,EAAI,EAAG,EAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAE,IAAK,CAC7C,IAAI,EAAO,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,AACzB,AAAuB,CAAA,SAAvB,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,EAAa,CAAA,EAAO,MAAM,cAAe,GAAM,IAAI,AAAJ,EACjE,AAAuB,YAAvB,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,EAAgB,CAAA,EAAO,MAAM,cAAe,GAAM,IAAI,AAAJ,EACxE,GAAO,iCAAmC,WAAW,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,MAAQ,KAAO,EAAO,+CACjG,CAEA,OADI,AAAC,GAAG,CAAA,GAAO,gEAAf,EACO,EAAM,MACd,EACA,EAAO,SAAS,CAAC,YAAY,CAAG,SAAU,CAAQ,EACjD,IAAI,IAAI,CAAC,aAAa,EACtB,IAAI,EAAM,IAAI,CAAC,SAAS,CAAC,SAAS,GAC9B,EAAS,EAAM,IAAI,CAAC,SAAS,CAAC,MAAM,GACpC,EAAe,EAAE,QAAQ,MAAM,GAC/B,EAAI,IAAI,CAAC,aAAa,CACtB,EAAa,KAAK,KAAK,CAAC,EAAS,IAAM,EAC3C,GAAI,AAAC,IAAY,CAAA,GAAc,CAAA,GAC3B,EAAa,EAAI,IAAI,CAAA,EAAa,EAAI,EAA1C,EACI,EAAS,EAAM,GAAgB,CAAC,GAAG,CAAA,EAAa,EAApD,EACI,GAAY,EAAa,EAAI,IAAI,CAAA,EAAa,EAAI,EAAtD,EAIA,IAFA,IAAI,EAAY,IAAI,CAAC,SAAS,CAC1B,EAAM,GACH,EAAI,GAAY,CACtB,GAAI,CAAC,CAAS,CAAC,EAAE,CAAE,CAClB,IAAI,CAAC,aAAa,CAAG,CAAA,EACrB,KACD,CACA,IAGI,EAHA,EAAM,CAAS,CAAC,EAAE,CAElB,EAAe,GAEd,CAAA,EAAQ,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAG,CAAC,EAAE,CAAA,EAC1C,EAAe,mCAAqC,EAAQ,eACjD,CAAA,EAAQ,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAG,CAAC,EAAE,CAAA,GAClD,CAAA,EAAe,oCAAsC,EAAQ,cADvD,EAIP,IAAI,EAAS,EACT,EAAO,CACP,CAAA,EAAI,MAAM,CAAG,IAChB,EAAS,CAAG,CAAC,EAAE,CACf,EAAO,CAAG,CAAC,EAAE,EAEd,GAAO,IAAI,CAAC,SAAS,CAAC,CAAG,CAAC,EAAE,CAAE,CAAG,CAAC,EAAE,CAAE,EAAQ,EAAM,EAAc,CAAG,CAAC,EAAE,GAAI,IAAI,CAAC,GAAG,CAAG,eAAiB,IAExG,GACD,CACK,IAAI,CAAC,aAAa,EAIlB,IAAI,CAAC,WAAW,GACnB,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,MAAM,GACzB,AAAC,GAAU,CAAA,IAAI,CAAC,WAAW,CAAG,CAAA,CAAlC,GAED,EAAE,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,MAAM,CAAC,EAAO,CAAA,GAAY,CAAC,IAAI,CAAC,aAAa,CAAG,+EAAiF,EAAA,KAPvJ,IAAI,CAAC,EAAE,CAAC,SAAS,CAAG,wCAA2C,AAAmB,GAAnB,EAAU,MAAM,CAAS,OAAS,EAAO,CAAA,AAAC,IAAI,CAAC,aAAa,CAAoF,GAAjF,8EAAiF,EAAM,QACrN,IAAI,CAAC,WAAW,CAAG,CAAA,GAQpB,IAAI,CAAC,aAAa,CAAG,GACtB,EACA,EAAO,SAAS,CAAC,OAAO,CAAG,SAAU,CAAK,CAAE,CAAM,CAAE,CAAG,CAAE,CAAG,MAKvD,EACJ,IAAK,IAAI,KALT,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAO,EAAQ,GACnC,IAAI,CAAC,OAAO,CAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAClC,IAAI,CAAC,OAAO,CAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAClC,IAAI,CAAC,GAAG,CAAG,GAAO,CAAC,EAEJ,EAAK,CACnB,EAAY,EACZ,KACD,CACA,IAAI,CAAC,IAAI,CAAC,GAAI,EACf,EAQA,EAAO,SAAS,CAAC,SAAS,CAAG,SAAU,CAAE,CAAE,CAAI,CAAE,CAAU,CAAE,CAAW,CAAE,CAAY,CAAE,CAAK,EAE5F,OAAQ,GACR,IAAK,OACJ,MAAO,sBAAwB,EAAK,OACrC,KAAK,SACJ,MAAO,0BAA4B,EAAK,YACzC,KAAK,cACJ,OAAO,IAAI,CAAC,oBAAoB,EACjC,KAAK,WACJ,OAAO,IAAI,CAAC,iBAAiB,EAC9B,KAAK,UACJ,IAAI,EAAU,MAAM,cAAe,GACnC,OAAO,IAAI,CAAC,gBAAgB,CAAC,EAAS,EAAY,EAAa,EAAc,EAC9E,KAAK,OACJ,IAAI,EAAO,MAAM,cAAe,GAChC,OAAO,IAAI,CAAC,aAAa,CAAC,EAAM,EAAY,EAAa,EAAc,EACxE,KAAK,OACJ,IAAI,EAAO,MAAM,YAAa,GAC9B,OAAO,IAAI,CAAC,aAAa,CAAC,EAAM,EAAY,EAAa,EAAc,EACxE,KAAK,UACJ,IAAI,EAAU,MAAM,gBAAiB,GACrC,OAAO,IAAI,CAAC,gBAAgB,CAAC,EAAS,EAAY,EAAa,EAAc,EAC9E,KAAK,OACJ,IAAI,EAAO,CAAC,KAAM,CAAE,CAAC,EAAE,CAAC,WAAW,GAAK,EAAG,MAAM,CAAC,EAAE,EACpD,OAAO,IAAI,CAAC,aAAa,CAAC,EAAM,EAAY,EAAa,EAC1D,KAAK,WAGA,AAAO,cAAP,EAAoB,EAAS,aACxB,AAAO,WAAP,EAAiB,EAAS,UAC1B,AAAO,WAAP,EAAiB,EAAS,UAC1B,AAAO,WAAP,GAAiB,CAAA,EAAS,SAA9B,EACD,EACC,EAAc,GAAG,IAErB,EAAS,CAAE,CAAC,EAAE,CAAC,WAAW,GAAK,EAAG,MAAM,CAAC,GAE1C,IAVI,EAUA,EAAW,CAAC,KAAM,CAAM,EAC5B,OAAO,IAAI,CAAC,iBAAiB,CAAC,EAAU,EAAY,EAAa,EAClE,KAAK,OAqBJ,OAAO,IAAI,CAAC,aAAa,CADd,CAAC,KAAM,AAlBF,CACf,KAAM,OACN,GAAI,KACJ,GAAI,KACJ,GAAI,KACJ,GAAI,KACJ,GAAI,KACJ,GAAI,OACJ,IAAK,MACL,GAAI,KACJ,IAAK,MACL,MAAO,SACP,OAAQ,UACR,KAAM,OACN,KAAM,OACN,KAAM,OACN,KAAM,MACP,CAC2B,CAAC,EAAG,AAAA,EACC,EAAY,EAAa,EAC1D,KAAK,WACJ,IAAI,EAAW,CAAC,KAAM,CAAE,CAAC,EAAE,CAAC,WAAW,GAAK,EAAG,MAAM,CAAC,GAAI,GAAI,CAAE,EAChE,OAAO,IAAI,CAAC,iBAAiB,CAAC,EAAU,EAAY,EAAa,EAClE,KAAK,UACJ,IAAI,EAAe,OAAQ,mBAAmB,EAAI,mBAAmB,CAAC,EAAG,EAAM,CAAE,CAAC,EAAE,CAAC,WAAW,GAAK,EAAG,MAAM,CAAC,GAE/G,OAAO,IAAI,CAAC,gBAAgB,CADd,CAAC,KAAM,EAAc,GAAI,CAAE,EACH,EAAY,EAAa,EAChE,CACA,MAAO,kBACR,EACA,EAAO,SAAS,CAAC,oBAAoB,CAAG,WACvC,IAAI,EAAM,2CAaV,OADA,GAXO,oCAAuC,CAAA,AAAC,IAAI,CAAC,OAAO,CAAY,GAAT,MAAS,EAAM,KAAQ,CAAA,AAAC,IAAI,CAAC,OAAO,CAAc,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAzC,QAAuB,EAAsB,YAC3I,CAAA,sCAAyC,CAAA,AAAiB,SAAjB,IAAI,CAAC,OAAO,CAAc,OAAS,EAAA,CAAC,EAAK,mCAClF,CAAA,qCAAwC,CAAA,AAAiB,SAAjB,IAAI,CAAC,OAAO,CAAc,OAAS,EAAA,CAAC,EAAK,oCACjF,CAAA,wCAA2C,CAAA,AAAiB,YAAjB,IAAI,CAAC,OAAO,CAAiB,OAAS,EAAA,CAAC,EAAK,2CACvF,CAAA,qCAAwC,CAAA,AAAiB,OAAjB,IAAI,CAAC,OAAO,CAAY,OAAS,EAAA,CAAC,EAAK,+BAC/E,CAAA,qCAAwC,CAAA,AAAiB,QAAjB,IAAI,CAAC,OAAO,CAAa,OAAS,EAAA,CAAC,EAAK,iCAChF,CAAA,qCAAwC,CAAA,AAAiB,QAAjB,IAAI,CAAC,OAAO,CAAa,OAAS,EAAA,CAAC,EAAK,iCAChF,CAAA,qCAAwC,CAAA,AAAiB,QAAjB,IAAI,CAAC,OAAO,CAAa,OAAS,EAAA,CAAC,EAAK,iCAChF,CAAA,qCAAwC,CAAA,AAAiB,QAAjB,IAAI,CAAC,OAAO,CAAa,OAAS,EAAA,CAAC,EAAK,iCAChF,CAAA,qCAAwC,CAAA,AAAiB,QAAjB,IAAI,CAAC,OAAO,CAAa,OAAS,EAAA,CAAC,EAAK,iCAChF,CAAA,qCAAwC,CAAA,AAAiB,QAAjB,IAAI,CAAC,OAAO,CAAa,OAAS,EAAA,CAAC,8CAGnF,EACA,EAAO,SAAS,CAAC,iBAAiB,CAAG,WACpC,IAAI,EAAM,2CAQV,OADA,GANO,yCAA4C,CAAA,AAAiB,SAAjB,IAAI,CAAC,OAAO,CAAc,OAAS,EAAA,EAAM,mCACrF,CAAA,yCAA4C,CAAA,AAAiB,SAAjB,IAAI,CAAC,OAAO,CAAc,OAAS,EAAA,CAAC,EAAK,mCACrF,CAAA,yCAA4C,CAAA,AAAiB,aAAjB,IAAI,CAAC,OAAO,CAAkB,OAAS,EAAA,CAAC,EAAK,sCACzF,CAAA,sCAAyC,CAAA,AAAiB,UAAjB,IAAI,CAAC,OAAO,CAAe,OAAS,EAAA,CAAC,EAAK,mCACnF,CAAA,yCAA4C,CAAA,AAAiB,aAAjB,IAAI,CAAC,OAAO,CAAkB,OAAS,EAAA,CAAC,EAAK,sCACzF,CAAA,mCAAsC,CAAA,AAAiB,OAAjB,IAAI,CAAC,OAAO,CAAY,OAAS,EAAA,CAAC,4CAGhF,EACA,EAAO,SAAS,CAAC,gBAAgB,CAAG,SAAU,CAAO,CAAE,CAAU,CAAE,CAAW,CAAE,CAAY,CAAE,CAAK,EAElG,GADI,AAAC,GAAO,CAAA,EAAQ,EAApB,EACI,CAAC,EAAS,MAAO,+CACrB,IAAI,EAAK,KAAK,EAAQ,IAAI,CACtB,CAAA,EAAO,OAAO,EAAE,CAAA,GAAS,UAAY,EAAO,OAAO,CAAG,WAAa,EAAK,sBAA5E,EACA,IAAI,EAAM,wBAA0B,EAAQ,wBAA0B,WAAW,EAAQ,IAAI,EAAI,KAG7F,EAAa,EAAQ,GAAG,CAC5B,GAAI,EAAQ,KAAK,EAAI,EAAQ,IAAI,GAAK,EAAQ,WAAW,EAAI,OAAO,eAAe,CAAE,CACpF,IAAI,EAAS,KAAK,EAAQ,WAAW,EAAI,EAAQ,IAAI,EACjD,EAAQ,OAAO,eAAe,CAAC,EAAO,CAC1C,GAAI,EAAO,CACV,IAAI,EAAM,EAAM,OAAO,CAAC,EAAQ,EAAE,EAClC,GAAI,GAAO,EAAG,CACb,IAAI,EAAS,OAAO,YAAY,CAAC,GAAK,GACtC,EAAa,EAAQ,GAAG,CAAG,IAAM,CAClC,CACD,CACD,CACA,GAAO,4BAA8B,EAAa,WAElD,GAAO,6BACP,GAAO,gBAAkB,eAAe,EAAQ,IAAI,EAAI,YACxD,GAAO,WAGP,IAAI,EAAO,EAAQ,IAAI,CACnB,EAAY,EAAQ,KAAK,CAAG,EAAK,MAAM,CAAG,EAAQ,KAAK,CAAC,MAAM,CAAG,EAAI,EAmBzE,GAlBI,GAAU,CAAA,EAAO,EAAK,MAAM,CAAC,EAAG,EAApC,EACI,GACH,CAAA,EAAO,EAAK,MAAM,CAAC,EAAG,GAAc,MAAQ,EAAK,MAAM,CAAC,EAAY,GAAe,OAAS,EAAK,MAAM,CAAC,EAAa,EADtH,EAGI,IACC,GAAe,EAAa,EAAc,GACzC,EAAa,IAChB,GAAe,EAAW,EAC1B,EAAa,GAEd,GAAQ,UAAY,EAAQ,IAAI,CAAC,MAAM,CAAC,EAAU,EAAa,GAAY,MAAQ,EAAQ,IAAI,CAAC,MAAM,CAAC,EAAY,GAAe,OAAS,EAAQ,IAAI,CAAC,MAAM,CAAC,EAAa,GAAe,YAE3L,GAAQ,UAAY,EAAQ,IAAI,CAAC,MAAM,CAAC,GAAY,YAGtD,GAAO,oCAAsC,EAAO,WAGhD,EAEH,OADA,EAAO,CAAA,EAAe,WAAtB,EAMD,GAAO,6BAEP,IAAK,IADD,EAAQ,EAAQ,KAAK,CAChB,EAAI,EAAG,EAAI,EAAM,MAAM,CAAE,IACjC,GAAO,YAAY,CAAK,CAAC,EAAE,EAE5B,GAAO,WAEP,IAAI,EAAY,EAAQ,SAAS,AAC7B,CAAA,CAAS,CAAC,IAAI,CACjB,GAAO,mCAAqC,CAAS,CAAC,IAAI,CAAG,SAC5D,CAAS,CAAC,IAAI,CAAG,UAElB,GAAO,gCAAkC,CAAS,CAAC,IAAI,CAAG,UAEvD,EAAU,CAAI,CACb,EAAU,CAAI,CACjB,GAAO,mCAAsC,CAAA,EAAU,CAAI,EAAI,EAAA,EAAM,UAAY,EAAU,CAAI,CAAG,WAElG,GAAO,iCAAmC,EAAU,CAAI,CAAG,WAElD,EAAU,CAAI,CACxB,GAAO,gCAAgC,EAAU,CAAI,CAAC,UAEtD,GAAO,uCAIR,IAAI,EAAQ,EAAQ,SAAS,CAC7B,GAAO,8CAAgD,EAAM,EAAE,CAAG,WAClE,GAAO,+CAAiD,EAAM,GAAG,CAAG,WACpE,GAAO,+CAAiD,EAAM,GAAG,CAAG,WACpE,GAAO,+CAAiD,EAAM,GAAG,CAAG,WACpE,GAAO,+CAAiD,EAAM,GAAG,CAAG,WACpE,GAAO,+CAAiD,EAAM,GAAG,CAAG,WACpE,IAAI,EAAM,EACV,IAAK,KAAK,EAAO,GAAO,CAAK,CAAC,EAAE,CAKhC,OAJA,GAAO,yCAA2C,EAAM,gBAExD,GAAO,WAGR,EACA,EAAO,SAAS,CAAC,2BAA2B,CAAG,SAAU,CAAO,CAAE,CAAG,CAAE,CAAY,EAClF,IAAI,EAAQ,EACR,CAAA,EAAO,OAAO,EAAE,CAAA,EAAQ,UAAY,EAAO,OAAO,CAAG,WAAa,KAAK,EAAQ,IAAI,EAAI,sBAA3F,EACA,IAAI,EAAM,KAAO,EAAQ,wBAA0B,WAAW,EAAQ,IAAI,EAAI,KAG9E,GAAO,wCAA0C,EAAM,WAGvD,GAAO,6BACP,GAAO,gBAAkB,eAAe,EAAQ,IAAI,EAAI,YACxD,GAAO,WAGP,IAAI,EAAO,EAAQ,IAAI,CACnB,EAAY,EAAQ,KAAK,CAAG,EAAK,MAAM,CAAG,EAAQ,KAAK,CAAC,MAAM,CAAG,EAAI,EAKzE,GAJI,GAAU,CAAA,EAAO,EAAK,MAAM,CAAC,EAAG,GAAY,UAAY,EAAQ,IAAI,CAAC,MAAM,CAAC,GAAY,UAA5F,EACA,GAAO,yCAA2C,EAAO,WAGrD,EAEH,OADA,EAAO,CAAA,EAAe,WAAtB,EAKD,GAAO,6BACP,IAAK,IAAI,EAAI,EAAG,EAAI,EAAQ,KAAK,CAAC,MAAM,CAAE,IACzC,GAAO,YAAY,EAAQ,KAAK,CAAC,EAAE,EAWpC,IAAK,IAAI,KATT,GAAO,WAGP,GAAO,4CACH,EAAQ,SAAS,CAAC,IAAI,CACzB,GAAO,mCAEP,GAAO,gCAEM,EAAQ,SAAS,CAAE,CAChC,IAAI,EAAU,EAAQ,SAAS,CAAC,EAAE,CAC7B,IAED,AAAM,MAAN,GAAW,CAAA,GAAO,QAAtB,EACI,AAAM,MAAN,GAAW,CAAA,EAAU,2CAA6C,EAAQ,SAAS,CAAC,EAAE,CAAG,OAA7F,EACA,GAAO,EACR,CACI,AAAC,EAAQ,SAAS,CAAC,CAAI,EAAE,CAAA,GAAO,sCAApC,EACA,GAAO,UACP,GAAO,UAGP,GAAO,4CACP,GAAO,8CAAgD,EAAQ,SAAS,CAAC,EAAE,CAAG,WAC9E,GAAO,+CAAiD,EAAQ,SAAS,CAAC,GAAG,CAAG,WAChF,GAAO,+CAAiD,EAAQ,SAAS,CAAC,GAAG,CAAG,WAChF,GAAO,+CAAiD,EAAQ,SAAS,CAAC,GAAG,CAAG,WAChF,GAAO,+CAAiD,EAAQ,SAAS,CAAC,GAAG,CAAG,WAChF,GAAO,+CAAiD,EAAQ,SAAS,CAAC,GAAG,CAAG,WAChF,IAAI,EAAM,EACV,IAAK,KAAK,EAAQ,SAAS,CAAE,GAAO,EAAQ,SAAS,CAAC,EAAE,CAMxD,OALA,GAAO,yCAA2C,EAAM,gBACxD,GAAO,UAEP,GAAO,MAGR,EAEA,EAAO,SAAS,CAAC,aAAa,CAAG,SAAU,CAAI,CAAE,CAAU,CAAE,CAAW,CAAE,CAAY,CAAE,CAAK,EAE5F,GADI,AAAC,GAAO,CAAA,EAAQ,EAApB,EACI,CAAC,EAAM,MAAO,4CAClB,IAAI,EAAK,KAAK,EAAK,IAAI,CACnB,CAAA,EAAO,OAAO,EAAE,CAAA,GAAS,UAAY,EAAO,OAAO,CAAG,SAAW,EAAK,sBAA1E,EACA,IAAI,EAAM,wBAA0B,EAAQ,qBAAuB,WAAW,EAAK,IAAI,EAAI,KAK3F,iDADyB,YAAY,uBAIrC,IAAI,EAAO,EAAK,IAAI,OAOpB,CANI,GACH,CAAA,EAAO,EAAK,MAAM,CAAC,EAAG,GAAc,MAAQ,EAAK,MAAM,CAAC,EAAY,GAAe,OAAS,EAAK,MAAM,CAAC,EAAa,EADtH,EAGA,GAAO,6BAA+B,EAAO,WAGzC,GACH,GAAO,EAAe,YAOvB,GAFO,iCAAmC,WAAW,EAAK,SAAS,EAAI,EAAK,IAAI,EAAzE,mBAKR,EACA,EAAO,SAAS,CAAC,gBAAgB,CAAG,SAAU,CAAO,CAAE,CAAU,CAAE,CAAW,CAAE,CAAY,CAAE,CAAK,EAElG,GADI,AAAC,GAAO,CAAA,EAAQ,EAApB,EACI,CAAC,EAAS,MAAO,+CACrB,IAAI,EAAK,KAAK,EAAQ,IAAI,CACtB,CAAA,EAAO,OAAO,EAAE,CAAA,GAAS,UAAY,EAAO,OAAO,CAAG,aAAe,EAAK,sBAA9E,EACA,IAAI,EAAM,wBAA0B,EAAQ,wBAA0B,WAAW,EAAQ,IAAI,EAAI,KAG7F,EAAO,EAAQ,IAAI,OAOvB,CANI,GACH,CAAA,EAAO,EAAK,MAAM,CAAC,EAAG,GAAc,MAAQ,EAAK,MAAM,CAAC,EAAY,GAAe,OAAS,EAAK,MAAM,CAAC,EAAa,EADtH,EAGA,GAAO,6BAA+B,EAAO,WAGzC,GACH,GAAO,EAAe,YAMvB,GAFO,oCAAsC,WAAW,EAAQ,SAAS,EAAI,EAAQ,IAAI,EAAlF,mBAKR,EACA,EAAO,SAAS,CAAC,aAAa,CAAG,SAAU,CAAI,CAAE,CAAU,CAAE,CAAW,CAAE,CAAY,CAAE,CAAK,EAE5F,GADI,AAAC,GAAO,CAAA,EAAQ,EAApB,EACI,CAAC,EAAM,MAAO,4CAClB,IAAI,EAAK,KAAK,EAAK,IAAI,CACnB,CAAA,EAAO,OAAO,EAAE,CAAA,GAAS,UAAY,EAAO,OAAO,CAAG,SAAW,EAAK,sBAA1E,EACA,IAAI,EAAM,wBAA0B,EAAQ,qBAAuB,WAAW,EAAK,IAAI,EAAI,KAGvF,EAAO,EAAK,IAAI,CAChB,EAAY,AAAwC,GAAxC,CAAA,AAAuB,iBAAvB,EAAK,MAAM,CAAC,EAAG,GAAQ,EAmBvC,GAlBI,GAAU,CAAA,EAAO,EAAK,MAAM,CAAC,EAAG,EAApC,EACI,GACH,CAAA,EAAO,EAAK,MAAM,CAAC,EAAG,GAAc,MAAQ,EAAK,MAAM,CAAC,EAAY,GAAe,OAAS,EAAK,MAAM,CAAC,EAAa,EADtH,EAGI,IACC,GAAe,EAAa,EAAc,GACzC,EAAa,IAChB,GAAe,EAAW,EAC1B,EAAa,GAEd,GAAQ,UAAY,EAAK,IAAI,CAAC,MAAM,CAAC,EAAU,EAAa,GAAY,MAAQ,EAAK,IAAI,CAAC,MAAM,CAAC,EAAY,GAAe,OAAS,EAAK,IAAI,CAAC,MAAM,CAAC,EAAa,GAAe,YAElL,GAAQ,UAAY,EAAK,IAAI,CAAC,MAAM,CAAC,GAAY,YAGnD,GAAO,iCAAmC,EAAO,WAG7C,EAEH,OADA,EAAO,CAAA,EAAe,WAAtB,EAKD,GAAO,6BACP,GAAO,YAAY,EAAK,IAAI,EAC5B,GAAO,gBAAgB,EAAK,QAAQ,EACpC,GAAO,WAGP,IAAI,EAAM,AAAY,IAAZ,EAAK,EAAE,EAAU,EAAK,UAAU,CAAG,EAAK,EAAE,CAAG,AAAU,EAAV,EAAK,EAAE,CAAO,EAUrE,OATA,GAAO,8BAAiC,CAAA,AAAkB,WAAlB,EAAK,QAAQ,CAAiB,uBAA0B,CAAA,EAAK,SAAS,EAAI,SAAA,EAAc,EAAA,EAAM,WACtI,GAAO,yDAA4D,CAAA,EAAK,QAAQ,EAAI,AAAkB,CAAA,IAAlB,EAAK,QAAQ,CAAY,EAAK,QAAQ,CAAG,IAAM,SAAA,EAAa,WAChJ,GAAO,iDAAmD,EAAK,WAG/D,GAAO,iCAAmC,WAAW,EAAK,SAAS,EAAI,EAAK,IAAI,EAAI,WAEpF,GAAO,WAGR,EACA,EAAO,SAAS,CAAC,kBAAkB,CAAG,SAAU,CAAI,CAAE,CAAY,EACjE,IAAI,EAAQ,EACR,CAAA,EAAO,OAAO,EAAE,CAAA,EAAQ,UAAY,EAAO,OAAO,CAAG,SAAW,KAAK,EAAK,IAAI,EAAI,sBAAtF,EACA,IAAI,EAAM,KAAO,EAAQ,qBAAuB,WAAW,EAAK,IAAI,EAAI,KAGpE,EAAO,EAAK,IAAI,CAChB,EAAY,AAAwC,GAAxC,CAAA,AAAuB,iBAAvB,EAAK,MAAM,CAAC,EAAG,GAAQ,EAKvC,GAJI,GAAU,CAAA,EAAO,EAAK,MAAM,CAAC,EAAG,GAAY,UAAY,EAAK,IAAI,CAAC,MAAM,CAAC,GAAY,UAAzF,EACA,GAAO,iCAAmC,EAAO,WAG7C,EAEH,OADA,EAAO,CAAA,EAAe,WAAtB,EAKD,GAAO,6BACP,GAAO,YAAY,EAAK,IAAI,EAC5B,GAAO,gBAAgB,EAAK,QAAQ,EACpC,GAAO,WAGP,IAAI,EAAM,AAAY,IAAZ,EAAK,EAAE,EAAU,EAAK,UAAU,CAAG,EAAK,EAAE,CAAG,AAAU,EAAV,EAAK,EAAE,CAAO,EAUrE,OATA,GAAO,8BAAiC,CAAA,AAAkB,WAAlB,EAAK,QAAQ,CAAiB,uBAA0B,CAAA,EAAK,SAAS,EAAI,SAAA,EAAc,EAAA,EAAM,WACtI,GAAO,yDAA4D,CAAA,EAAK,QAAQ,EAAI,AAAkB,CAAA,IAAlB,EAAK,QAAQ,CAAY,EAAK,QAAQ,CAAG,IAAM,SAAA,EAAa,WAChJ,GAAO,iDAAmD,EAAK,WAG/D,GAAO,iCAAmC,WAAW,EAAK,SAAS,EAAI,EAAK,IAAI,EAAI,WAEpF,GAAO,MAGR,EACA,EAAO,SAAS,CAAC,mBAAmB,CAAG,SAAU,CAAI,CAAE,CAAG,CAAE,CAAY,EACvE,IAAI,EAAQ,EACR,CAAA,EAAO,OAAO,EAAE,CAAA,EAAQ,UAAY,EAAO,OAAO,CAAG,SAAW,KAAK,EAAK,IAAI,EAAI,sBAAtF,EACA,IAAI,EAAM,wBAA0B,EAAQ,qBAAuB,WAAW,EAAK,IAAI,EAAI,KAG3F,GAAO,4BAA8B,EAAM,WAG3C,IAAI,EAAO,EAAK,IAAI,OAKpB,CAJI,AAAuB,iBAAvB,EAAK,MAAM,CAAC,EAAG,KAAwB,CAAA,EAAO,cAAlD,EACA,GAAO,sCAAwC,EAAO,WAGlD,GACH,GAAO,EAAe,aAKvB,GAAO,6BACP,GAAO,YAAY,EAAK,IAAI,EAC5B,GAAO,gBAAgB,EAAK,QAAQ,EACpC,GAAO,WAGP,GAAO,8BAAiC,CAAA,AAAkB,WAAlB,EAAK,QAAQ,CAAiB,uBAA0B,CAAA,EAAK,SAAS,EAAI,SAAA,EAAc,EAAA,EAAM,WACtI,GAAO,yDAA4D,CAAA,EAAK,QAAQ,EAAI,AAAkB,CAAA,IAAlB,EAAK,QAAQ,CAAY,EAAK,QAAQ,CAAG,IAAM,SAAA,EAAa,WAChJ,GAAO,iDAAoD,CAAA,EAAK,UAAU,CAAG,EAAK,EAAE,CAAG,AAAU,EAAV,EAAK,EAAE,CAAO,CAAA,EAAK,WAG1G,GAAO,iCAAmC,WAAW,EAAK,SAAS,EAAI,EAAK,IAAI,EAAI,WAEpF,GAAO,YAGR,EAEA,EAAO,SAAS,CAAC,aAAa,CAAG,SAAU,CAAI,CAAE,CAAU,CAAE,CAAW,CAAE,CAAY,EACrF,IAAI,EAAQ,EACR,CAAA,EAAO,OAAO,EAAE,CAAA,EAAQ,UAAY,EAAO,OAAO,CAAG,SAAW,KAAK,EAAK,IAAI,EAAI,sBAAtF,EACA,IAAI,EAAM,wBAA0B,EAAQ,qBAAuB,WAAW,EAAK,IAAI,EAAI,KAGvF,EAAO,EAAK,IAAI,OAYpB,CAXI,GACH,CAAA,EAAO,EAAK,MAAM,CAAC,EAAG,GAAc,MAAQ,EAAK,MAAM,CAAC,EAAY,GAAe,OAAS,EAAK,MAAM,CAAC,EAAa,EADtH,EAGA,GAAO,6BAA+B,EAAO,WAG7C,GAAO,6BACP,GAAO,YAAY,EAAK,IAAI,EAC5B,GAAO,WAGH,GACH,GAAO,EAAe,YAIvB,GAAO,WAGR,EACA,EAAO,SAAS,CAAC,iBAAiB,CAAG,SAAU,CAAQ,CAAE,CAAU,CAAE,CAAW,CAAE,CAAY,EAC7F,IAAI,EAAQ,EACR,CAAA,EAAO,OAAO,EAAE,CAAA,EAAQ,UAAY,EAAO,OAAO,CAAG,cAAgB,EAAS,EAAE,CAAG,sBAAvF,EACA,IAAI,EAAM,wBAA0B,EAAQ,yBAA2B,WAAW,EAAS,IAAI,EAAI,KAG/F,EAAO,EAAS,IAAI,OAUxB,CATI,GACH,CAAA,EAAO,EAAK,MAAM,CAAC,EAAG,GAAc,MAAQ,EAAK,MAAM,CAAC,EAAY,GAAe,OAAS,EAAK,MAAM,CAAC,EAAa,EADtH,EAMA,GAHO,6BAA+B,EAAO,WAGtC,CAAA,6BAA+B,gBAAgB,EAAS,IAAI,CAAA,EAAI,WAGnE,GACH,GAAO,EAAe,YAIvB,GAAO,WAGR,EACA,EAAO,SAAS,CAAC,gBAAgB,CAAG,SAAU,CAAO,CAAE,CAAU,CAAE,CAAW,CAAE,CAAY,EAC3F,IAAI,EAAQ,EACR,CAAA,EAAO,OAAO,EAAE,CAAA,EAAQ,UAAY,EAAO,OAAO,CAAG,YAAc,EAAQ,EAAE,CAAG,sBAApF,EACA,IAAI,EAAgB,AAAe,YAAf,EAAQ,EAAE,EAAkB,AAAe,UAAf,EAAQ,EAAE,AACtD,CAAA,GAAc,CAAA,EAAQ,UAAY,EAAQ,EAAE,CAAG,0BAAnD,EACA,IAAI,EAAM,wBAA0B,EAAQ,wBAA0B,WAAW,EAAQ,IAAI,EAAI,KAG7F,EAAO,EAAQ,IAAI,OAcvB,CAbI,GACH,CAAA,EAAO,EAAK,MAAM,CAAC,EAAG,GAAc,MAAQ,EAAK,MAAM,CAAC,EAAY,GAAe,OAAS,EAAK,MAAM,CAAC,EAAa,EADtH,EAGA,GAAO,6BAA+B,EAAO,WAGzC,EACH,GAAO,sDAEP,GAAO,kDAIJ,GACH,GAAO,EAAe,YAIvB,GAAO,WAGR,EACA,EAAO,SAAS,CAAC,iBAAiB,CAAG,SAAU,CAAQ,CAAE,CAAU,CAAE,CAAW,CAAE,CAAY,EAC7F,IAAI,EAAQ,EACR,CAAA,EAAO,OAAO,EAAE,CAAA,EAAQ,UAAY,EAAO,OAAO,CAAG,aAAe,KAAK,EAAS,IAAI,EAAI,sBAA9F,EACA,IAAI,EAAM,wBAA0B,EAAQ,yBAA2B,WAAW,EAAS,IAAI,EAAI,KAG/F,EAAO,EAAS,IAAI,OAOxB,CANI,GACH,CAAA,EAAO,EAAK,MAAM,CAAC,EAAG,GAAc,MAAQ,EAAK,MAAM,CAAC,EAAY,GAAe,OAAS,EAAK,MAAM,CAAC,EAAa,EADtH,EAGA,GAAO,6BAA+B,EAAO,WAGzC,GACH,GAAO,EAAe,YAIvB,GAAO,WAGR,EACA,EAAO,SAAS,CAAC,aAAa,CAAG,SAAU,CAAI,CAAE,CAAU,CAAE,CAAW,CAAE,CAAY,EACrF,IAAI,EAAQ,EACR,CAAA,EAAO,OAAO,EAAE,CAAA,EAAQ,UAAY,EAAO,OAAO,CAAG,SAAW,KAAK,EAAK,IAAI,EAAI,sBAAtF,EACA,IAAI,EAAM,wBAA0B,EAAQ,qBAAuB,WAAW,EAAK,IAAI,EAAI,KAGvF,EAAO,EAAK,IAAI,OAOpB,CANI,GACH,CAAA,EAAO,EAAK,MAAM,CAAC,EAAG,GAAc,MAAQ,EAAK,MAAM,CAAC,EAAY,GAAe,OAAS,EAAK,MAAM,CAAC,EAAa,EADtH,EAGA,GAAO,6BAA+B,EAAO,WAGzC,GACH,GAAO,EAAe,YAIvB,GAAO,WAGR,EAEA,EAAO,GAAG,CAAG,EACb,EAAO,SAAS,CAAG,EAAO,SAAS,CAAC,SAAS,CAC7C,EAAO,gBAAgB,CAAG,EAAO,SAAS,CAAC,gBAAgB,CAC3D,EAAO,2BAA2B,CAAG,EAAO,SAAS,CAAC,2BAA2B,CACjF,EAAO,aAAa,CAAG,EAAO,SAAS,CAAC,aAAa,CACrD,EAAO,gBAAgB,CAAG,EAAO,SAAS,CAAC,gBAAgB,CAC3D,EAAO,aAAa,CAAG,EAAO,SAAS,CAAC,aAAa,CACrD,EAAO,kBAAkB,CAAG,EAAO,SAAS,CAAC,kBAAkB,CAC/D,EAAO,mBAAmB,CAAG,EAAO,SAAS,CAAC,mBAAmB,CACjE,EAAO,aAAa,CAAG,EAAO,SAAS,CAAC,aAAa,CACrD,EAAO,iBAAiB,CAAG,EAAO,SAAS,CAAC,iBAAiB,CAC7D,EAAO,iBAAiB,CAAG,EAAO,SAAS,CAAC,iBAAiB,CAC7D,EAAO,aAAa,CAAG,EAAO,SAAS,CAAC,aAAa,CAErD,EAAQ,YAAY,CAAG,C,G,E,Q,S,C,C,C,MC9vBpB,E,E,SADJ,IAAI,EAAoB,EAAE,CAE1B,SAAS,EAAW,CAAO,CAAE,CAAO,EAChC,IAAK,IAAI,KAAO,EAAQ,SAAS,CAC7B,GAAI,KAAK,EAAQ,SAAS,CAAC,EAAI,GAAK,KAAK,GACrC,MAAO,CAAA,EAGf,MAAO,CAAA,CACX,CAuFA,MAAM,EACF,YAAY,EAAa,EAAE,CAAE,EAAW,EAAE,CAAE,EAAU,EAAE,CAAE,KAtFtD,CAuFA,CAAA,IAAI,CAAC,KAAK,CAAG,GACb,IAAI,CAAC,WAAW,CAAG,KACnB,IAAI,CAAC,OAAO,CAAG,KACf,IAAI,CAAC,UAAU,CAAG,CAAA,EAClB,IAAI,CAAC,kBAAkB,CAAG,SAM1B,IAAI,CAAC,OAAO,CAAG,KACf,IAAI,CAAC,WAAW,CAAG,CAAA,EAKnB,IAAI,CAAC,OAAO,CAAG,KA/EnB,AAjBA,CAAA,EAAQ,AADR,CAAA,EAAQ,AADR,CAAA,EAAQ,AADR,CAAA,EAAQ,AADR,CAAA,EAAQ,AADR,CAAA,EAAQ,AADR,CAAA,EAAQ,CADJ,EAAQ,EAAE,EACA,MAAM,CAAC,OAAO,IAAI,CAAC,eAAe,GAAG,CAAC,AAAC,GAAM,EAAI,YAA/D,EACc,MAAM,CAAC,OAAO,IAAI,CAAC,eAAe,GAAG,CAAC,AAAC,GAAM,EAAI,SAA/D,EACc,MAAM,CAAC,OAAO,IAAI,CAAC,aAAa,GAAG,CAAC,AAAC,GAAM,EAAI,SAA7D,EACc,MAAM,CAAC,OAAO,IAAI,CAAC,iBAAiB,GAAG,CAAC,AAAC,GAAM,EAAI,YAAjE,EACc,MAAM,CAAC,OAAO,IAAI,CAAC,iBAAiB,GAAG,CAAC,AAAC,GAAM,KAAK,GAAK,SAAvE,EACc,MAAM,CAAC,CAAC,WAAY,UAAW,SAAS,CAAC,GAAG,CAAC,AAAC,GAAM,KAAK,GAAK,aAAtB,EACxC,MAAM,CAAC,CACjB,UACA,SACA,MACA,SACA,QACA,QACA,QACA,YACA,SACA,UACA,YACA,SACA,QACA,SACA,eACH,CAAC,GAAG,CAAC,AAAC,GAAM,KAAK,GAAK,aAAtB,EACK,IAAI,GAEV,CAAK,CAAC,EAAM,OAAO,CAAC,cAAc,CAAG,iBACrC,CAAK,CAAC,EAAM,OAAO,CAAC,kBAAkB,CAAG,aACzC,CAAK,CAAC,EAAM,OAAO,CAAC,cAAc,CAAG,iBACrC,CAAK,CAAC,EAAM,OAAO,CAAC,kBAAkB,CAAG,aACzC,CAAK,CAAC,EAAM,OAAO,CAAC,eAAe,CAAG,kBACtC,CAAK,CAAC,EAAM,OAAO,CAAC,mBAAmB,CAAG,cAC1C,CAAK,CAAC,EAAM,OAAO,CAAC,eAAe,CAAG,kBACtC,CAAK,CAAC,EAAM,OAAO,CAAC,mBAAmB,CAAG,cAC1C,CAAK,CAAC,EAAM,OAAO,CAAC,YAAY,CAAG,eACnC,CAAK,CAAC,EAAM,OAAO,CAAC,gBAAgB,CAAG,WACvC,CAAK,CAAC,EAAM,OAAO,CAAC,gBAAgB,CAAG,eACvC,CAAK,CAAC,EAAM,OAAO,CAAC,gBAAgB,CAAG,eACnC,MAAM,cAAe,WACrB,CAAK,CAAC,EAAM,OAAO,CAAC,iBAAiB,CAAG,iBACxC,CAAK,CAAC,EAAM,OAAO,CAAC,kBAAkB,CAAG,iBAU7C,EAA0B,AAR1B,CAAA,EAAoB,EAAM,GAAG,CAAC,AAAC,IAC3B,IAAI,EAAQ,EAAE,KAAK,CAAC,KAKpB,OAJI,EAAM,MAAM,CAAG,IACf,CAAK,CAAC,EAAE,CAAG,OAAO,CAAK,CAAC,EAAE,EAC1B,CAAK,CAAC,EAAE,CAAG,EAAM,OAAO,CAAC,CAAK,CAAC,EAAE,CAAG,IAAM,CAAK,CAAC,EAAE,GAE/C,CACX,EAAA,EAC4C,GAAG,CAAC,CAAC,EAAO,KACpD,IAAI,EAAI,EAAI,EAAI,EAChB,IAAM,EAAK,CAAK,CAAC,EAAE,CACf,EAAO,GACX,OAAQ,CAAK,CAAC,EAAE,EACZ,IAAK,UACD,EAAQ,MAAA,CAAA,EAAK,MAAM,cAAe,GAAI,IAAI,AAAJ,EAAkC,EAAK,GAC7E,KACJ,KAAK,OACD,EAAQ,MAAA,CAAA,EAAK,MAAM,cAAe,GAAI,IAAI,AAAJ,EAAkC,EAAK,GAC7E,KACJ,KAAK,OACD,EAAQ,MAAA,CAAA,EAAK,MAAM,YAAa,GAAI,IAAI,AAAJ,EAAkC,EAAK,GAC3E,KACJ,KAAK,UACD,EAAQ,MAAA,CAAA,EAAK,MAAM,gBAAiB,GAAI,IAAI,AAAJ,EAAkC,EAAK,EAEvF,CACA,IAAI,EAAM,GACN,EAAW,EACf,IAAK,IAAI,EAAI,EAAG,EAAI,EAAG,EAAI,EAAG,MAAM,CAAE,IAAK,IAAK,CAC5C,KAAO,CAAC,cAAc,IAAI,CAAC,CAAI,CAAC,EAAE,GAC9B,IACA,IAEJ,GAAO,CACX,QACA,AAAI,EACO,EACJ,EACX,GAyBI,IAAI,CAAC,OAAO,CAAC,EAAY,EAAU,EACvC,CACA,eAAe,CAAU,CAAE,EAAS,EAAE,CAAE,CAAY,CAAE,CAClD,GAAI,CAAC,EACD,OAAO,KACX,OAAQ,GACJ,IAAK,UACD,OAAO,IAAI,EAAoB,UAAW,EAAQ,EACtD,KAAK,OACD,OAAO,IAAI,EAAiB,OAAQ,EAAQ,EAChD,KAAK,OACD,OAAO,IAAI,EAAiB,OAAQ,EAAQ,EAChD,KAAK,UACD,OAAO,IAAI,EAAoB,UAAW,EAAQ,EACtD,KAAK,OACD,OAAO,IAAI,EAAiB,OAAQ,EAAQ,EAChD,KAAK,WACD,OAAO,IAAI,EAAqB,WAAY,EAAQ,EAC5D,CACA,OAAO,IACX,CACA,KAAK,CAAK,CAAE,CACR,IAAI,SAEJ,AADA,EAAQ,KAAK,GACT,CAAA,IAAI,CAAC,KAAK,GAAK,IAAS,IAAI,CAAC,OAAO,AAAP,IAGjC,IAAI,CAAC,KAAK,CAAG,EACR,EAKD,IAAI,CAAC,OAAO,CAAG,IAAI,CAAC,UAAU,CAAC,GAJ/B,IAAI,CAAC,OAAO,CACP,AAAC,CAAA,MAAA,CAAA,EAAK,IAAI,CAAC,WAAW,AAAX,EAAyC,KAAK,EAAI,EAAG,UAAU,CAAC,IAAI,CAAC,OAAO,CAAE,IAAI,CAAC,OAAO,CAAE,IAAI,CAAC,WAAW,CAAA,GAAM,EAAE,CAKjI,CAAA,EACX,CACA,QAAQ,CAAU,CAAE,EAAS,EAAE,CAAE,CAAY,CAAE,CAC3C,IAAI,CAEJ,CAAA,IAAI,CAAC,OAAO,CAAG,KACX,IAAiB,CAAA,MAAA,CAAA,EAAK,IAAI,CAAC,WAAU,AAAV,EAAyC,KAAK,EAAI,EAAG,UAAS,AAAT,IAChF,IAAI,CAAC,OAAO,CAAG,KACf,IAAI,CAAC,OAAO,CAAG,MAEnB,IAAI,CAAC,WAAW,CAAG,IAAI,CAAC,cAAc,CAAC,EAAY,EAAQ,EAC/D,CACA,UAAU,CAAK,CAAE,CACb,GAAI,CAAC,IAAI,CAAC,WAAW,CACjB,MAAO,CAAA,EACX,GAAI,CAAC,EAAK,CAAG,EACb,GAAI,AAAgC,YAAhC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAgB,CAG3C,GAFI,IAAS,IAAI,CAAC,OAAO,EACrB,CAAA,IAAI,CAAC,OAAO,CAAG,IADnB,EAEI,CAAC,CAAC,OAAQ,OAAQ,UAAW,WAAY,OAAO,CAAC,QAAQ,CAAC,GAC1D,MAAO,CAAA,EAMX,IAAK,IAAM,KALP,AAAS,SAAT,GACA,CAAA,CAAK,CAAC,EAAE,CAAG,KAAK,CAAK,CAAC,EAAE,CAAA,EACxB,AAAC,IAAI,CAAC,OAAO,EACb,CAAA,IAAI,CAAC,OAAO,CAAG,EAAE,AAAF,EACnB,IAAI,CAAC,OAAO,CAAG,KACM,IAAI,CAAC,OAAO,EAC7B,GAAI,CAAM,CAAC,EAAE,GAAK,GAAQ,CAAM,CAAC,EAAE,GAAK,CAAK,CAAC,EAAE,CAC5C,MAAO,CAAA,EAIf,OADA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GACX,CAAA,CACX,OACK,AAAoC,SAAhC,IAAI,CAAC,WAAW,CAAC,UAAU,EAGhC,CAAA,AAFI,IAAS,IAAI,CAAC,OAAO,EACrB,CAAA,IAAI,CAAC,OAAO,CAAG,IADnB,GAEI,CAAC,CAAC,OAAQ,WAAY,UAAU,CAAC,QAAQ,CAAC,KAE1C,AAAS,YAAT,GACA,CAAA,CAAK,CAAC,EAAE,CAAG,KAAK,CAAK,CAAC,EAAE,CAAA,EACxB,AAAC,IAAI,CAAC,OAAO,EACb,CAAA,IAAI,CAAC,OAAO,CAAG,EAAE,AAAF,EACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAClB,IAAI,CAAC,OAAO,CAAG,KACR,CAAA,EAR6B,CAW5C,CACA,aAAa,CAAK,CAAE,CAChB,GAAI,CAAC,IAAI,CAAC,OAAO,CACb,MAAO,CAAA,EACX,GAAI,EAAO,CACP,IAAM,EAAW,EAAM,IAAI,CAAC,KACxB,EAAU,KAEd,IAAK,IAAI,EAAI,EAAG,EAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAE,IACrC,GAAI,IAAa,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,KAAM,CACxC,EAAU,IAAI,CAAC,OAAO,CAAC,EAAE,CACzB,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAG,GACvB,KACJ,CAEJ,GAAI,CAAC,EACD,MAAO,CAAA,CACf,MAEI,IAAI,CAAC,OAAO,CAAC,GAAG,GAKpB,OAHI,AAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EACpB,CAAA,IAAI,CAAC,OAAO,CAAG,IADnB,EAEA,IAAI,CAAC,OAAO,CAAG,KACR,CAAA,CACX,CACA,WAAW,CAAO,CAAE,CACZ,IAAI,CAAC,OAAO,GAAK,EACZ,IAAI,CAAC,WAAW,EAIjB,IAAI,CAAC,OAAO,CAAG,KACf,IAAI,CAAC,WAAW,CAAG,CAAA,GAJnB,IAAI,CAAC,WAAW,CAAG,CAAA,GAQvB,IAAI,CAAC,OAAO,CAAG,EACf,IAAI,CAAC,WAAW,CAAG,CAAA,GAEvB,IAAI,CAAC,OAAO,CAAG,IACnB,CACA,YAAY,CAAU,CAAE,QACpB,AAAI,IAAI,CAAC,WAAW,EAAI,IAAI,CAAC,WAAW,CAAC,UAAU,GAAK,EAC7C,SAEJ,IACX,CACA,aAAa,CAAE,CAAE,CACb,IAAI,EAAI,EACR,MAAQ,AAAC,CAAA,MAAA,CAAA,EAAM,MAAA,CAAA,EAAK,IAAI,CAAC,WAAW,AAAX,EAAyC,KAAK,EAAI,EAAG,cAAa,AAAb,EAA4C,KAAK,EAAI,CAAE,CAAC,EAAE,AAAF,GAAQ,IAClJ,CACA,WAAW,CAAK,CAAE,CACd,IAAI,EAAI,EAAI,EACZ,EAAQ,KAAK,GACb,IAAI,CAAC,UAAU,CAAG,CAAA,EAClB,IAAI,EAAa,AAAE,CAAA,MAAA,CAAA,EAAK,IAAI,CAAC,WAAU,AAAV,EAAyC,KAAK,EAAI,EAAG,UAAU,AAAV,GAAe,GAI7F,EAAkB,EAAa,EAAU,SAAS,CAAC,EAAW,CAAG,GAEjE,EAAc,EACM,CAAA,SAApB,EAAM,KAAK,CAAC,KACR,EAAM,KAAK,CAAC,EAAG,MAAO,kBACtB,EAAQ,EAAM,KAAK,CAAC,EAAG,IACvB,EAAc,QAItB,IAAI,EAAI,EAAU,UAAU,CAAC,EAC7B,CAAA,IAAI,CAAC,UAAU,CAAG,CAAiB,CAAC,EAAE,CAAC,EAAE,GAAK,EAM9C,IAAI,EAAW,GACX,EAAe,CAAC,CAAC,SAAU,EAAG,EAAM,CAAC,CAOzC,GAJI,EAAM,MAAM,CAAG,GACf,EAAa,IAAI,CAAC,CAAC,QAAS,EAAG,EAAM,EAGrC,CAAC,IAAI,CAAC,UAAU,EAChB,CAAiB,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,EAAG,EAAM,MAAM,IAAM,EAAO,CAE3D,IAAI,EAAc,EAAM,MAAM,CAAG,EAGjC,IAFI,CAAC,GACD,IACG,GACH,CAAiB,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,EAAG,KAC9B,EAAM,MAAM,CAAC,EAAG,IACpB,CAAiB,CAAC,EAAI,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,EAAG,KAClC,EAAM,MAAM,CAAC,EAAG,IACpB,IAEJ,IAAI,EAAa,EAAM,MAAM,CAAC,EAAG,GACjC,KAAO,GAAK,GACR,CAAiB,CAAC,EAAI,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,EAAG,KAAiB,GACvD,IACJ,EAAa,IAAI,CAAC,CAAC,QAAS,EAAG,GAAG,CACtC,CASA,IAAI,EAAO,CAAC,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAC,CAC/C,EAAc,GACd,EAAQ,EACR,EAAY,CAAA,EAEZ,EAAc,KACd,EAAkB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,CAC7C,EAAU,MAAC,CAAA,EAAK,IAAI,CAAC,WAAU,AAAV,EAAyC,KAAK,EAAI,EAAG,cAAc,CAE5F,IAAK,EAAI,EAAG,EAAI,EAAkB,MAAM,CAAE,IAAK,CAC3C,GAAI,CAAC,EAAU,CACX,IAAI,EAAa,EAAa,KAAK,GACnC,GAAI,CAAC,EACD,MACJ,EAAW,CAAU,CAAC,EAAE,CACxB,EAAI,CAAU,CAAC,EAAE,CACjB,EAAQ,CAAU,CAAC,EAAE,AACzB,CACA,IAAI,EAAQ,CAAiB,CAAC,EAAE,CAC5B,EAAK,CAAK,CAAC,EAAE,CACb,EAAO,CAAK,CAAC,EAAE,CACnB,GAAI,CAAC,EACD,MACJ,GAAI,AAAa,UAAb,EAAsB,CAEtB,GAAI,GAAS,EAAG,CACZ,EAAW,GACX,QACJ,CACA,EAAY,CAAA,CAChB,MACK,GAAI,AAAa,UAAb,EAEL,CAAA,GAAI,GAAS,EAAG,CACZ,EAAW,GACX,QACJ,CAAA,MAEC,GAAI,EAAG,MAAM,CAAC,EAAG,EAAM,MAAM,IAAM,EAAO,CAE3C,EAAW,GACX,QACJ,CACA,GAAI,EAAM,MAAM,CAAG,EAEf,CAAA,GAAI,AAAa,UAAb,EACA,QADJ,MAKA,GAAI,AAAa,UAAb,EACA,SAER,IAAI,EAAY,EAAU,SAAS,CAAC,EAAK,CAEzC,GAAqB,IAAjB,EAAM,MAAM,EACZ,IAAe,CAAA,EAAa,EAAkB,CAAA,GAG9C,AAAe,YAAf,GAA6B,CAAA,AAAc,IAAd,GAAmB,EAAY,CAAA,GAG5D,AAAe,SAAf,GACE,CAAA,AAAc,IAAd,GAAmB,EAAY,GAAM,AAAc,IAAd,CAAc,GAGrD,AAAe,SAAf,GAAyB,GAAW,AAAc,IAAd,GAGnC,AAAA,CAAA,AAAe,YAAf,GAA4B,AAAe,SAAf,CAAe,GAC5C,IAAc,GAGd,AAAgB,SAAhB,GAA0B,AAAc,IAAd,GAG1B,AAAC,CAAA,AAAO,UAAP,GAAkB,AAAO,UAAP,CAAO,GAAY,OAAO,UAAU,CAAC,GAnBxD,SAqBJ,IAAI,EAAa,EACb,EAAW,EACf,GAAI,AAAa,UAAb,EAAsB,CAGtB,EAAa,CAAK,CAAC,EAAE,CACrB,IAAI,EAAgB,CAAK,CAAC,EAAE,CACxB,IACA,EAAW,EAAa,EAAM,MAAM,CACpC,GACI,AAAC,CAAA,CAAuB,CAAC,EAAc,CAAC,EAAW,EAAI,GAAA,EAAK,UAAU,CAAC,GAAK,GAChF,GACK,AAAA,CAAA,CAAuB,CAAC,EAAc,CAAC,EAAW,EAAE,EAAI,GAAA,EAAK,UAAU,CAAC,GAAK,IAEtF,EAAK,CAAiB,CAAC,EAAc,CAAC,EAAE,AAC5C,KAGQ,AADJ,CAAA,EAAW,EAAM,MAAM,AAAN,GAEb,CAAA,GACK,AAAA,CAAA,CAAuB,CAAC,EAAE,CAAC,EAAW,EAAE,EAAI,GAAA,EAAK,UAAU,CAAC,GACzD,EAHZ,CAKA,CAAA,GAAc,IAAoB,GAE9B,CAAA,CAAC,GACD,CAAe,CAAC,EAAU,CAAG,CAAe,CAAC,CAAW,CAAC,EAAE,CAAC,AAAD,GAC3D,CAAA,EAAc,CAAC,EAAM,EAAI,EAAU,AAAA,EAIvC,EAAc,GACd,EAAkB,GAClB,AAAa,UAAb,GACA,CAAC,CAAI,CAAC,EAAE,CAAC,MAAM,EACf,CAAI,CAAC,EAAE,CAAC,MAAM,EACd,CAAA,EAAc,CAAA,EAEd,GAAW,IAAc,GAMrB,AAAC,CAAI,CAAC,EAAU,CAAC,MAAM,EAAK,CAAI,CAAC,EAAE,CAAC,MAAM,EAC1C,CAAA,CAAI,CAAC,EAAE,CAAG,CAAC,CAAC,SAAU,EAAU,QAAQ,CAAC,EAAK,CAAC,CAAC,AAAA,EAEhD,AAAE,KAAM,GACR,CAAA,EAAY,CAAA,GAGZ,AAAC,CAAI,CAAC,EAAU,CAAC,MAAM,EACvB,CAAA,CAAI,CAAC,EAAU,CAAG,CAAC,CAAC,SAAU,EAAU,QAAQ,CAAC,EAAK,CAAC,CAAC,AAAA,EAIhE,IAAI,EAAe,AAAa,UAAb,GAAwB,CAAI,CAAC,EAAU,CAAC,MAAM,CAC7D,CAAA,CAAA,GAAgB,CAAI,CAAC,EAAU,CAAC,EAAe,EAAE,CAAC,EAAE,GAAK,CAAA,IAE7D,CAAI,CAAC,EAAU,CAAC,IAAI,CAAC,CAAC,EAAM,EAAI,EAAY,EAAS,EACrD,IACJ,CACA,IAAI,EAAS,EAAE,CAwBf,OAvBI,GACA,CAAA,EAAS,CACL,CACI,OACA,yEACH,CACJ,AAAA,EAED,GAAe,IACf,EAAS,EAAO,MAAM,CAAC,CAAI,CAAC,EAAY,EACxC,CAAI,CAAC,EAAY,CAAG,EAAE,EAEtB,GAAmB,IAEnB,EAAS,AADT,CAAA,EAAS,EAAO,MAAM,CAAC,CAAI,CAAC,EAAE,CAAA,EACd,MAAM,CAAC,CAAI,CAAC,EAAgB,EAC5C,CAAI,CAAC,EAAgB,CAAG,EAAE,CAC1B,CAAI,CAAC,EAAE,CAAG,EAAE,EAEZ,GAAe,EAAQ,IAEvB,EAAK,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,EAAY,CAAW,CAAC,EAAE,CAAE,CAAW,CAAC,EAAE,GAEzE,IAAI,CAAC,OAAO,CAAG,MAAM,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,EAAQ,GAC5C,MAAA,CAAA,EAAK,IAAI,CAAC,OAAM,AAAN,EAAqC,EAAK,EAAE,AAClE,CACA,YAAY,CAAU,CAAE,CAAK,CAAE,CAAG,CAAE,CAChC,IAAI,EACJ,IAAI,EAAM,EAAE,CACR,EAAa,EAAE,CACf,EAAU,MAAC,CAAA,EAAK,IAAI,CAAC,WAAU,AAAV,EAAyC,KAAK,EAAI,EAAG,cAAc,CAC5F,GAAI,AAAe,YAAf,EACA,OAAQ,GACJ,IAAK,OACD,IAAI,EAAQ,EAAI,MAAM,CAAC,GAAG,WAAW,GAAK,EAAI,KAAK,CAAC,GAEpD,IAAK,IAAI,KADT,EAAI,IAAI,CAAC,CAAC,SAAU,CAAA,EAAG,EAAK,oBAAoB,CAAC,CAAC,EACnC,cACN,aAAa,CAAC,EAAG,CAAC,KAAK,EAExB,aAAa,CAAC,EAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,IACjC,AAAC,CAAA,GAAW,KAAM,EAAU,EAAa,CAAA,EAAK,IAAI,CAAC,CAC/C,UACA,EACH,EAGT,KACJ,KAAK,UACD,IAAI,EAAU,MAAM,gBAAiB,GAAK,IAAI,CAE9C,IAAK,IAAI,KADT,EAAI,IAAI,CAAC,CAAC,SAAU,CAAA,EAAG,EAAQ,eAAe,CAAC,CAAC,EACjC,cACN,aAAa,CAAC,EAAG,CAAC,SAAS,EAE5B,EAAW,aAAa,CAAC,EAAG,CAAE,IAC9B,AAAC,CAAA,GAAW,KAAM,EAAU,EAAa,CAAA,EAAK,IAAI,CAAC,CAC/C,UACA,EACH,CAIjB,MAEC,GAAI,AAAe,SAAf,EACL,OAAQ,GACJ,IAAK,OACD,IAAI,EAAO,EAAI,MAAM,CAAC,GAAG,WAAW,GAAK,EAAI,KAAK,CAAC,GAEnD,IAAK,IAAI,KADT,EAAI,IAAI,CAAC,CAAC,SAAU,CAAA,EAAG,EAAK,WAAW,CAAC,CAAC,EAC1B,cACP,aAAa,CAAC,EAAG,CAAC,IAAI,GAAK,GAC1B,AAAA,CAAA,GAAW,KAAM,EAAU,EAAa,CAAA,EAAK,IAAI,CAAC,CAC/C,OACA,EACH,EAGT,KACJ,KAAK,WACD,IAAI,EAAW,EAAI,MAAM,CAAC,GAAG,WAAW,GAAK,EAAI,KAAK,CAAC,GAEvD,IAAK,IAAI,KADT,EAAI,IAAI,CAAC,CAAC,SAAU,CAAA,EAAG,EAAS,MAAM,CAAC,CAAC,EACzB,cACP,aAAa,CAAC,EAAG,CAAC,QAAQ,GAAK,GAC9B,AAAA,CAAA,GAAW,KAAM,EAAU,EAAa,CAAA,EAAK,IAAI,CAAC,CAC/C,OACA,EACH,CAIjB,CAEJ,MAAO,IAAI,KAAQ,EAAW,AAClC,CACA,OAAO,WAAW,CAAK,CAAE,CAErB,IAAI,EAAO,EACP,EAAQ,EAAkB,MAAM,CAAG,EACvC,KAAO,EAAQ,GAAM,CACjB,IAAI,EAAM,KAAK,KAAK,CAAE,AAAA,CAAA,EAAQ,CAAA,EAAQ,EAAI,GAC1C,GAAI,CAAiB,CAAC,EAAI,CAAC,EAAE,GAAK,GAC7B,CAAA,AAAQ,IAAR,GAAa,CAAiB,CAAC,EAAM,EAAE,CAAC,EAAE,GAAK,CAAA,EAEhD,OAAO,CAEF,CAAA,CAAiB,CAAC,EAAI,CAAC,EAAE,CAAG,EACjC,EAAO,EAAM,EAGb,EAAQ,EAAM,CAEtB,CAQA,OAPI,GAAQ,EAAkB,MAAM,CAAG,EACnC,EAAO,EAAkB,MAAM,CAAG,EAC7B,CAAiB,CAAC,EAAO,EAAE,CAAC,EAAE,EACnC,CAAiB,CAAC,EAAK,CAAC,EAAE,CAAG,GAC7B,IACA,GAAQ,CAAiB,CAAC,EAAO,EAAE,CAAC,EAAE,GAAK,GAC3C,IACG,CACX,CACJ,CACA,EAAU,SAAS,CAAG,CAClB,QAAS,EACT,KAAM,EACN,KAAM,EACN,KAAM,EACN,KAAM,EACN,QAAS,EACT,SAAU,EACV,SAAU,EACV,QAAS,CACb,EACA,EAAU,QAAQ,CAAG,CACjB,QAAS,iBACT,KAAM,OACN,KAAM,QACN,KAAM,QACN,KAAM,QACN,QAAS,YACT,SAAU,YACV,SAAU,WACV,QAAS,SACb,CACA,OAAM,EACF,YAAY,CAAU,CAAE,EAAS,EAAE,CAAE,EAAe,EAAE,CAAE,CAqCpD,GAhCA,IAAI,CAAC,OAAO,CAAG,GAKf,IAAI,CAAC,GAAG,CAAG,KAKX,IAAI,CAAC,WAAW,CAAG,KAKnB,IAAI,CAAC,kBAAkB,CAAG,KAC1B,IAAI,CAAC,cAAc,CAAG,KACtB,IAAI,CAAC,OAAO,CAAG,KACf,IAAI,CAAC,OAAO,CAAG,KACf,IAAI,CAAC,UAAU,CAAG,EAClB,IAAI,CAAC,WAAW,CAAG,KACnB,IAAI,CAAC,kBAAkB,CAAG,KAC1B,IAAI,CAAC,OAAO,CAAG,GACf,IAAI,CAAC,GAAG,CAAG,KACP,AAAwB,UAAxB,OAAO,EACH,GACA,CAAA,IAAI,CAAC,OAAO,CAAG,CADnB,GAIA,IAAI,CAAC,GAAG,CAAG,EACX,IAAI,CAAC,OAAO,CAAG,KAAK,IAAI,CAAC,GAAG,CAAC,OAAO,GAEpC,CAAC,GAAc,CAAC,IAAI,CAAC,GAAG,CACxB,MACR,CACA,WAAW,CAAO,CAAE,CAAO,CAAE,CAAW,CAAE,KAqClC,EACA,EArCJ,GAAI,AAAY,SAAZ,EACA,MAAO,CACH,IAAI,CAAC,OAAO,IACT,EAAiB,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,EAC5D,CAEA,GAAI,AAAY,aAAZ,EACL,MAAO,CACH,IAAI,CAAC,OAAO,IACT,EAAqB,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,EAChE,CAEA,GAAI,AAAY,YAAZ,EACL,MAAO,CACH,IAAI,CAAC,OAAO,IACT,EAAoB,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,EAC/D,CAKL,GAHI,AAAC,IAAI,CAAC,WAAW,EACjB,CAAA,IAAI,CAAC,WAAW,CAAG,IAAI,CAAC,cAAc,EAD1C,EAGI,CAAC,IAAI,CAAC,kBAAkB,CAAE,CAC1B,IAAM,EAAiB,CAAC,EACxB,IAAK,GAAM,CAAC,EAAY,EAAM,GAAI,IAAI,CAAC,WAAW,CAC1C,IAAe,IAAI,CAAC,UAAU,EAC9B,CAAA,CAAc,CAAC,EAAM,CAAG,CAAA,EAIhC,IAAK,IAAM,KAFX,IAAI,CAAC,kBAAkB,CAAG,EAAE,CAC5B,IAAI,CAAC,cAAc,CAAG,CAAC,EACN,IAAI,CAAC,QAAQ,GACpB,KAAM,IACR,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,CAAE,EAAG,EAClD,IAAI,CAAC,cAAc,CAAC,EAAG,CAAG,UAGtC,CAGA,GAAI,EAAS,CAGT,IAAK,IAAM,KAFX,EAAU,EAAE,CACZ,EAAiB,EAAE,CACE,IAAI,CAAC,WAAW,EAC7B,IAAI,CAAC,MAAM,CAAC,EAAQ,KAChB,EAAQ,MAAM,EACd,AAAc,WAAd,CAAM,CAAC,EAAE,EACT,AAAmC,WAAnC,CAAO,CAAC,EAAQ,MAAM,CAAG,EAAE,CAAC,EAAE,CAC9B,CAAO,CAAC,EAAQ,MAAM,CAAG,EAAE,CAAG,EAG9B,EAAQ,IAAI,CAAC,IAOzB,IAAK,IAAM,KAHP,EAAQ,MAAM,EAAI,AAAmC,WAAnC,CAAO,CAAC,EAAQ,MAAM,CAAG,EAAE,CAAC,EAAE,EAChD,EAAQ,GAAG,GAEM,IAAI,CAAC,kBAAkB,EACpC,IAAI,CAAC,MAAM,CAAC,EAAQ,IACpB,EAAe,IAAI,CAAC,EAGhC,MAEI,EAAU,IAAI,IAAI,CAAC,WAAW,CAAC,CAC/B,EAAiB,KAgBrB,OAdI,IACA,EAAU,EAAQ,MAAM,CAAC,CAAC,CAAC,EAAQ,GAAK,IAAY,IAAI,CAAC,UAAU,EACnE,EAAU,IAAI,CAAC,IAAI,CAAC,EAAS,EAAS,GAClC,IACA,EAAiB,EAAe,MAAM,CAAC,CAAC,CAAC,EAAQ,GAAK,IAAY,IAAI,CAAC,UAAU,EACjF,EAAiB,IAAI,CAAC,IAAI,CAAC,EAAgB,EAAS,KAGxD,IAAI,CAAC,OAAO,EACZ,CAAA,EAAU,CAAC,IAAI,CAAC,OAAO,IAAK,EAAQ,AAAA,EAEpC,GAAkB,EAAe,MAAM,EACvC,CAAA,EAAU,IAAI,EAAS,CAAC,SAAU,kBAAkB,IAAK,EAAe,AAAA,EAErE,CACX,CACJ,CACA,MAAM,UAA4B,EAC9B,aAAc,CACV,KAAK,IAAI,WACT,IAAI,CAAC,OAAO,CAAG,CAAC,cAAe,GAAG,AACtC,CACA,OAAO,CAAG,CAAE,CAAO,CAAE,CACjB,GAAI,CAAC,GAED,AAAW,YAAX,CAAG,CAAC,EAAE,CADN,MAAO,CAAA,EAGX,IAAM,EAAO,MAAM,cAAe,CAAG,CAAC,EAAE,EACxC,IAAK,GAAM,CAAC,EAAY,EAAM,GAAI,EAC9B,OAAQ,GACJ,IAAK,OACD,GAAI,EAAK,KAAK,CAAC,KAAK,CAAC,AAAC,GAAM,GAAK,GAC7B,MAAO,CAAA,EACX,KACJ,KAAK,OACD,GAAI,CAAC,SAAS,EAAK,EAAE,CAAE,GACnB,MAAO,CAAA,EACX,KACJ,KAAK,UACD,GAAI,CAAC,EAAW,EAAM,GAClB,MAAO,CAAA,EACX,KACJ,KAAK,WACD,GAAI,EAAK,SAAS,CAAC,KAAK,CAAC,AAAC,GAAM,GAAK,GACjC,MAAO,CAAA,CAEnB,CAEJ,MAAO,CAAA,CACX,CACA,UAAW,CACP,OAAO,aACX,CACA,mBAAoB,CAChB,IAAM,EAAS,CAAC,EAChB,IAAK,IAAM,KAAM,cAAe,CAC5B,IAAM,EAAI,aAAa,CAAC,EAAG,CAC3B,GAAI,CAAC,EACD,SACJ,IAAM,EAAS,KAAK,EAAE,WAAW,EAAI,EAAE,IAAI,CACvC,AAAC,CAAA,CAAM,CAAC,EAAO,EACf,CAAA,CAAM,CAAC,EAAO,CAAG,CAAE,KAAM,EAAI,IAAK,EAAE,GAAG,EAAI,EAAG,MAAO,EAAE,AAAC,CAAA,EAG7C,AAAC,EAAE,KAAK,EAAI,EAAE,IAAI,GAAK,EAAE,WAAW,CAM/C,CAAM,CAAC,EAAO,CAAC,KAAK,CAAC,IAAI,CAAC,IAJ1B,CAAM,CAAC,EAAO,CAAC,IAAI,CAAG,EACtB,CAAM,CAAC,EAAO,CAAC,GAAG,CAAG,EAAE,GAAG,EAAI,CAAM,CAAC,EAAO,CAAC,GAAG,CAKxD,CAEA,IAAK,IAAM,KAAU,EACjB,CAAM,CAAC,EAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,EAAG,KAC1B,IAAM,EAAK,aAAa,CAAC,EAAE,CACrB,EAAK,aAAa,CAAC,EAAE,CACrB,EAAM,AAAA,CAAA,EAAG,KAAK,EAAI,EAAG,IAAG,AAAH,EAAM,WAAW,GACtC,EAAM,AAAA,CAAA,EAAG,KAAK,EAAI,EAAG,IAAG,AAAH,EAAM,WAAW,GAC5C,OAAO,EAAK,EAAK,GAAK,CAAA,CAAA,EAAK,CAAA,CAC/B,GAGJ,IAAM,EAAU,OAAO,MAAM,CAAC,GAAQ,IAAI,CAAC,CAAC,EAAG,IAAM,EAAE,GAAG,CAAG,EAAE,GAAG,EAAK,CAAA,EAAE,IAAI,CAAG,EAAE,IAAI,CAAG,GAAK,CAAA,CAAA,EAAE,IAAI,CAAG,EAAE,IAAI,AAAJ,CAAW,GAGpH,IAAK,IAAM,KADX,OAAO,eAAe,CAAG,CAAC,EACV,GACZ,OAAO,eAAe,CAAC,KAAK,aAAa,CAAC,EAAE,IAAI,CAAC,CAAC,WAAW,EAAI,aAAa,CAAC,EAAE,IAAI,CAAC,CAAC,IAAI,EAAE,CAAG,EAAE,KAAK,CAAC,KAAK,GAEjH,IAAM,EAAU,EAAE,CAClB,IAAK,IAAM,KAAK,EAAS,CACrB,IAAM,EAAS,EAAE,IAAI,CACrB,OAAQ,GACJ,IAAK,YACD,EAAQ,IAAI,CAAC,CAAC,SAAU,eAAe,EACvC,KACJ,KAAK,YACD,EAAQ,IAAI,CAAC,CAAC,SAAU,eAAe,EACvC,KACJ,KAAK,UACD,EAAQ,IAAI,CAAC,CAAC,SAAU,eAAe,EACvC,KACJ,KAAK,UACD,EAAQ,IAAI,CAAC,CAAC,SAAU,eAAe,EACvC,KACJ,KAAK,UACD,EAAQ,IAAI,CAAC,CAAC,SAAU,eAAe,EACvC,KACJ,KAAK,UACD,EAAQ,IAAI,CAAC,CAAC,SAAU,eAAe,EACvC,KACJ,KAAK,SACD,EAAQ,IAAI,CAAC,CAAC,SAAU,eAAe,EACvC,KACJ,KAAK,UACD,EAAQ,IAAI,CAAC,CAAC,SAAU,eAAe,EACvC,KACJ,KAAK,aACD,EAAQ,IAAI,CAAC,CAAC,SAAU,eAAe,EACvC,KACJ,KAAK,YACD,EAAQ,IAAI,CAAC,CAAC,SAAU,SAAS,EACjC,KACJ,KAAK,SACD,EAAQ,IAAI,CAAC,CAAC,SAAU,MAAM,EAC9B,KACJ,KAAK,iBACD,QACR,CAEA,IAAK,IAAM,KADX,EAAQ,IAAI,CAAC,CAAC,UAAW,EAAO,EACd,EAAE,KAAK,EACrB,EAAQ,IAAI,CAAC,CAAC,UAAW,EAAI,CAErC,CACA,OAAO,CACX,CACA,gBAAiB,CACb,OAAO,IAAI,CAAC,iBAAiB,EACjC,CACA,KAAK,CAAO,CAAE,CAAO,CAAE,CAAW,CAAE,CAChC,IAAM,EAAY,EAAc,GAAK,EACrC,GAAI,CAAC,KAAM,MAAO,MAAO,MAAO,MAAO,MAAM,CAAC,QAAQ,CAAC,GACnD,OAAO,EAAQ,IAAI,CAAC,CAAC,CAAC,EAAU,EAAI,CAAE,CAAC,EAAU,EAAI,IACjD,IAAM,EAAQ,MAAM,cAAe,GAAK,SAAS,CAAC,EAAQ,CAE1D,MAAO,AAAC,CAAA,AADM,MAAM,cAAe,GAAK,SAAS,CAAC,EAAQ,CAC1C,CAAA,EAAS,CAC7B,GAEC,GAAI,AAAY,QAAZ,EACL,OAAO,EAAQ,IAAI,CAAC,CAAC,CAAC,EAAU,EAAI,CAAE,CAAC,EAAU,EAAI,IACjD,IAAM,EAAQ,MAAM,cAAe,GAAK,SAAS,CAC3C,EAAQ,MAAM,cAAe,GAAK,SAAS,CAC3C,EAAO,EAAM,EAAE,CAAG,EAAM,GAAG,CAAG,EAAM,GAAG,CAAG,EAAM,GAAG,CAAG,EAAM,GAAG,CAAG,EAAM,GAAG,CAEjF,MAAO,AAAC,CAAA,AADK,EAAM,EAAE,CAAG,EAAM,GAAG,CAAG,EAAM,GAAG,CAAG,EAAM,GAAG,CAAG,EAAM,GAAG,CAAG,EAAM,GAAG,CAClE,CAAA,EAAQ,CAC3B,GAEC,GAAI,AAAY,SAAZ,EACL,OAAO,EAAQ,IAAI,CAAC,CAAC,CAAC,EAAU,EAAI,CAAE,CAAC,EAAU,EAAI,GAG1C,AAAC,CAAA,AAFM,EACA,EACU,GAAK,CAAA,CAAA,AAFf,EACA,CACuB,CAAY,EAAK,EAG9D,OAAM,AAAI,MAAM,kBACpB,CACJ,CACA,MAAM,UAA4B,EAC9B,UAAW,CACP,OAAO,eACX,CACA,mBAAoB,CAChB,IAAM,EAAU,EAAE,CAClB,IAAK,IAAI,KAAM,gBACX,EAAQ,IAAI,CAAC,CAAC,UAAW,EAAG,EAEhC,OAAO,CACX,CACA,gBAAiB,CACb,OAAO,IAAI,CAAC,iBAAiB,EACjC,CACA,OAAO,CAAG,CAAE,CAAO,CAAE,CACjB,GAAI,CAAC,GAED,AAAW,YAAX,CAAG,CAAC,EAAE,CADN,MAAO,CAAA,EAGX,IAAM,EAAU,MAAM,gBAAiB,CAAG,CAAC,EAAE,EAC7C,IAAK,GAAM,CAAC,EAAY,EAAM,GAAI,EAC9B,GACS,YADD,GAEI,CAAC,EAAW,MAAM,cAAe,GAAQ,EAAQ,IAAI,EACrD,MAAO,CAAA,EAIvB,MAAO,CAAA,CACX,CACA,KAAK,CAAO,CAAE,CAAO,CAAE,CAAW,CAAE,CAChC,MAAM,AAAI,MAAM,kBACpB,CACJ,CACA,MAAM,UAAyB,EAC3B,UAAW,CACP,OAAO,WACX,CACA,mBAAoB,CAChB,IAAI,EAAU,EAAE,CAEhB,IAAK,IAAI,KADT,EAAQ,IAAI,CAAC,CAAC,SAAU,QAAQ,EACjB,YACX,EAAQ,IAAI,CAAC,CAAC,OAAQ,EAAG,EAE7B,OAAO,CACX,CACA,gBAAiB,CACb,OAAO,IAAI,CAAC,iBAAiB,EACjC,CACA,OAAO,CAAG,CAAE,CAAO,CAAE,CACjB,MAAM,AAAI,MAAM,iBACpB,CACA,KAAK,CAAO,CAAE,CAAO,CAAE,CAAW,CAAE,CAChC,MAAM,AAAI,MAAM,kBACpB,CACJ,CACA,MAAM,UAAyB,EAC3B,aAAc,CACV,KAAK,IAAI,WACT,IAAI,CAAC,OAAO,CAAG,CAAC,WAAY,GAAG,AACnC,CACA,UAAW,CACP,OAAO,aACX,CACA,mBAAoB,CAChB,IAAI,EAAU,EAAE,CAEhB,IAAK,IAAI,KADT,EAAQ,IAAI,CAAC,CAAC,SAAU,QAAQ,EACjB,cACX,EAAQ,IAAI,CAAC,CAAC,OAAQ,EAAG,EAE7B,OAAO,CACX,CACA,gBAAiB,CACb,OAAO,IAAI,CAAC,iBAAiB,EACjC,CACA,OAAO,CAAG,CAAE,CAAO,CAAE,CACjB,GAAI,CAAC,GAED,AAAW,SAAX,CAAG,CAAC,EAAE,CADN,MAAO,CAAA,EAGX,IAAM,EAAO,MAAM,cAAe,CAAG,CAAC,EAAE,EACxC,IAAK,GAAM,CAAC,EAAY,EAAM,GAAI,EAC9B,OAAQ,GACJ,IAAK,OACD,GAAI,EAAK,IAAI,GAAK,EACd,MAAO,CAAA,EACX,KACJ,KAAK,WACD,GAAI,EAAK,QAAQ,GAAK,EAClB,MAAO,CAAA,EACX,KACJ,KAAK,UACD,GAAI,CAAC,SAAS,EAAO,EAAK,EAAE,EACxB,MAAO,CAAA,CAEnB,CAEJ,MAAO,CAAA,CACX,CACA,KAAK,CAAO,CAAE,CAAO,CAAE,CAAW,CAAE,CAChC,IAAM,EAAY,EAAc,GAAK,EACrC,OAAQ,GACJ,IAAK,QACD,IAAI,EAAa,CACb,OAAQ,IACR,YAAa,IACb,OAAQ,IACR,UAAW,IACX,YAAa,GACb,UAAW,IACX,QAAS,IACT,SAAU,IACV,YAAa,IACb,MAAO,IACP,SAAU,IACV,QAAS,IACT,SAAU,IACV,UAAW,IACX,UAAW,IACX,UAAW,IACX,MAAO,IACP,UAAW,IACX,OAAQ,GACR,WAAY,KACZ,QAAS,KACT,WAAY,KACZ,YAAa,KACb,WAAY,KACZ,UAAW,KACX,UAAW,KACX,SAAU,KACV,UAAW,KACX,QAAS,KACT,UAAW,KACX,WAAY,IAChB,EACA,OAAO,EAAQ,IAAI,CAAC,CAAC,CAAC,EAAU,EAAI,CAAE,CAAC,EAAU,EAAI,IACjD,IAAI,EAAQ,MAAM,cAAe,GAC7B,EAAQ,MAAM,cAAe,GAC7B,EAAO,EAAM,SAAS,EACtB,CAAU,CAAC,EAAI,EACd,CAAA,AAAmB,WAAnB,EAAM,QAAQ,CAAgB,GAAK,IAAA,EAIxC,MAAO,AAAC,CAAA,AAHG,CAAA,EAAM,SAAS,EACtB,CAAU,CAAC,EAAI,EACd,CAAA,AAAmB,WAAnB,EAAM,QAAQ,CAAgB,GAAK,IAAA,CAAG,EAC5B,CAAA,EAAQ,CAC3B,EACJ,KAAK,WACD,OAAO,EAAQ,IAAI,CAAC,CAAC,CAAC,EAAU,EAAI,CAAE,CAAC,EAAU,EAAI,IACjD,IAAI,EAAY,MAAM,cAAe,GAAK,QAAQ,EAAI,EAClD,EAAY,MAAM,cAAe,GAAK,QAAQ,EAAI,EAKtD,MAJI,AAAc,CAAA,IAAd,GACA,CAAA,EAAY,GADhB,EAEI,AAAc,CAAA,IAAd,GACA,CAAA,EAAY,GADhB,EAEO,AAAC,CAAA,EAAY,CAAA,EAAa,CACrC,EACJ,KAAK,KACD,OAAO,EAAQ,IAAI,CAAC,CAAC,CAAC,EAAU,EAAI,CAAE,CAAC,EAAU,EAAI,IACjD,IAAI,EAAM,MAAM,cAAe,GAAK,EAAE,EAAI,EAE1C,MAAO,AAAC,CAAA,AADE,CAAA,MAAM,cAAe,GAAK,EAAE,EAAI,CAAA,EAC5B,CAAA,EAAO,CACzB,EACJ,KAAK,OACD,OAAO,EAAQ,IAAI,CAAC,CAAC,CAAC,EAAU,EAAI,CAAE,CAAC,EAAU,EAAI,GAG1C,AAAC,CAAA,AAFM,EACA,EACU,GAAK,CAAA,CAAA,AAFf,EACA,CACuB,CAAY,EAAK,EAElE,CACA,MAAM,AAAI,MAAM,kBACpB,CACJ,CACA,MAAM,UAA6B,EAC/B,UAAW,CACP,MAAO,CAAE,SAAU,EAAG,QAAS,EAAG,OAAQ,CAAE,CAChD,CACA,mBAAoB,CAChB,MAAO,CACH,CAAC,WAAY,WAAW,CACxB,CAAC,WAAY,UAAU,CACvB,CAAC,WAAY,SAAS,CACzB,AACL,CACA,gBAAiB,CACb,OAAO,IAAI,CAAC,iBAAiB,EACjC,CACA,OAAO,CAAG,CAAE,CAAO,CAAE,CACjB,MAAM,AAAI,MAAM,iBACpB,CACA,KAAK,CAAO,CAAE,CAAO,CAAE,CAAW,CAAE,CAChC,MAAM,AAAI,MAAM,kBACpB,CACJ,CACA,MAAM,UAAyB,EAC3B,UAAW,CACP,OAAO,eACX,CACA,mBAAoB,CAChB,IAAM,EAAU,EAAE,CAClB,IAAK,IAAI,KAAM,gBACX,EAAQ,IAAI,CAAC,CAAC,OAAQ,EAAG,EAE7B,OAAO,CACX,CACA,gBAAiB,CACb,OAAO,IAAI,CAAC,iBAAiB,EACjC,CACA,OAAO,CAAG,CAAE,CAAO,CAAE,CACjB,MAAM,AAAI,MAAM,iBACpB,CACA,KAAK,CAAO,CAAE,CAAO,CAAE,CAAW,CAAE,CAChC,MAAM,AAAI,MAAM,kBACpB,CACJ,CACA,OAAO,SAAS,CAAG,C","sources":["<anon>","js/search.js","js/battle-dex-search.js"],"sourcesContent":["\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequire6a64\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"eRrRo\", function(module, exports) {\n/**\n * Search\n *\n * Basically just an improved version of utilichart\n *\n * Dependencies: jQuery, battledata, search-index\n * Optional dependencies: pokedex, moves, items, abilities\n *\n * @author Guangcong Luo <guangcongluo@gmail.com>\n */ \nvar $6KOho = parcelRequire(\"6KOho\");\nparcelRequire(\"hDfjk\");\n(function(exports, $) {\n    'use strict';\n    function Search(elem, viewport) {\n        this.$el = $(elem);\n        this.el = this.$el[0];\n        this.$viewport = viewport ? $(viewport) : $(window);\n        this.urlRoot = '';\n        this.q = undefined; // uninitialized\n        this.exactMatch = false;\n        this.resultSet = null;\n        this.filters = null;\n        this.sortCol = null;\n        this.renderedIndex = 0;\n        this.renderingDone = true;\n        this.externalFilter = false;\n        this.cur = {};\n        this.$inputEl = null;\n        this.gen = 9;\n        this.mod = null;\n        this.engine = new DexSearch();\n        window.search = this;\n        var self = this;\n        this.$el.on('click', '.more button', function(e) {\n            e.preventDefault();\n            self.updateScroll(true);\n        });\n        this.$el.on('click', '.filter', function(e) {\n            e.preventDefault();\n            self.removeFilter(e);\n            if (self.$inputEl) self.$inputEl.focus();\n        });\n        this.$el.on('click', '.sortcol', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            var sortCol = e.currentTarget.dataset.sort;\n            self.engine.toggleSort(sortCol);\n            self.sortCol = self.engine.sortCol;\n            self.find('');\n        });\n    }\n    Search.prototype.$ = function(query) {\n        return this.$el.find(query);\n    };\n    //\n    // Search functions\n    //\n    Search.prototype.find = function(query, firstElem) {\n        if (!this.engine.find(query)) return; // nothing changed\n        this.exactMatch = this.engine.exactMatch;\n        this.q = this.engine.query;\n        this.resultSet = this.engine.results;\n        if (firstElem) {\n            this.resultSet = [\n                [\n                    this.engine.typedSearch.searchType,\n                    firstElem\n                ]\n            ].concat(this.resultSet);\n            if (this.resultSet.length > 1 && [\n                'sortpokemon',\n                'sortmove'\n            ].includes(this.resultSet[1][0])) {\n                var sortRow = this.resultSet[1];\n                this.resultSet[1] = this.resultSet[0];\n                this.resultSet[0] = sortRow;\n            }\n        }\n        if (this.filters) this.resultSet = [\n            [\n                'html',\n                this.getFilterText()\n            ]\n        ].concat(this.resultSet);\n        this.renderedIndex = 0;\n        this.renderingDone = false;\n        this.updateScroll();\n        return true;\n    };\n    Search.prototype.addFilter = function(node) {\n        if (!node.dataset.entry) return false;\n        var entry = node.dataset.entry.split('|');\n        var result = this.engine.addFilter(entry);\n        this.filters = this.engine.filters;\n        return result;\n    };\n    Search.prototype.removeFilter = function(e) {\n        var result;\n        if (e) result = this.engine.removeFilter(e.currentTarget.value.split(':'));\n        else result = this.engine.removeFilter();\n        this.filters = this.engine.filters;\n        this.find('');\n        return result;\n    };\n    Search.prototype.getFilterText = function(q) {\n        var buf = '<p>Filters: ';\n        for(var i = 0; i < this.filters.length; i++){\n            var text = this.filters[i][1];\n            if (this.filters[i][0] === 'move') text = getID(BattleMovedex, text).name;\n            if (this.filters[i][0] === 'pokemon') text = getID(BattlePokedex, text).name;\n            buf += '<button class=\"filter\" value=\"' + escapeHTML(this.filters[i].join(':')) + '\">' + text + ' <i class=\"fa fa-times-circle\"></i></button> ';\n        }\n        if (!q) buf += '<small style=\"color: #888\">(backspace = delete filter)</small>';\n        return buf + '</p>';\n    };\n    Search.prototype.updateScroll = function(forceAdd) {\n        if (this.renderingDone) return;\n        var top = this.$viewport.scrollTop();\n        var bottom = top + this.$viewport.height();\n        var windowHeight = $(window).height();\n        var i = this.renderedIndex;\n        var finalIndex = Math.floor(bottom / 33) + 1;\n        if (!forceAdd && finalIndex <= i) return;\n        if (finalIndex < i + 20) finalIndex = i + 20;\n        if (bottom - top > windowHeight && !i) finalIndex = 20;\n        if (forceAdd && finalIndex > i + 40) finalIndex = i + 40;\n        var resultSet = this.resultSet;\n        var buf = '';\n        while(i < finalIndex){\n            if (!resultSet[i]) {\n                this.renderingDone = true;\n                break;\n            }\n            var row = resultSet[i];\n            var errorMessage = '';\n            var label;\n            if (label = this.engine.filterLabel(row[0])) errorMessage = '<span class=\"col filtercol\"><em>' + label + '</em></span>';\n            else if (label = this.engine.illegalLabel(row[1])) errorMessage = '<span class=\"col illegalcol\"><em>' + label + '</em></span>';\n            var mStart = 0;\n            var mEnd = 0;\n            if (row.length > 3) {\n                mStart = row[2];\n                mEnd = row[3];\n            }\n            buf += this.renderRow(row[1], row[0], mStart, mEnd, errorMessage, row[1] in this.cur ? ' class=\"cur\"' : '');\n            i++;\n        }\n        if (!this.renderedIndex) {\n            this.el.innerHTML = '<ul class=\"utilichart\" style=\"height:' + resultSet.length * 33 + 'px\">' + buf + (!this.renderingDone ? '<li class=\"result more\"><p><button class=\"button big\">More</button></p></li>' : '') + '</ul>';\n            this.moreVisible = true;\n        } else {\n            if (this.moreVisible) {\n                this.$el.find('.more').remove();\n                if (!forceAdd) this.moreVisible = false;\n            }\n            $(this.el.firstChild).append(buf + (forceAdd && !this.renderingDone ? '<li class=\"result more\"><p><button class=\"button big\">More</button></p></li>' : ''));\n        }\n        this.renderedIndex = i;\n    };\n    Search.prototype.setType = function(qType, format, set, cur) {\n        this.engine.setType(qType, format, set);\n        this.filters = this.engine.filters;\n        this.sortCol = this.engine.sortCol;\n        this.cur = cur || {};\n        var firstElem;\n        for(var id in cur){\n            firstElem = id;\n            break;\n        }\n        this.find('', firstElem);\n    };\n    /*********************************************************\n\t * Rendering functions\n\t *********************************************************/ // These all have static versions\n    Search.prototype.renderRow = function(id, type, matchStart, matchLength, errorMessage, attrs) {\n        // errorMessage = '<span class=\"col illegalcol\"><em>' + errorMessage + '</em></span>';\n        switch(type){\n            case 'html':\n                return '<li class=\"result\">' + id + '</li>';\n            case 'header':\n                return '<li class=\"result\"><h3>' + id + '</h3></li>';\n            case 'sortpokemon':\n                return this.renderPokemonSortRow();\n            case 'sortmove':\n                return this.renderMoveSortRow();\n            case 'pokemon':\n                var pokemon = getID(BattlePokedex, id);\n                return this.renderPokemonRow(pokemon, matchStart, matchLength, errorMessage, attrs);\n            case 'move':\n                var move = getID(BattleMovedex, id);\n                return this.renderMoveRow(move, matchStart, matchLength, errorMessage, attrs);\n            case 'item':\n                var item = getID(BattleItems, id);\n                return this.renderItemRow(item, matchStart, matchLength, errorMessage, attrs);\n            case 'ability':\n                var ability = getID(BattleAbilities, id);\n                return this.renderAbilityRow(ability, matchStart, matchLength, errorMessage, attrs);\n            case 'type':\n                var type = {\n                    name: id[0].toUpperCase() + id.substr(1)\n                };\n                return this.renderTypeRow(type, matchStart, matchLength, errorMessage);\n            case 'egggroup':\n                // very hardcode\n                var egName;\n                if (id === 'humanlike') egName = 'Human-Like';\n                else if (id === 'water1') egName = 'Water 1';\n                else if (id === 'water2') egName = 'Water 2';\n                else if (id === 'water3') egName = 'Water 3';\n                if (egName) {\n                    if (matchLength > 5) matchLength++;\n                } else egName = id[0].toUpperCase() + id.substr(1);\n                var egggroup = {\n                    name: egName\n                };\n                return this.renderEggGroupRow(egggroup, matchStart, matchLength, errorMessage);\n            case 'tier':\n                // very hardcode\n                var tierTable = {\n                    uber: \"Uber\",\n                    ou: \"OU\",\n                    uu: \"UU\",\n                    ru: \"RU\",\n                    nu: \"NU\",\n                    pu: \"PU\",\n                    zu: \"(PU)\",\n                    nfe: \"NFE\",\n                    lc: \"LC\",\n                    cap: \"CAP\",\n                    caplc: \"CAP LC\",\n                    capnfe: \"CAP NFE\",\n                    uubl: \"UUBL\",\n                    rubl: \"RUBL\",\n                    nubl: \"NUBL\",\n                    publ: \"PUBL\"\n                };\n                var tier = {\n                    name: tierTable[id]\n                };\n                return this.renderTierRow(tier, matchStart, matchLength, errorMessage);\n            case 'category':\n                var category = {\n                    name: id[0].toUpperCase() + id.substr(1),\n                    id: id\n                };\n                return this.renderCategoryRow(category, matchStart, matchLength, errorMessage);\n            case 'article':\n                var articleTitle = window.BattleArticleTitles && BattleArticleTitles[id] || id[0].toUpperCase() + id.substr(1);\n                var article = {\n                    name: articleTitle,\n                    id: id\n                };\n                return this.renderArticleRow(article, matchStart, matchLength, errorMessage);\n        }\n        return 'Error: not found';\n    };\n    Search.prototype.renderPokemonSortRow = function() {\n        var buf = '<li class=\"result\"><div class=\"sortrow\">';\n        buf += '<button class=\"sortcol numsortcol' + (!this.sortCol ? ' cur' : '') + '\">' + (!this.sortCol ? 'Sort: ' : this.engine.firstPokemonColumn) + '</button>';\n        buf += '<button class=\"sortcol pnamesortcol' + (this.sortCol === 'name' ? ' cur' : '') + '\" data-sort=\"name\">Name</button>';\n        buf += '<button class=\"sortcol typesortcol' + (this.sortCol === 'type' ? ' cur' : '') + '\" data-sort=\"type\">Types</button>';\n        buf += '<button class=\"sortcol abilitysortcol' + (this.sortCol === 'ability' ? ' cur' : '') + '\" data-sort=\"ability\">Abilities</button>';\n        buf += '<button class=\"sortcol statsortcol' + (this.sortCol === 'hp' ? ' cur' : '') + '\" data-sort=\"hp\">HP</button>';\n        buf += '<button class=\"sortcol statsortcol' + (this.sortCol === 'atk' ? ' cur' : '') + '\" data-sort=\"atk\">Atk</button>';\n        buf += '<button class=\"sortcol statsortcol' + (this.sortCol === 'def' ? ' cur' : '') + '\" data-sort=\"def\">Def</button>';\n        buf += '<button class=\"sortcol statsortcol' + (this.sortCol === 'spa' ? ' cur' : '') + '\" data-sort=\"spa\">SpA</button>';\n        buf += '<button class=\"sortcol statsortcol' + (this.sortCol === 'spd' ? ' cur' : '') + '\" data-sort=\"spd\">SpD</button>';\n        buf += '<button class=\"sortcol statsortcol' + (this.sortCol === 'spe' ? ' cur' : '') + '\" data-sort=\"spe\">Spe</button>';\n        buf += '<button class=\"sortcol statsortcol' + (this.sortCol === 'bst' ? ' cur' : '') + '\" data-sort=\"bst\">BST</button>';\n        buf += '</div></li>';\n        return buf;\n    };\n    Search.prototype.renderMoveSortRow = function() {\n        var buf = '<li class=\"result\"><div class=\"sortrow\">';\n        buf += '<button class=\"sortcol movenamesortcol' + (this.sortCol === 'name' ? ' cur' : '') + '\" data-sort=\"name\">Name</button>';\n        buf += '<button class=\"sortcol movetypesortcol' + (this.sortCol === 'type' ? ' cur' : '') + '\" data-sort=\"type\">Type</button>';\n        buf += '<button class=\"sortcol movetypesortcol' + (this.sortCol === 'category' ? ' cur' : '') + '\" data-sort=\"category\">Cat</button>';\n        buf += '<button class=\"sortcol powersortcol' + (this.sortCol === 'power' ? ' cur' : '') + '\" data-sort=\"power\">Pow</button>';\n        buf += '<button class=\"sortcol accuracysortcol' + (this.sortCol === 'accuracy' ? ' cur' : '') + '\" data-sort=\"accuracy\">Acc</button>';\n        buf += '<button class=\"sortcol ppsortcol' + (this.sortCol === 'pp' ? ' cur' : '') + '\" data-sort=\"pp\">PP</button>';\n        buf += '</div></li>';\n        return buf;\n    };\n    Search.prototype.renderPokemonRow = function(pokemon, matchStart, matchLength, errorMessage, attrs) {\n        if (!attrs) attrs = '';\n        if (!pokemon) return '<li class=\"result\">Unrecognized pokemon</li>';\n        var id = toID(pokemon.name);\n        if (Search.urlRoot) attrs += ' href=\"' + Search.urlRoot + 'pokemon/' + id + '\" data-target=\"push\"';\n        var buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"pokemon|' + escapeHTML(pokemon.name) + '\">';\n        // Dex number with suffix for forms (A, B, C...), shown as 6-A, 10-B, etc. Base shows plain number.\n        var numDisplay = pokemon.num;\n        if (pokemon.forme && pokemon.name !== pokemon.baseSpecies && window.BattleFormOrder) {\n            var baseId = toID(pokemon.baseSpecies || pokemon.name);\n            var order = window.BattleFormOrder[baseId];\n            if (order) {\n                var idx = order.indexOf(pokemon.id);\n                if (idx >= 0) {\n                    var letter = String.fromCharCode(65 + idx);\n                    numDisplay = pokemon.num + '-' + letter;\n                }\n            }\n        }\n        buf += '<span class=\"col numcol\">' + numDisplay + \"</span> \";\n        // icon\n        buf += '<span class=\"col iconcol\">';\n        buf += '<span style=\"' + getPokemonIcon(pokemon.name) + '\"></span>';\n        buf += '</span> ';\n        // name\n        var name = pokemon.name;\n        var tagStart = pokemon.forme ? name.length - pokemon.forme.length - 1 : 0;\n        if (tagStart) name = name.substr(0, tagStart);\n        if (matchLength) name = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n        if (tagStart) {\n            if (matchLength && matchStart + matchLength > tagStart) {\n                if (matchStart < tagStart) {\n                    matchLength -= tagStart - matchStart;\n                    matchStart = tagStart;\n                }\n                name += '<small>' + pokemon.name.substr(tagStart, matchStart - tagStart) + '<b>' + pokemon.name.substr(matchStart, matchLength) + '</b>' + pokemon.name.substr(matchStart + matchLength) + '</small>';\n            } else name += '<small>' + pokemon.name.substr(tagStart) + '</small>';\n        }\n        buf += '<span class=\"col pokemonnamecol\">' + name + '</span> ';\n        // error\n        if (errorMessage) {\n            buf += errorMessage + '</a></li>';\n            return buf;\n        }\n        // type\n        buf += '<span class=\"col typecol\">';\n        var types = pokemon.types;\n        for(var i = 0; i < types.length; i++)buf += getTypeIcon(types[i]);\n        buf += '</span> ';\n        var abilities = pokemon.abilities;\n        if (abilities['1']) buf += '<span class=\"col twoabilitycol\">' + abilities['0'] + '<br />' + abilities['1'] + '</span>';\n        else buf += '<span class=\"col abilitycol\">' + abilities['0'] + '</span>';\n        if (abilities['S']) {\n            if (abilities['H']) buf += '<span class=\"col twoabilitycol\">' + (abilities['H'] || '') + '<br />(' + abilities['S'] + ')</span>';\n            else buf += '<span class=\"col abilitycol\">(' + abilities['S'] + ')</span>';\n        } else if (abilities['H']) buf += '<span class=\"col abilitycol\">' + abilities['H'] + '</span>';\n        else buf += '<span class=\"col abilitycol\"></span>';\n        // base stats\n        var stats = pokemon.baseStats;\n        buf += '<span class=\"col statcol\"><em>HP</em><br />' + stats.hp + '</span> ';\n        buf += '<span class=\"col statcol\"><em>Atk</em><br />' + stats.atk + '</span> ';\n        buf += '<span class=\"col statcol\"><em>Def</em><br />' + stats.def + '</span> ';\n        buf += '<span class=\"col statcol\"><em>SpA</em><br />' + stats.spa + '</span> ';\n        buf += '<span class=\"col statcol\"><em>SpD</em><br />' + stats.spd + '</span> ';\n        buf += '<span class=\"col statcol\"><em>Spe</em><br />' + stats.spe + '</span> ';\n        var bst = 0;\n        for(i in stats)bst += stats[i];\n        buf += '<span class=\"col bstcol\"><em>BST<br />' + bst + '</em></span> ';\n        buf += '</a></li>';\n        return buf;\n    };\n    Search.prototype.renderTaggedPokemonRowInner = function(pokemon, tag, errorMessage) {\n        var attrs = '';\n        if (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'pokemon/' + toID(pokemon.name) + '\" data-target=\"push\"';\n        var buf = '<a' + attrs + ' data-entry=\"pokemon|' + escapeHTML(pokemon.name) + '\">';\n        // tag\n        buf += '<span class=\"col tagcol shorttagcol\">' + tag + '</span> ';\n        // icon\n        buf += '<span class=\"col iconcol\">';\n        buf += '<span style=\"' + getPokemonIcon(pokemon.name) + '\"></span>';\n        buf += '</span> ';\n        // name\n        var name = pokemon.name;\n        var tagStart = pokemon.forme ? name.length - pokemon.forme.length - 1 : 0;\n        if (tagStart) name = name.substr(0, tagStart) + '<small>' + pokemon.name.substr(tagStart) + '</small>';\n        buf += '<span class=\"col shortpokemonnamecol\">' + name + '</span> ';\n        // error\n        if (errorMessage) {\n            buf += errorMessage + '</a></li>';\n            return buf;\n        }\n        // type\n        buf += '<span class=\"col typecol\">';\n        for(var i = 0; i < pokemon.types.length; i++)buf += getTypeIcon(pokemon.types[i]);\n        buf += '</span> ';\n        // abilities\n        buf += '<span style=\"float:left;min-height:26px\">';\n        if (pokemon.abilities['1']) buf += '<span class=\"col twoabilitycol\">';\n        else buf += '<span class=\"col abilitycol\">';\n        for(var i in pokemon.abilities){\n            var ability = pokemon.abilities[i];\n            if (!ability) continue;\n            if (i === '1') buf += '<br />';\n            if (i === 'H') ability = '</span><span class=\"col abilitycol\"><em>' + pokemon.abilities[i] + '</em>';\n            buf += ability;\n        }\n        if (!pokemon.abilities['H']) buf += '</span><span class=\"col abilitycol\">';\n        buf += '</span>';\n        buf += '</span>';\n        // base stats\n        buf += '<span style=\"float:left;min-height:26px\">';\n        buf += '<span class=\"col statcol\"><em>HP</em><br />' + pokemon.baseStats.hp + '</span> ';\n        buf += '<span class=\"col statcol\"><em>Atk</em><br />' + pokemon.baseStats.atk + '</span> ';\n        buf += '<span class=\"col statcol\"><em>Def</em><br />' + pokemon.baseStats.def + '</span> ';\n        buf += '<span class=\"col statcol\"><em>SpA</em><br />' + pokemon.baseStats.spa + '</span> ';\n        buf += '<span class=\"col statcol\"><em>SpD</em><br />' + pokemon.baseStats.spd + '</span> ';\n        buf += '<span class=\"col statcol\"><em>Spe</em><br />' + pokemon.baseStats.spe + '</span> ';\n        var bst = 0;\n        for(i in pokemon.baseStats)bst += pokemon.baseStats[i];\n        buf += '<span class=\"col bstcol\"><em>BST<br />' + bst + '</em></span> ';\n        buf += '</span>';\n        buf += '</a>';\n        return buf;\n    };\n    Search.prototype.renderItemRow = function(item, matchStart, matchLength, errorMessage, attrs) {\n        if (!attrs) attrs = '';\n        if (!item) return '<li class=\"result\">Unrecognized item</li>';\n        var id = toID(item.name);\n        if (Search.urlRoot) attrs += ' href=\"' + Search.urlRoot + 'items/' + id + '\" data-target=\"push\"';\n        var buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"item|' + escapeHTML(item.name) + '\">';\n        // icon\n        buf += '<span class=\"col itemiconcol\">';\n        buf += '<span style=\"' + getItemIcon(item) + '\"></span>';\n        buf += '</span> ';\n        // name\n        var name = item.name;\n        if (matchLength) name = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n        buf += '<span class=\"col namecol\">' + name + '</span> ';\n        // error\n        if (errorMessage) {\n            buf += errorMessage + '</a></li>';\n            return buf;\n        }\n        // desc\n        buf += '<span class=\"col itemdesccol\">' + escapeHTML(item.shortDesc || item.desc) + '</span> ';\n        buf += '</a></li>';\n        return buf;\n    };\n    Search.prototype.renderAbilityRow = function(ability, matchStart, matchLength, errorMessage, attrs) {\n        if (!attrs) attrs = '';\n        if (!ability) return '<li class=\"result\">Unrecognized ability</li>';\n        var id = toID(ability.name);\n        if (Search.urlRoot) attrs += ' href=\"' + Search.urlRoot + 'abilities/' + id + '\" data-target=\"push\"';\n        var buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"ability|' + escapeHTML(ability.name) + '\">';\n        // name\n        var name = ability.name;\n        if (matchLength) name = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n        buf += '<span class=\"col namecol\">' + name + '</span> ';\n        // error\n        if (errorMessage) {\n            buf += errorMessage + '</a></li>';\n            return buf;\n        }\n        buf += '<span class=\"col abilitydesccol\">' + escapeHTML(ability.shortDesc || ability.desc) + '</span> ';\n        buf += '</a></li>';\n        return buf;\n    };\n    Search.prototype.renderMoveRow = function(move, matchStart, matchLength, errorMessage, attrs) {\n        if (!attrs) attrs = '';\n        if (!move) return '<li class=\"result\">Unrecognized move</li>';\n        var id = toID(move.name);\n        if (Search.urlRoot) attrs += ' href=\"' + Search.urlRoot + 'moves/' + id + '\" data-target=\"push\"';\n        var buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"move|' + escapeHTML(move.name) + '\">';\n        // name\n        var name = move.name;\n        var tagStart = name.substr(0, 12) === 'Hidden Power' ? 12 : 0;\n        if (tagStart) name = name.substr(0, tagStart);\n        if (matchLength) name = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n        if (tagStart) {\n            if (matchLength && matchStart + matchLength > tagStart) {\n                if (matchStart < tagStart) {\n                    matchLength -= tagStart - matchStart;\n                    matchStart = tagStart;\n                }\n                name += '<small>' + move.name.substr(tagStart, matchStart - tagStart) + '<b>' + move.name.substr(matchStart, matchLength) + '</b>' + move.name.substr(matchStart + matchLength) + '</small>';\n            } else name += '<small>' + move.name.substr(tagStart) + '</small>';\n        }\n        buf += '<span class=\"col movenamecol\">' + name + '</span> ';\n        // error\n        if (errorMessage) {\n            buf += errorMessage + '</a></li>';\n            return buf;\n        }\n        // type\n        buf += '<span class=\"col typecol\">';\n        buf += getTypeIcon(move.type);\n        buf += getCategoryIcon(move.category);\n        buf += '</span> ';\n        // power, accuracy, pp\n        var pp = move.pp === 1 || move.noPPBoosts ? move.pp : move.pp * 8 / 5;\n        buf += '<span class=\"col labelcol\">' + (move.category !== 'Status' ? '<em>Power</em><br />' + (move.basePower || '&mdash;') : '') + '</span> ';\n        buf += '<span class=\"col widelabelcol\"><em>Accuracy</em><br />' + (move.accuracy && move.accuracy !== true ? move.accuracy + '%' : '&mdash;') + '</span> ';\n        buf += '<span class=\"col pplabelcol\"><em>PP</em><br />' + pp + '</span> ';\n        // desc\n        buf += '<span class=\"col movedesccol\">' + escapeHTML(move.shortDesc || move.desc) + '</span> ';\n        buf += '</a></li>';\n        return buf;\n    };\n    Search.prototype.renderMoveRowInner = function(move, errorMessage) {\n        var attrs = '';\n        if (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'moves/' + toID(move.name) + '\" data-target=\"push\"';\n        var buf = '<a' + attrs + ' data-entry=\"move|' + escapeHTML(move.name) + '\">';\n        // name\n        var name = move.name;\n        var tagStart = name.substr(0, 12) === 'Hidden Power' ? 12 : 0;\n        if (tagStart) name = name.substr(0, tagStart) + '<small>' + move.name.substr(tagStart) + '</small>';\n        buf += '<span class=\"col movenamecol\">' + name + '</span> ';\n        // error\n        if (errorMessage) {\n            buf += errorMessage + '</a></li>';\n            return buf;\n        }\n        // type\n        buf += '<span class=\"col typecol\">';\n        buf += getTypeIcon(move.type);\n        buf += getCategoryIcon(move.category);\n        buf += '</span> ';\n        // power, accuracy, pp\n        var pp = move.pp === 1 || move.noPPBoosts ? move.pp : move.pp * 8 / 5;\n        buf += '<span class=\"col labelcol\">' + (move.category !== 'Status' ? '<em>Power</em><br />' + (move.basePower || '&mdash;') : '') + '</span> ';\n        buf += '<span class=\"col widelabelcol\"><em>Accuracy</em><br />' + (move.accuracy && move.accuracy !== true ? move.accuracy + '%' : '&mdash;') + '</span> ';\n        buf += '<span class=\"col pplabelcol\"><em>PP</em><br />' + pp + '</span> ';\n        // desc\n        buf += '<span class=\"col movedesccol\">' + escapeHTML(move.shortDesc || move.desc) + '</span> ';\n        buf += '</a>';\n        return buf;\n    };\n    Search.prototype.renderTaggedMoveRow = function(move, tag, errorMessage) {\n        var attrs = '';\n        if (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'moves/' + toID(move.name) + '\" data-target=\"push\"';\n        var buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"move|' + escapeHTML(move.name) + '\">';\n        // tag\n        buf += '<span class=\"col tagcol\">' + tag + '</span> ';\n        // name\n        var name = move.name;\n        if (name.substr(0, 12) === 'Hidden Power') name = 'Hidden Power';\n        buf += '<span class=\"col shortmovenamecol\">' + name + '</span> ';\n        // error\n        if (errorMessage) {\n            buf += errorMessage + '</a></li>';\n            return buf;\n        }\n        // type\n        buf += '<span class=\"col typecol\">';\n        buf += getTypeIcon(move.type);\n        buf += getCategoryIcon(move.category);\n        buf += '</span> ';\n        // power, accuracy, pp\n        buf += '<span class=\"col labelcol\">' + (move.category !== 'Status' ? '<em>Power</em><br />' + (move.basePower || '&mdash;') : '') + '</span> ';\n        buf += '<span class=\"col widelabelcol\"><em>Accuracy</em><br />' + (move.accuracy && move.accuracy !== true ? move.accuracy + '%' : '&mdash;') + '</span> ';\n        buf += '<span class=\"col pplabelcol\"><em>PP</em><br />' + (move.noPPBoosts ? move.pp : move.pp * 8 / 5) + '</span> ';\n        // desc\n        buf += '<span class=\"col movedesccol\">' + escapeHTML(move.shortDesc || move.desc) + '</span> ';\n        buf += '</a></li>';\n        return buf;\n    };\n    Search.prototype.renderTypeRow = function(type, matchStart, matchLength, errorMessage) {\n        var attrs = '';\n        if (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'types/' + toID(type.name) + '\" data-target=\"push\"';\n        var buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"type|' + escapeHTML(type.name) + '\">';\n        // name\n        var name = type.name;\n        if (matchLength) name = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n        buf += '<span class=\"col namecol\">' + name + '</span> ';\n        // type\n        buf += '<span class=\"col typecol\">';\n        buf += getTypeIcon(type.name);\n        buf += '</span> ';\n        // error\n        if (errorMessage) {\n            buf += errorMessage + '</a></li>';\n            return buf;\n        }\n        buf += '</a></li>';\n        return buf;\n    };\n    Search.prototype.renderCategoryRow = function(category, matchStart, matchLength, errorMessage) {\n        var attrs = '';\n        if (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'categories/' + category.id + '\" data-target=\"push\"';\n        var buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"category|' + escapeHTML(category.name) + '\">';\n        // name\n        var name = category.name;\n        if (matchLength) name = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n        buf += '<span class=\"col namecol\">' + name + '</span> ';\n        // category\n        buf += '<span class=\"col typecol\">' + getCategoryIcon(category.name) + '</span> ';\n        // error\n        if (errorMessage) {\n            buf += errorMessage + '</a></li>';\n            return buf;\n        }\n        buf += '</a></li>';\n        return buf;\n    };\n    Search.prototype.renderArticleRow = function(article, matchStart, matchLength, errorMessage) {\n        var attrs = '';\n        if (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'articles/' + article.id + '\" data-target=\"push\"';\n        var isSearchType = article.id === 'pokemon' || article.id === 'moves';\n        if (isSearchType) attrs = ' href=\"' + article.id + '/\" data-target=\"replace\"';\n        var buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"article|' + escapeHTML(article.name) + '\">';\n        // name\n        var name = article.name;\n        if (matchLength) name = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n        buf += '<span class=\"col namecol\">' + name + '</span> ';\n        // article\n        if (isSearchType) buf += '<span class=\"col movedesccol\">(search type)</span> ';\n        else buf += '<span class=\"col movedesccol\">(article)</span> ';\n        // error\n        if (errorMessage) {\n            buf += errorMessage + '</a></li>';\n            return buf;\n        }\n        buf += '</a></li>';\n        return buf;\n    };\n    Search.prototype.renderEggGroupRow = function(egggroup, matchStart, matchLength, errorMessage) {\n        var attrs = '';\n        if (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'egggroups/' + toID(egggroup.name) + '\" data-target=\"push\"';\n        var buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"egggroup|' + escapeHTML(egggroup.name) + '\">';\n        // name\n        var name = egggroup.name;\n        if (matchLength) name = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n        buf += '<span class=\"col namecol\">' + name + '</span> ';\n        // error\n        if (errorMessage) {\n            buf += errorMessage + '</a></li>';\n            return buf;\n        }\n        buf += '</a></li>';\n        return buf;\n    };\n    Search.prototype.renderTierRow = function(tier, matchStart, matchLength, errorMessage) {\n        var attrs = '';\n        if (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'tiers/' + toID(tier.name) + '\" data-target=\"push\"';\n        var buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"tier|' + escapeHTML(tier.name) + '\">';\n        // name\n        var name = tier.name;\n        if (matchLength) name = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n        buf += '<span class=\"col namecol\">' + name + '</span> ';\n        // error\n        if (errorMessage) {\n            buf += errorMessage + '</a></li>';\n            return buf;\n        }\n        buf += '</a></li>';\n        return buf;\n    };\n    Search.gen = 9;\n    Search.renderRow = Search.prototype.renderRow;\n    Search.renderPokemonRow = Search.prototype.renderPokemonRow;\n    Search.renderTaggedPokemonRowInner = Search.prototype.renderTaggedPokemonRowInner;\n    Search.renderItemRow = Search.prototype.renderItemRow;\n    Search.renderAbilityRow = Search.prototype.renderAbilityRow;\n    Search.renderMoveRow = Search.prototype.renderMoveRow;\n    Search.renderMoveRowInner = Search.prototype.renderMoveRowInner;\n    Search.renderTaggedMoveRow = Search.prototype.renderTaggedMoveRow;\n    Search.renderTypeRow = Search.prototype.renderTypeRow;\n    Search.renderCategoryRow = Search.prototype.renderCategoryRow;\n    Search.renderEggGroupRow = Search.prototype.renderEggGroupRow;\n    Search.renderTierRow = Search.prototype.renderTierRow;\n    exports.BattleSearch = Search;\n})(window, (0, (/*@__PURE__*/$parcel$interopDefault($6KOho))));\n\n});\nparcelRegister(\"hDfjk\", function(module, exports) {\n/**\n * Search\n *\n * Code for searching for dex information\n *\n *\n * @author Guangcong Luo <guangcongluo@gmail.com>\n * @license MIT\n */ // Import data.js to ensure globals are available (BattlePokedex, etc.)\nparcelRequire(\"f0Akj\");\n/** ID, SearchType, index (if alias), offset (if offset alias) */ let $cd61f496984300fe$var$BattleSearchIndex = [];\nlet $cd61f496984300fe$var$BattleSearchIndexOffset;\nfunction $cd61f496984300fe$var$hasAbility(pokemon, ability) {\n    for(let key in pokemon.abilities){\n        if (toID(pokemon.abilities[key]) == toID(ability)) return true;\n    }\n    return false;\n}\nfunction $cd61f496984300fe$var$generateSearchIndex() {\n    let index = [];\n    index = index.concat(Object.keys(BattlePokedex).map((x)=>x + \" pokemon\"));\n    index = index.concat(Object.keys(BattleMovedex).map((x)=>x + \" move\"));\n    index = index.concat(Object.keys(BattleItems).map((x)=>x + \" item\"));\n    index = index.concat(Object.keys(BattleAbilities).map((x)=>x + \" ability\"));\n    index = index.concat(Object.keys(BattleTypeChart).map((x)=>toID(x) + \" type\"));\n    index = index.concat([\n        \"physical\",\n        \"special\",\n        \"status\"\n    ].map((x)=>toID(x) + \" category\"));\n    index = index.concat([\n        \"monster\",\n        \"water1\",\n        \"bug\",\n        \"flying\",\n        \"field\",\n        \"fairy\",\n        \"grass\",\n        \"humanlike\",\n        \"water3\",\n        \"mineral\",\n        \"amorphous\",\n        \"water2\",\n        \"ditto\",\n        \"dragon\",\n        \"undiscovered\"\n    ].map((x)=>toID(x) + \" egggroup\"));\n    index.sort();\n    // manually rearrange\n    index[index.indexOf(\"grass type\")] = \"grass egggroup\";\n    index[index.indexOf(\"grass egggroup\")] = \"grass type\";\n    index[index.indexOf(\"fairy type\")] = \"fairy egggroup\";\n    index[index.indexOf(\"fairy egggroup\")] = \"fairy type\";\n    index[index.indexOf(\"flying type\")] = \"flying egggroup\";\n    index[index.indexOf(\"flying egggroup\")] = \"flying type\";\n    index[index.indexOf(\"dragon type\")] = \"dragon egggroup\";\n    index[index.indexOf(\"dragon egggroup\")] = \"dragon type\";\n    index[index.indexOf(\"bug type\")] = \"bug egggroup\";\n    index[index.indexOf(\"bug egggroup\")] = \"bug type\";\n    index[index.indexOf(\"psychic type\")] = \"psychic move\";\n    index[index.indexOf(\"psychic move\")] = \"psychic type\";\n    if (getID(BattlePokedex, \"ditto\")) {\n        index[index.indexOf(\"ditto pokemon\")] = \"ditto egggroup\";\n        index[index.indexOf(\"ditto egggroup\")] = \"ditto pokemon\";\n    }\n    $cd61f496984300fe$var$BattleSearchIndex = index.map((x)=>{\n        let split = x.split(\" \");\n        if (split.length > 3) {\n            split[3] = Number(split[3]);\n            split[2] = index.indexOf(split[2] + \" \" + split[1]);\n        }\n        return split;\n    });\n    $cd61f496984300fe$var$BattleSearchIndexOffset = $cd61f496984300fe$var$BattleSearchIndex.map((entry, i)=>{\n        var _a, _b, _c, _d;\n        const id = entry[0];\n        let name = \"\";\n        switch(entry[1]){\n            case \"pokemon\":\n                name = (_a = getID(BattlePokedex, id).name) !== null && _a !== void 0 ? _a : \"\";\n                break;\n            case \"move\":\n                name = (_b = getID(BattleMovedex, id).name) !== null && _b !== void 0 ? _b : \"\";\n                break;\n            case \"item\":\n                name = (_c = getID(BattleItems, id).name) !== null && _c !== void 0 ? _c : \"\";\n                break;\n            case \"ability\":\n                name = (_d = getID(BattleAbilities, id).name) !== null && _d !== void 0 ? _d : \"\";\n                break;\n        }\n        let res = \"\";\n        let nonAlnum = 0;\n        for(let i = 0, j = 0; i < id.length; i++, j++){\n            while(!/[a-zA-Z0-9]/.test(name[j])){\n                j++;\n                nonAlnum++;\n            }\n            res += nonAlnum;\n        }\n        if (nonAlnum) return res;\n        return \"\";\n    });\n}\n/**\n * Backend for search UIs.\n */ class $cd61f496984300fe$var$DexSearch {\n    constructor(searchType = \"\", formatid = \"\", species = \"\"){\n        this.query = \"\";\n        this.typedSearch = null;\n        this.results = null;\n        this.exactMatch = false;\n        this.firstPokemonColumn = \"Number\";\n        /**\n         * Column to sort by. Default is `null`, a smart sort determined by how good\n         * things are according to the base filters, falling back to dex number (for\n         * Pokemon) and name (for everything else).\n         */ this.sortCol = null;\n        this.reverseSort = false;\n        /**\n         * Filters for the search result. Does not include the two base filters\n         * (format and species).\n         */ this.filters = null;\n        $cd61f496984300fe$var$generateSearchIndex();\n        this.setType(searchType, formatid, species);\n    }\n    getTypedSearch(searchType, format = \"\", speciesOrSet) {\n        if (!searchType) return null;\n        switch(searchType){\n            case \"pokemon\":\n                return new $cd61f496984300fe$var$BattlePokemonSearch(\"pokemon\", format, speciesOrSet);\n            case \"item\":\n                return new $cd61f496984300fe$var$BattleItemSearch(\"item\", format, speciesOrSet);\n            case \"move\":\n                return new $cd61f496984300fe$var$BattleMoveSearch(\"move\", format, speciesOrSet);\n            case \"ability\":\n                return new $cd61f496984300fe$var$BattleAbilitySearch(\"ability\", format, speciesOrSet);\n            case \"type\":\n                return new $cd61f496984300fe$var$BattleTypeSearch(\"type\", format, speciesOrSet);\n            case \"category\":\n                return new $cd61f496984300fe$var$BattleCategorySearch(\"category\", format, speciesOrSet);\n        }\n        return null;\n    }\n    find(query) {\n        var _a;\n        query = toID(query);\n        if (this.query === query && this.results) return false;\n        this.query = query;\n        if (!query) this.results = ((_a = this.typedSearch) === null || _a === void 0 ? void 0 : _a.getResults(this.filters, this.sortCol, this.reverseSort)) || [];\n        else this.results = this.textSearch(query);\n        return true;\n    }\n    setType(searchType, format = \"\", speciesOrSet) {\n        var _a;\n        // invalidate caches\n        this.results = null;\n        if (searchType !== ((_a = this.typedSearch) === null || _a === void 0 ? void 0 : _a.searchType)) {\n            this.filters = null;\n            this.sortCol = null;\n        }\n        this.typedSearch = this.getTypedSearch(searchType, format, speciesOrSet);\n    }\n    addFilter(entry) {\n        if (!this.typedSearch) return false;\n        let [type] = entry;\n        if (this.typedSearch.searchType === \"pokemon\") {\n            if (type === this.sortCol) this.sortCol = null;\n            if (![\n                \"type\",\n                \"move\",\n                \"ability\",\n                \"egggroup\",\n                \"tier\"\n            ].includes(type)) return false;\n            if (type === \"move\") entry[1] = toID(entry[1]);\n            if (!this.filters) this.filters = [];\n            this.results = null;\n            for (const filter of this.filters){\n                if (filter[0] === type && filter[1] === entry[1]) return true;\n            }\n            this.filters.push(entry);\n            return true;\n        } else if (this.typedSearch.searchType === \"move\") {\n            if (type === this.sortCol) this.sortCol = null;\n            if (![\n                \"type\",\n                \"category\",\n                \"pokemon\"\n            ].includes(type)) return false;\n            if (type === \"pokemon\") entry[1] = toID(entry[1]);\n            if (!this.filters) this.filters = [];\n            this.filters.push(entry);\n            this.results = null;\n            return true;\n        }\n        return false;\n    }\n    removeFilter(entry) {\n        if (!this.filters) return false;\n        if (entry) {\n            const filterid = entry.join(\":\");\n            let deleted = null;\n            // delete specific filter\n            for(let i = 0; i < this.filters.length; i++)if (filterid === this.filters[i].join(\":\")) {\n                deleted = this.filters[i];\n                this.filters.splice(i, 1);\n                break;\n            }\n            if (!deleted) return false;\n        } else this.filters.pop();\n        if (!this.filters.length) this.filters = null;\n        this.results = null;\n        return true;\n    }\n    toggleSort(sortCol) {\n        if (this.sortCol === sortCol) {\n            if (!this.reverseSort) this.reverseSort = true;\n            else {\n                this.sortCol = null;\n                this.reverseSort = false;\n            }\n        } else {\n            this.sortCol = sortCol;\n            this.reverseSort = false;\n        }\n        this.results = null;\n    }\n    filterLabel(filterType) {\n        if (this.typedSearch && this.typedSearch.searchType !== filterType) return \"Filter\";\n        return null;\n    }\n    illegalLabel(id) {\n        var _a, _b;\n        return ((_b = (_a = this.typedSearch) === null || _a === void 0 ? void 0 : _a.illegalReasons) === null || _b === void 0 ? void 0 : _b[id]) || null;\n    }\n    textSearch(query) {\n        var _a, _b, _c;\n        query = toID(query);\n        this.exactMatch = false;\n        let searchType = ((_a = this.typedSearch) === null || _a === void 0 ? void 0 : _a.searchType) || \"\";\n        // If searchType exists, we're searching mainly for results of that type.\n        // We'll still search for results of other types, but those results\n        // will only be used to filter results for that type.\n        let searchTypeIndex = searchType ? $cd61f496984300fe$var$DexSearch.typeTable[searchType] : -1;\n        /** searching for \"Psychic type\" will make the type come up over the move */ let qFilterType = \"\";\n        if (query.slice(-4) === \"type\") {\n            if (query.slice(0, -4) in BattleTypeChart) {\n                query = query.slice(0, -4);\n                qFilterType = \"type\";\n            }\n        }\n        // i represents the location of the search index we're looking at\n        let i = $cd61f496984300fe$var$DexSearch.getClosest(query);\n        this.exactMatch = $cd61f496984300fe$var$BattleSearchIndex[i][0] === query;\n        // Even with output buffer buckets, we make multiple passes through\n        // the search index. searchPasses is a queue of which pass we're on:\n        // [passType, i, query]\n        // By doing an alias pass after the normal pass, we ensure that\n        // mid-word matches only display after start matches.\n        let passType = \"\";\n        let searchPasses = [\n            [\n                \"normal\",\n                i,\n                query\n            ]\n        ];\n        // For performance reasons, only do an alias pass if query is at\n        // least 2 chars long\n        if (query.length > 1) searchPasses.push([\n            \"alias\",\n            i,\n            query\n        ]);\n        // If there are no matches starting with query: Do a fuzzy match pass\n        // Fuzzy matches will still be shown after alias matches\n        if (!this.exactMatch && $cd61f496984300fe$var$BattleSearchIndex[i][0].substr(0, query.length) !== query) {\n            // No results start with this. Do a fuzzy match pass.\n            let matchLength = query.length - 1;\n            if (!i) i++;\n            while(matchLength && $cd61f496984300fe$var$BattleSearchIndex[i][0].substr(0, matchLength) !== query.substr(0, matchLength) && $cd61f496984300fe$var$BattleSearchIndex[i - 1][0].substr(0, matchLength) !== query.substr(0, matchLength))matchLength--;\n            let matchQuery = query.substr(0, matchLength);\n            while(i >= 1 && $cd61f496984300fe$var$BattleSearchIndex[i - 1][0].substr(0, matchLength) === matchQuery)i--;\n            searchPasses.push([\n                \"fuzzy\",\n                i,\n                \"\"\n            ]);\n        }\n        // We split the output buffers into 8 buckets.\n        // Bucket 0 is usually unused, and buckets 1-7 represent\n        // pokemon, types, moves, etc (see typeTable).\n        // When we're done, the buffers are concatenated together to form\n        // our results, with each buffer getting its own header, unlike\n        // multiple-pass results, which have no header.\n        // Notes:\n        // - if we have a searchType, that searchType's buffer will be on top\n        let bufs = [\n            [],\n            [],\n            [],\n            [],\n            [],\n            [],\n            [],\n            [],\n            [],\n            []\n        ];\n        let topbufIndex = -1;\n        let count = 0;\n        let nearMatch = false;\n        /** [type, id, typeIndex] */ let instafilter = null;\n        let instafilterSort = [\n            0,\n            1,\n            2,\n            5,\n            4,\n            3,\n            6,\n            7,\n            8\n        ];\n        let illegal = (_b = this.typedSearch) === null || _b === void 0 ? void 0 : _b.illegalReasons;\n        // We aren't actually looping through the entirety of the searchIndex\n        for(i = 0; i < $cd61f496984300fe$var$BattleSearchIndex.length; i++){\n            if (!passType) {\n                let searchPass = searchPasses.shift();\n                if (!searchPass) break;\n                passType = searchPass[0];\n                i = searchPass[1];\n                query = searchPass[2];\n            }\n            let entry = $cd61f496984300fe$var$BattleSearchIndex[i];\n            let id = entry[0];\n            let type = entry[1];\n            if (!id) break;\n            if (passType === \"fuzzy\") {\n                // fuzzy match pass; stop after 2 results\n                if (count >= 2) {\n                    passType = \"\";\n                    continue;\n                }\n                nearMatch = true;\n            } else if (passType === \"exact\") // exact pass; stop after 1 result\n            {\n                if (count >= 1) {\n                    passType = \"\";\n                    continue;\n                }\n            } else if (id.substr(0, query.length) !== query) {\n                // regular pass, time to move onto our next match\n                passType = \"\";\n                continue;\n            }\n            if (entry.length > 2) {\n                // alias entry\n                if (passType !== \"alias\") continue;\n            } else {\n                // normal entry\n                if (passType === \"alias\") continue;\n            }\n            let typeIndex = $cd61f496984300fe$var$DexSearch.typeTable[type];\n            // For performance, with a query length of 1, we only fill the first bucket\n            if (query.length === 1 && typeIndex !== (searchType ? searchTypeIndex : 1)) continue;\n            // For pokemon queries, accept types/tier/abilities/moves/eggroups as filters\n            if (searchType === \"pokemon\" && (typeIndex === 5 || typeIndex > 7)) continue;\n            // For move queries, accept types/categories as filters\n            if (searchType === \"move\" && (typeIndex !== 8 && typeIndex > 4 || typeIndex === 3)) continue;\n            // For move queries in the teambuilder, don't accept pokemon as filters\n            if (searchType === \"move\" && illegal && typeIndex === 1) continue;\n            // For ability/item queries, don't accept anything else as a filter\n            if ((searchType === \"ability\" || searchType === \"item\") && typeIndex !== searchTypeIndex) continue;\n            // Query was a type name followed 'type'; only show types\n            if (qFilterType === \"type\" && typeIndex !== 2) continue;\n            // hardcode cases of duplicate non-consecutive aliases\n            if ((id === \"megax\" || id === \"megay\") && \"mega\".startsWith(query)) continue;\n            let matchStart = 0;\n            let matchEnd = 0;\n            if (passType === \"alias\") {\n                // alias entry\n                // [aliasid, type, originalid, matchStart, originalindex]\n                matchStart = entry[3];\n                let originalIndex = entry[2];\n                if (matchStart) {\n                    matchEnd = matchStart + query.length;\n                    matchStart += ($cd61f496984300fe$var$BattleSearchIndexOffset[originalIndex][matchStart] || \"0\").charCodeAt(0) - 48;\n                    matchEnd += ($cd61f496984300fe$var$BattleSearchIndexOffset[originalIndex][matchEnd - 1] || \"0\").charCodeAt(0) - 48;\n                }\n                id = $cd61f496984300fe$var$BattleSearchIndex[originalIndex][0];\n            } else {\n                matchEnd = query.length;\n                if (matchEnd) matchEnd += ($cd61f496984300fe$var$BattleSearchIndexOffset[i][matchEnd - 1] || \"0\").charCodeAt(0) - 48;\n            }\n            if (searchType && searchTypeIndex !== typeIndex) // This is a filter, set it as an instafilter candidate\n            {\n                if (!instafilter || instafilterSort[typeIndex] < instafilterSort[instafilter[2]]) instafilter = [\n                    type,\n                    id,\n                    typeIndex\n                ];\n            }\n            // show types above Arceus formes\n            if (topbufIndex < 0 && searchTypeIndex < 2 && passType === \"alias\" && !bufs[1].length && bufs[2].length) topbufIndex = 2;\n            if (illegal && typeIndex === searchTypeIndex) {\n                // Always show illegal results under legal results.\n                // This is done by putting legal results (and the type header)\n                // in bucket 0, and illegal results in the searchType's bucket.\n                // searchType buckets are always on top (but under bucket 0), so\n                // illegal results will be seamlessly right under legal results.\n                if (!bufs[typeIndex].length && !bufs[0].length) bufs[0] = [\n                    [\n                        \"header\",\n                        $cd61f496984300fe$var$DexSearch.typeName[type]\n                    ]\n                ];\n                if (!(id in illegal)) typeIndex = 0;\n            } else if (!bufs[typeIndex].length) bufs[typeIndex] = [\n                [\n                    \"header\",\n                    $cd61f496984300fe$var$DexSearch.typeName[type]\n                ]\n            ];\n            // don't match duplicate aliases\n            let curBufLength = passType === \"alias\" && bufs[typeIndex].length;\n            if (curBufLength && bufs[typeIndex][curBufLength - 1][1] === id) continue;\n            bufs[typeIndex].push([\n                type,\n                id,\n                matchStart,\n                matchEnd\n            ]);\n            count++;\n        }\n        let topbuf = [];\n        if (nearMatch) topbuf = [\n            [\n                \"html\",\n                `<em>No exact match found. The closest matches alphabetically are:</em>`\n            ]\n        ];\n        if (topbufIndex >= 0) {\n            topbuf = topbuf.concat(bufs[topbufIndex]);\n            bufs[topbufIndex] = [];\n        }\n        if (searchTypeIndex >= 0) {\n            topbuf = topbuf.concat(bufs[0]);\n            topbuf = topbuf.concat(bufs[searchTypeIndex]);\n            bufs[searchTypeIndex] = [];\n            bufs[0] = [];\n        }\n        if (instafilter && count < 20) // Result count is less than 20, so we can instafilter\n        bufs.push(this.instafilter(searchType, instafilter[0], instafilter[1]));\n        this.results = Array.prototype.concat.apply(topbuf, bufs);\n        return (_c = this.results) !== null && _c !== void 0 ? _c : [];\n    }\n    instafilter(searchType, fType, fId) {\n        var _a;\n        let buf = [];\n        let illegalBuf = [];\n        let illegal = (_a = this.typedSearch) === null || _a === void 0 ? void 0 : _a.illegalReasons;\n        if (searchType === \"pokemon\") switch(fType){\n            case \"type\":\n                let type = fId.charAt(0).toUpperCase() + fId.slice(1);\n                buf.push([\n                    \"header\",\n                    `${type}-type Pok&eacute;mon`\n                ]);\n                for(let id in BattlePokedex){\n                    if (!BattlePokedex[id].types) continue;\n                    if (BattlePokedex[id].types.includes(type)) (illegal && id in illegal ? illegalBuf : buf).push([\n                        \"pokemon\",\n                        id\n                    ]);\n                }\n                break;\n            case \"ability\":\n                let ability = getID(BattleAbilities, fId).name;\n                buf.push([\n                    \"header\",\n                    `${ability} Pok&eacute;mon`\n                ]);\n                for(let id in BattlePokedex){\n                    if (!BattlePokedex[id].abilities) continue;\n                    if ($cd61f496984300fe$var$hasAbility(BattlePokedex[id], ability)) (illegal && id in illegal ? illegalBuf : buf).push([\n                        \"pokemon\",\n                        id\n                    ]);\n                }\n                break;\n        }\n        else if (searchType === \"move\") switch(fType){\n            case \"type\":\n                let type1 = fId.charAt(0).toUpperCase() + fId.slice(1);\n                buf.push([\n                    \"header\",\n                    `${type1}-type moves`\n                ]);\n                for(let id in BattleMovedex)if (BattleMovedex[id].type === type1) (illegal && id in illegal ? illegalBuf : buf).push([\n                    \"move\",\n                    id\n                ]);\n                break;\n            case \"category\":\n                let category = fId.charAt(0).toUpperCase() + fId.slice(1);\n                buf.push([\n                    \"header\",\n                    `${category} moves`\n                ]);\n                for(let id in BattleMovedex)if (BattleMovedex[id].category === category) (illegal && id in illegal ? illegalBuf : buf).push([\n                    \"move\",\n                    id\n                ]);\n                break;\n        }\n        return [\n            ...buf,\n            ...illegalBuf\n        ];\n    }\n    static getClosest(query) {\n        // binary search through the index!\n        let left = 0;\n        let right = $cd61f496984300fe$var$BattleSearchIndex.length - 1;\n        while(right > left){\n            let mid = Math.floor((right - left) / 2 + left);\n            if ($cd61f496984300fe$var$BattleSearchIndex[mid][0] === query && (mid === 0 || $cd61f496984300fe$var$BattleSearchIndex[mid - 1][0] !== query)) // that's us\n            return mid;\n            else if ($cd61f496984300fe$var$BattleSearchIndex[mid][0] < query) left = mid + 1;\n            else right = mid - 1;\n        }\n        if (left >= $cd61f496984300fe$var$BattleSearchIndex.length - 1) left = $cd61f496984300fe$var$BattleSearchIndex.length - 1;\n        else if ($cd61f496984300fe$var$BattleSearchIndex[left + 1][0] && $cd61f496984300fe$var$BattleSearchIndex[left][0] < query) left++;\n        if (left && $cd61f496984300fe$var$BattleSearchIndex[left - 1][0] === query) left--;\n        return left;\n    }\n}\n$cd61f496984300fe$var$DexSearch.typeTable = {\n    pokemon: 1,\n    type: 2,\n    tier: 3,\n    move: 4,\n    item: 5,\n    ability: 6,\n    egggroup: 7,\n    category: 8,\n    article: 9\n};\n$cd61f496984300fe$var$DexSearch.typeName = {\n    pokemon: \"Pok&eacute;mon\",\n    type: \"Type\",\n    tier: \"Tiers\",\n    move: \"Moves\",\n    item: \"Items\",\n    ability: \"Abilities\",\n    egggroup: \"Egg group\",\n    category: \"Category\",\n    article: \"Article\"\n};\nclass $cd61f496984300fe$var$BattleTypedSearch {\n    constructor(searchType, format = \"\", speciesOrSet = \"\"){\n        /**\n         * `species` is the second of two base filters. It constrains results to\n         * things that species can use, and affects the default sort.\n         */ this.species = \"\";\n        /**\n         * `set` is a pseudo-base filter; it has minor effects on move sorting.\n         * (Abilities/items can affect what moves are sorted as usable.)\n         */ this.set = null;\n        /**\n         * Cached copy of what the results list would be with only base filters\n         * (i.e. with an empty `query` and `filters`)\n         */ this.baseResults = null;\n        /**\n         * Cached copy of all results not in `baseResults` - mostly in case a user\n         * is wondering why a specific result isn't showing up.\n         */ this.baseIllegalResults = null;\n        this.illegalReasons = null;\n        this.results = null;\n        this.sortRow = null;\n        this.searchType = searchType;\n        this.baseResults = null;\n        this.baseIllegalResults = null;\n        this.species = \"\";\n        this.set = null;\n        if (typeof speciesOrSet === \"string\") {\n            if (speciesOrSet) this.species = speciesOrSet;\n        } else {\n            this.set = speciesOrSet;\n            this.species = toID(this.set.species);\n        }\n        if (!searchType || !this.set) return;\n    }\n    getResults(filters, sortCol, reverseSort) {\n        if (sortCol === \"type\") return [\n            this.sortRow,\n            ...$cd61f496984300fe$var$BattleTypeSearch.prototype.getDefaultResults.call(this)\n        ];\n        else if (sortCol === \"category\") return [\n            this.sortRow,\n            ...$cd61f496984300fe$var$BattleCategorySearch.prototype.getDefaultResults.call(this)\n        ];\n        else if (sortCol === \"ability\") return [\n            this.sortRow,\n            ...$cd61f496984300fe$var$BattleAbilitySearch.prototype.getDefaultResults.call(this)\n        ];\n        if (!this.baseResults) this.baseResults = this.getBaseResults();\n        if (!this.baseIllegalResults) {\n            const legalityFilter = {};\n            for (const [resultType, value] of this.baseResults)if (resultType === this.searchType) legalityFilter[value] = 1;\n            this.baseIllegalResults = [];\n            this.illegalReasons = {};\n            for(const id in this.getTable())if (!(id in legalityFilter)) {\n                this.baseIllegalResults.push([\n                    this.searchType,\n                    id\n                ]);\n                this.illegalReasons[id] = \"Illegal\";\n            }\n        }\n        let results;\n        let illegalResults;\n        if (filters) {\n            results = [];\n            illegalResults = [];\n            for (const result of this.baseResults)if (this.filter(result, filters)) {\n                if (results.length && result[0] === \"header\" && results[results.length - 1][0] === \"header\") results[results.length - 1] = result;\n                else results.push(result);\n            }\n            if (results.length && results[results.length - 1][0] === \"header\") results.pop();\n            for (const result of this.baseIllegalResults)if (this.filter(result, filters)) illegalResults.push(result);\n        } else {\n            results = [\n                ...this.baseResults\n            ];\n            illegalResults = null;\n        }\n        if (sortCol) {\n            results = results.filter(([rowType])=>rowType === this.searchType);\n            results = this.sort(results, sortCol, reverseSort);\n            if (illegalResults) {\n                illegalResults = illegalResults.filter(([rowType])=>rowType === this.searchType);\n                illegalResults = this.sort(illegalResults, sortCol, reverseSort);\n            }\n        }\n        if (this.sortRow) results = [\n            this.sortRow,\n            ...results\n        ];\n        if (illegalResults && illegalResults.length) results = [\n            ...results,\n            [\n                \"header\",\n                \"Illegal results\"\n            ],\n            ...illegalResults\n        ];\n        return results;\n    }\n}\nclass $cd61f496984300fe$var$BattlePokemonSearch extends $cd61f496984300fe$var$BattleTypedSearch {\n    constructor(){\n        super(...arguments);\n        this.sortRow = [\n            \"sortpokemon\",\n            \"\"\n        ];\n    }\n    filter(row, filters) {\n        if (!filters) return true;\n        if (row[0] !== \"pokemon\") return true;\n        const poke = getID(BattlePokedex, row[1]);\n        for (const [filterType, value] of filters)switch(filterType){\n            case \"type\":\n                if (poke.types.every((t)=>t != value)) return false;\n                break;\n            case \"move\":\n                if (!canLearn(poke.id, value)) return false;\n                break;\n            case \"ability\":\n                if (!$cd61f496984300fe$var$hasAbility(poke, value)) return false;\n                break;\n            case \"egggroup\":\n                if (poke.eggGroups.every((t)=>t != value)) return false;\n                break;\n        }\n        return true;\n    }\n    getTable() {\n        return BattlePokedex;\n    }\n    getDefaultResults() {\n        const groups = {};\n        for(const id in BattlePokedex){\n            const p = BattlePokedex[id];\n            if (!p) continue;\n            const baseId = toID(p.baseSpecies || p.name);\n            if (!groups[baseId]) groups[baseId] = {\n                base: id,\n                num: p.num || 0,\n                forms: []\n            };\n            // Identify base (prefer the entry whose name equals baseSpecies or has no forme)\n            const isBase = !p.forme || p.name === p.baseSpecies;\n            if (isBase) {\n                groups[baseId].base = id;\n                groups[baseId].num = p.num || groups[baseId].num;\n            } else groups[baseId].forms.push(id);\n        }\n        // Sort forms within each group deterministically (by name/forme)\n        for(const baseId in groups)groups[baseId].forms.sort((a, b)=>{\n            const pa = BattlePokedex[a];\n            const pb = BattlePokedex[b];\n            const fa = (pa.forme || pa.name).toLowerCase();\n            const fb = (pb.forme || pb.name).toLowerCase();\n            return fa < fb ? -1 : fa > fb ? 1 : 0;\n        });\n        // Order groups by dex number then base id\n        const ordered = Object.values(groups).sort((a, b)=>a.num - b.num || (a.base < b.base ? -1 : a.base > b.base ? 1 : 0));\n        // Build global form order mapping for suffix rendering in UI\n        window.BattleFormOrder = {};\n        for (const g of ordered)window.BattleFormOrder[toID(BattlePokedex[g.base].baseSpecies || BattlePokedex[g.base].name)] = g.forms.slice();\n        const results = [];\n        for (const g of ordered){\n            const baseId = g.base;\n            switch(baseId){\n                case \"bulbasaur\":\n                    results.push([\n                        \"header\",\n                        \"Generation 1\"\n                    ]);\n                    break;\n                case \"chikorita\":\n                    results.push([\n                        \"header\",\n                        \"Generation 2\"\n                    ]);\n                    break;\n                case \"treecko\":\n                    results.push([\n                        \"header\",\n                        \"Generation 3\"\n                    ]);\n                    break;\n                case \"turtwig\":\n                    results.push([\n                        \"header\",\n                        \"Generation 4\"\n                    ]);\n                    break;\n                case \"victini\":\n                    results.push([\n                        \"header\",\n                        \"Generation 5\"\n                    ]);\n                    break;\n                case \"chespin\":\n                    results.push([\n                        \"header\",\n                        \"Generation 6\"\n                    ]);\n                    break;\n                case \"rowlet\":\n                    results.push([\n                        \"header\",\n                        \"Generation 7\"\n                    ]);\n                    break;\n                case \"grookey\":\n                    results.push([\n                        \"header\",\n                        \"Generation 8\"\n                    ]);\n                    break;\n                case \"sprigatito\":\n                    results.push([\n                        \"header\",\n                        \"Generation 9\"\n                    ]);\n                    break;\n                case \"missingno\":\n                    results.push([\n                        \"header\",\n                        \"Glitch\"\n                    ]);\n                    break;\n                case \"syclar\":\n                    results.push([\n                        \"header\",\n                        \"CAP\"\n                    ]);\n                    break;\n                case \"pikachucosplay\":\n                    continue; // skip cosplay aggregate\n            }\n            results.push([\n                \"pokemon\",\n                baseId\n            ]);\n            for (const fid of g.forms)results.push([\n                \"pokemon\",\n                fid\n            ]);\n        }\n        return results;\n    }\n    getBaseResults() {\n        return this.getDefaultResults();\n    }\n    sort(results, sortCol, reverseSort) {\n        const sortOrder = reverseSort ? -1 : 1;\n        if ([\n            \"hp\",\n            \"atk\",\n            \"def\",\n            \"spa\",\n            \"spd\",\n            \"spe\"\n        ].includes(sortCol)) return results.sort(([rowType1, id1], [rowType2, id2])=>{\n            const stat1 = getID(BattlePokedex, id1).baseStats[sortCol];\n            const stat2 = getID(BattlePokedex, id2).baseStats[sortCol];\n            return (stat2 - stat1) * sortOrder;\n        });\n        else if (sortCol === \"bst\") return results.sort(([rowType1, id1], [rowType2, id2])=>{\n            const base1 = getID(BattlePokedex, id1).baseStats;\n            const base2 = getID(BattlePokedex, id2).baseStats;\n            const bst1 = base1.hp + base1.atk + base1.def + base1.spa + base1.spd + base1.spe;\n            const bst2 = base2.hp + base2.atk + base2.def + base2.spa + base2.spd + base2.spe;\n            return (bst2 - bst1) * sortOrder;\n        });\n        else if (sortCol === \"name\") return results.sort(([rowType1, id1], [rowType2, id2])=>{\n            const name1 = id1;\n            const name2 = id2;\n            return (name1 < name2 ? -1 : name1 > name2 ? 1 : 0) * sortOrder;\n        });\n        throw new Error(\"invalid sortcol\");\n    }\n}\nclass $cd61f496984300fe$var$BattleAbilitySearch extends $cd61f496984300fe$var$BattleTypedSearch {\n    getTable() {\n        return BattleAbilities;\n    }\n    getDefaultResults() {\n        const results = [];\n        for(let id in BattleAbilities)results.push([\n            \"ability\",\n            id\n        ]);\n        return results;\n    }\n    getBaseResults() {\n        return this.getDefaultResults();\n    }\n    filter(row, filters) {\n        if (!filters) return true;\n        if (row[0] !== \"ability\") return true;\n        const ability = getID(BattleAbilities, row[1]);\n        for (const [filterType, value] of filters)switch(filterType){\n            case \"pokemon\":\n                if (!$cd61f496984300fe$var$hasAbility(getID(BattlePokedex, value), ability.name)) return false;\n                break;\n        }\n        return true;\n    }\n    sort(results, sortCol, reverseSort) {\n        throw new Error(\"invalid sortcol\");\n    }\n}\nclass $cd61f496984300fe$var$BattleItemSearch extends $cd61f496984300fe$var$BattleTypedSearch {\n    getTable() {\n        return BattleItems;\n    }\n    getDefaultResults() {\n        let results = [];\n        results.push([\n            \"header\",\n            \"Items\"\n        ]);\n        for(let id in BattleItems)results.push([\n            \"item\",\n            id\n        ]);\n        return results;\n    }\n    getBaseResults() {\n        return this.getDefaultResults();\n    }\n    filter(row, filters) {\n        throw new Error(\"invalid filter\");\n    }\n    sort(results, sortCol, reverseSort) {\n        throw new Error(\"invalid sortcol\");\n    }\n}\nclass $cd61f496984300fe$var$BattleMoveSearch extends $cd61f496984300fe$var$BattleTypedSearch {\n    constructor(){\n        super(...arguments);\n        this.sortRow = [\n            \"sortmove\",\n            \"\"\n        ];\n    }\n    getTable() {\n        return BattleMovedex;\n    }\n    getDefaultResults() {\n        let results = [];\n        results.push([\n            \"header\",\n            \"Moves\"\n        ]);\n        for(let id in BattleMovedex)results.push([\n            \"move\",\n            id\n        ]);\n        return results;\n    }\n    getBaseResults() {\n        return this.getDefaultResults();\n    }\n    filter(row, filters) {\n        if (!filters) return true;\n        if (row[0] !== \"move\") return true;\n        const move = getID(BattleMovedex, row[1]);\n        for (const [filterType, value] of filters)switch(filterType){\n            case \"type\":\n                if (move.type !== value) return false;\n                break;\n            case \"category\":\n                if (move.category !== value) return false;\n                break;\n            case \"pokemon\":\n                if (!canLearn(value, move.id)) return false;\n                break;\n        }\n        return true;\n    }\n    sort(results, sortCol, reverseSort) {\n        const sortOrder = reverseSort ? -1 : 1;\n        switch(sortCol){\n            case \"power\":\n                let powerTable = {\n                    return: 102,\n                    frustration: 102,\n                    spitup: 300,\n                    trumpcard: 200,\n                    naturalgift: 80,\n                    grassknot: 120,\n                    lowkick: 120,\n                    gyroball: 150,\n                    electroball: 150,\n                    flail: 200,\n                    reversal: 200,\n                    present: 120,\n                    wringout: 120,\n                    crushgrip: 120,\n                    heatcrash: 120,\n                    heavyslam: 120,\n                    fling: 130,\n                    magnitude: 150,\n                    beatup: 24,\n                    punishment: 1020,\n                    psywave: 1250,\n                    nightshade: 1200,\n                    seismictoss: 1200,\n                    dragonrage: 1140,\n                    sonicboom: 1120,\n                    superfang: 1350,\n                    endeavor: 1399,\n                    sheercold: 1501,\n                    fissure: 1500,\n                    horndrill: 1500,\n                    guillotine: 1500\n                };\n                return results.sort(([rowType1, id1], [rowType2, id2])=>{\n                    let move1 = getID(BattleMovedex, id1);\n                    let move2 = getID(BattleMovedex, id2);\n                    let pow1 = move1.basePower || powerTable[id1] || (move1.category === \"Status\" ? -1 : 1400);\n                    let pow2 = move2.basePower || powerTable[id2] || (move2.category === \"Status\" ? -1 : 1400);\n                    return (pow2 - pow1) * sortOrder;\n                });\n            case \"accuracy\":\n                return results.sort(([rowType1, id1], [rowType2, id2])=>{\n                    let accuracy1 = getID(BattleMovedex, id1).accuracy || 0;\n                    let accuracy2 = getID(BattleMovedex, id2).accuracy || 0;\n                    if (accuracy1 === true) accuracy1 = 101;\n                    if (accuracy2 === true) accuracy2 = 101;\n                    return (accuracy2 - accuracy1) * sortOrder;\n                });\n            case \"pp\":\n                return results.sort(([rowType1, id1], [rowType2, id2])=>{\n                    let pp1 = getID(BattleMovedex, id1).pp || 0;\n                    let pp2 = getID(BattleMovedex, id2).pp || 0;\n                    return (pp2 - pp1) * sortOrder;\n                });\n            case \"name\":\n                return results.sort(([rowType1, id1], [rowType2, id2])=>{\n                    const name1 = id1;\n                    const name2 = id2;\n                    return (name1 < name2 ? -1 : name1 > name2 ? 1 : 0) * sortOrder;\n                });\n        }\n        throw new Error(\"invalid sortcol\");\n    }\n}\nclass $cd61f496984300fe$var$BattleCategorySearch extends $cd61f496984300fe$var$BattleTypedSearch {\n    getTable() {\n        return {\n            physical: 1,\n            special: 1,\n            status: 1\n        };\n    }\n    getDefaultResults() {\n        return [\n            [\n                \"category\",\n                \"physical\"\n            ],\n            [\n                \"category\",\n                \"special\"\n            ],\n            [\n                \"category\",\n                \"status\"\n            ]\n        ];\n    }\n    getBaseResults() {\n        return this.getDefaultResults();\n    }\n    filter(row, filters) {\n        throw new Error(\"invalid filter\");\n    }\n    sort(results, sortCol, reverseSort) {\n        throw new Error(\"invalid sortcol\");\n    }\n}\nclass $cd61f496984300fe$var$BattleTypeSearch extends $cd61f496984300fe$var$BattleTypedSearch {\n    getTable() {\n        return BattleTypeChart;\n    }\n    getDefaultResults() {\n        const results = [];\n        for(let id in BattleTypeChart)results.push([\n            \"type\",\n            id\n        ]);\n        return results;\n    }\n    getBaseResults() {\n        return this.getDefaultResults();\n    }\n    filter(row, filters) {\n        throw new Error(\"invalid filter\");\n    }\n    sort(results, sortCol, reverseSort) {\n        throw new Error(\"invalid sortcol\");\n    }\n}\nwindow.DexSearch = $cd61f496984300fe$var$DexSearch;\n\n});\n\n\n\n//# sourceMappingURL=search.34b036c7.js.map\n","/**\n * Search\n *\n * Basically just an improved version of utilichart\n *\n * Dependencies: jQuery, battledata, search-index\n * Optional dependencies: pokedex, moves, items, abilities\n *\n * @author Guangcong Luo <guangcongluo@gmail.com>\n */\nimport jQuery from 'jquery';\n// Import battle-dex-search to ensure DexSearch is available\nimport './battle-dex-search.js';\n\n(function (exports, $) {\n\t'use strict';\n\n\tfunction Search(elem, viewport) {\n\t\tthis.$el = $(elem);\n\t\tthis.el = this.$el[0];\n\t\tthis.$viewport = (viewport ? $(viewport) : $(window));\n\n\t\tthis.urlRoot = '';\n\t\tthis.q = undefined; // uninitialized\n\t\tthis.exactMatch = false;\n\n\t\tthis.resultSet = null;\n\t\tthis.filters = null;\n\t\tthis.sortCol = null;\n\t\tthis.renderedIndex = 0;\n\t\tthis.renderingDone = true;\n\t\tthis.externalFilter = false;\n\t\tthis.cur = {};\n\t\tthis.$inputEl = null;\n\t\tthis.gen = 9;\n\t\tthis.mod = null;\n\n\t\tthis.engine = new DexSearch();\n\t\twindow.search = this;\n\n\t\tvar self = this;\n\t\tthis.$el.on('click', '.more button', function (e) {\n\t\t\te.preventDefault();\n\t\t\tself.updateScroll(true);\n\t\t});\n\t\tthis.$el.on('click', '.filter', function (e) {\n\t\t\te.preventDefault();\n\t\t\tself.removeFilter(e);\n\t\t\tif (self.$inputEl) self.$inputEl.focus();\n\t\t});\n\t\tthis.$el.on('click', '.sortcol', function (e) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tvar sortCol = e.currentTarget.dataset.sort;\n\t\t\tself.engine.toggleSort(sortCol);\n\t\t\tself.sortCol = self.engine.sortCol;\n\t\t\tself.find('');\n\t\t});\n\t}\n\n\tSearch.prototype.$ = function (query) {\n\t\treturn this.$el.find(query);\n\t};\n\n\t//\n\t// Search functions\n\t//\n\n\tSearch.prototype.find = function (query, firstElem) {\n\t\tif (!this.engine.find(query)) return; // nothing changed\n\n\t\tthis.exactMatch = this.engine.exactMatch;\n\t\tthis.q = this.engine.query;\n\t\tthis.resultSet = this.engine.results;\n\t\tif (firstElem) {\n\t\t\tthis.resultSet = [[this.engine.typedSearch.searchType, firstElem]].concat(this.resultSet);\n\t\t\tif (this.resultSet.length > 1 && ['sortpokemon', 'sortmove'].includes(this.resultSet[1][0])) {\n\t\t\t\tvar sortRow = this.resultSet[1];\n\t\t\t\tthis.resultSet[1] = this.resultSet[0];\n\t\t\t\tthis.resultSet[0] = sortRow;\n\t\t\t}\n\t\t}\n\t\tif (this.filters) {\n\t\t\tthis.resultSet = [['html', this.getFilterText()]].concat(this.resultSet);\n\t\t}\n\n\t\tthis.renderedIndex = 0;\n\t\tthis.renderingDone = false;\n\t\tthis.updateScroll();\n\t\treturn true;\n\t};\n\tSearch.prototype.addFilter = function (node) {\n\t\tif (!node.dataset.entry) return false;\n\t\tvar entry = node.dataset.entry.split('|');\n\t\tvar result = this.engine.addFilter(entry);\n\t\tthis.filters = this.engine.filters;\n\t\treturn result;\n\t};\n\tSearch.prototype.removeFilter = function (e) {\n\t\tvar result;\n\t\tif (e) {\n\t\t\tresult = this.engine.removeFilter(e.currentTarget.value.split(':'));\n\t\t} else {\n\t\t\tresult = this.engine.removeFilter();\n\t\t}\n\t\tthis.filters = this.engine.filters;\n\t\tthis.find('');\n\t\treturn result;\n\t};\n\tSearch.prototype.getFilterText = function (q) {\n\t\tvar buf = '<p>Filters: ';\n\t\tfor (var i = 0; i < this.filters.length; i++) {\n\t\t\tvar text = this.filters[i][1];\n\t\t\tif (this.filters[i][0] === 'move') text = getID(BattleMovedex, text).name;\n\t\t\tif (this.filters[i][0] === 'pokemon') text = getID(BattlePokedex, text).name;\n\t\t\tbuf += '<button class=\"filter\" value=\"' + escapeHTML(this.filters[i].join(':')) + '\">' + text + ' <i class=\"fa fa-times-circle\"></i></button> ';\n\t\t}\n\t\tif (!q) buf += '<small style=\"color: #888\">(backspace = delete filter)</small>';\n\t\treturn buf + '</p>';\n\t};\n\tSearch.prototype.updateScroll = function (forceAdd) {\n\t\tif (this.renderingDone) return;\n\t\tvar top = this.$viewport.scrollTop();\n\t\tvar bottom = top + this.$viewport.height();\n\t\tvar windowHeight = $(window).height();\n\t\tvar i = this.renderedIndex;\n\t\tvar finalIndex = Math.floor(bottom / 33) + 1;\n\t\tif (!forceAdd && finalIndex <= i) return;\n\t\tif (finalIndex < i + 20) finalIndex = i + 20;\n\t\tif (bottom - top > windowHeight && !i) finalIndex = 20;\n\t\tif (forceAdd && finalIndex > i + 40) finalIndex = i + 40;\n\n\t\tvar resultSet = this.resultSet;\n\t\tvar buf = '';\n\t\twhile (i < finalIndex) {\n\t\t\tif (!resultSet[i]) {\n\t\t\t\tthis.renderingDone = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar row = resultSet[i];\n\n\t\t\tvar errorMessage = '';\n\t\t\tvar label;\n\t\t\tif ((label = this.engine.filterLabel(row[0]))) {\n\t\t\t\terrorMessage = '<span class=\"col filtercol\"><em>' + label + '</em></span>';\n\t\t\t} else if ((label = this.engine.illegalLabel(row[1]))) {\n\t\t\t\terrorMessage = '<span class=\"col illegalcol\"><em>' + label + '</em></span>';\n\t\t\t}\n\n\t\t\tvar mStart = 0;\n\t\t\tvar mEnd = 0;\n\t\t\tif (row.length > 3) {\n\t\t\t\tmStart = row[2];\n\t\t\t\tmEnd = row[3];\n\t\t\t}\n\t\t\tbuf += this.renderRow(row[1], row[0], mStart, mEnd, errorMessage, row[1] in this.cur ? ' class=\"cur\"' : '');\n\n\t\t\ti++;\n\t\t}\n\t\tif (!this.renderedIndex) {\n\t\t\tthis.el.innerHTML = '<ul class=\"utilichart\" style=\"height:' + (resultSet.length * 33) + 'px\">' + buf + (!this.renderingDone ? '<li class=\"result more\"><p><button class=\"button big\">More</button></p></li>' : '') + '</ul>';\n\t\t\tthis.moreVisible = true;\n\t\t} else {\n\t\t\tif (this.moreVisible) {\n\t\t\t\tthis.$el.find('.more').remove();\n\t\t\t\tif (!forceAdd) this.moreVisible = false;\n\t\t\t}\n\t\t\t$(this.el.firstChild).append(buf + (forceAdd && !this.renderingDone ? '<li class=\"result more\"><p><button class=\"button big\">More</button></p></li>' : ''));\n\t\t}\n\t\tthis.renderedIndex = i;\n\t};\n\tSearch.prototype.setType = function (qType, format, set, cur) {\n\t\tthis.engine.setType(qType, format, set);\n\t\tthis.filters = this.engine.filters;\n\t\tthis.sortCol = this.engine.sortCol;\n\t\tthis.cur = cur || {};\n\t\tvar firstElem;\n\t\tfor (var id in cur) {\n\t\t\tfirstElem = id;\n\t\t\tbreak;\n\t\t}\n\t\tthis.find('', firstElem);\n\t};\n\n\t/*********************************************************\n\t * Rendering functions\n\t *********************************************************/\n\n\t// These all have static versions\n\n\tSearch.prototype.renderRow = function (id, type, matchStart, matchLength, errorMessage, attrs) {\n\t\t// errorMessage = '<span class=\"col illegalcol\"><em>' + errorMessage + '</em></span>';\n\t\tswitch (type) {\n\t\tcase 'html':\n\t\t\treturn '<li class=\"result\">' + id + '</li>';\n\t\tcase 'header':\n\t\t\treturn '<li class=\"result\"><h3>' + id + '</h3></li>';\n\t\tcase 'sortpokemon':\n\t\t\treturn this.renderPokemonSortRow();\n\t\tcase 'sortmove':\n\t\t\treturn this.renderMoveSortRow();\n\t\tcase 'pokemon':\n\t\t\tvar pokemon = getID(BattlePokedex, id);\n\t\t\treturn this.renderPokemonRow(pokemon, matchStart, matchLength, errorMessage, attrs);\n\t\tcase 'move':\n\t\t\tvar move = getID(BattleMovedex, id);\n\t\t\treturn this.renderMoveRow(move, matchStart, matchLength, errorMessage, attrs);\n\t\tcase 'item':\n\t\t\tvar item = getID(BattleItems, id);\n\t\t\treturn this.renderItemRow(item, matchStart, matchLength, errorMessage, attrs);\n\t\tcase 'ability':\n\t\t\tvar ability = getID(BattleAbilities, id);\n\t\t\treturn this.renderAbilityRow(ability, matchStart, matchLength, errorMessage, attrs);\n\t\tcase 'type':\n\t\t\tvar type = {name: id[0].toUpperCase() + id.substr(1)};\n\t\t\treturn this.renderTypeRow(type, matchStart, matchLength, errorMessage);\n\t\tcase 'egggroup':\n\t\t\t// very hardcode\n\t\t\tvar egName;\n\t\t\tif (id === 'humanlike') egName = 'Human-Like';\n\t\t\telse if (id === 'water1') egName = 'Water 1';\n\t\t\telse if (id === 'water2') egName = 'Water 2';\n\t\t\telse if (id === 'water3') egName = 'Water 3';\n\t\t\tif (egName) {\n\t\t\t\tif (matchLength > 5) matchLength++;\n\t\t\t} else {\n\t\t\t\tegName = id[0].toUpperCase() + id.substr(1);\n\t\t\t}\n\t\t\tvar egggroup = {name: egName};\n\t\t\treturn this.renderEggGroupRow(egggroup, matchStart, matchLength, errorMessage);\n\t\tcase 'tier':\n\t\t\t// very hardcode\n\t\t\tvar tierTable = {\n\t\t\t\tuber: \"Uber\",\n\t\t\t\tou: \"OU\",\n\t\t\t\tuu: \"UU\",\n\t\t\t\tru: \"RU\",\n\t\t\t\tnu: \"NU\",\n\t\t\t\tpu: \"PU\",\n\t\t\t\tzu: \"(PU)\",\n\t\t\t\tnfe: \"NFE\",\n\t\t\t\tlc: \"LC\",\n\t\t\t\tcap: \"CAP\",\n\t\t\t\tcaplc: \"CAP LC\",\n\t\t\t\tcapnfe: \"CAP NFE\",\n\t\t\t\tuubl: \"UUBL\",\n\t\t\t\trubl: \"RUBL\",\n\t\t\t\tnubl: \"NUBL\",\n\t\t\t\tpubl: \"PUBL\"\n\t\t\t};\n\t\t\tvar tier = {name: tierTable[id]};\n\t\t\treturn this.renderTierRow(tier, matchStart, matchLength, errorMessage);\n\t\tcase 'category':\n\t\t\tvar category = {name: id[0].toUpperCase() + id.substr(1), id: id};\n\t\t\treturn this.renderCategoryRow(category, matchStart, matchLength, errorMessage);\n\t\tcase 'article':\n\t\t\tvar articleTitle = (window.BattleArticleTitles && BattleArticleTitles[id]) || (id[0].toUpperCase() + id.substr(1));\n\t\t\tvar article = {name: articleTitle, id: id};\n\t\t\treturn this.renderArticleRow(article, matchStart, matchLength, errorMessage);\n\t\t}\n\t\treturn 'Error: not found';\n\t};\n\tSearch.prototype.renderPokemonSortRow = function () {\n\t\tvar buf = '<li class=\"result\"><div class=\"sortrow\">';\n\t\tbuf += '<button class=\"sortcol numsortcol' + (!this.sortCol ? ' cur' : '') + '\">' + (!this.sortCol ? 'Sort: ' : this.engine.firstPokemonColumn) + '</button>';\n\t\tbuf += '<button class=\"sortcol pnamesortcol' + (this.sortCol === 'name' ? ' cur' : '') + '\" data-sort=\"name\">Name</button>';\n\t\tbuf += '<button class=\"sortcol typesortcol' + (this.sortCol === 'type' ? ' cur' : '') + '\" data-sort=\"type\">Types</button>';\n\t\tbuf += '<button class=\"sortcol abilitysortcol' + (this.sortCol === 'ability' ? ' cur' : '') + '\" data-sort=\"ability\">Abilities</button>';\n\t\tbuf += '<button class=\"sortcol statsortcol' + (this.sortCol === 'hp' ? ' cur' : '') + '\" data-sort=\"hp\">HP</button>';\n\t\tbuf += '<button class=\"sortcol statsortcol' + (this.sortCol === 'atk' ? ' cur' : '') + '\" data-sort=\"atk\">Atk</button>';\n\t\tbuf += '<button class=\"sortcol statsortcol' + (this.sortCol === 'def' ? ' cur' : '') + '\" data-sort=\"def\">Def</button>';\n\t\tbuf += '<button class=\"sortcol statsortcol' + (this.sortCol === 'spa' ? ' cur' : '') + '\" data-sort=\"spa\">SpA</button>';\n\t\tbuf += '<button class=\"sortcol statsortcol' + (this.sortCol === 'spd' ? ' cur' : '') + '\" data-sort=\"spd\">SpD</button>';\n\t\tbuf += '<button class=\"sortcol statsortcol' + (this.sortCol === 'spe' ? ' cur' : '') + '\" data-sort=\"spe\">Spe</button>';\n\t\tbuf += '<button class=\"sortcol statsortcol' + (this.sortCol === 'bst' ? ' cur' : '') + '\" data-sort=\"bst\">BST</button>';\n\t\tbuf += '</div></li>';\n\t\treturn buf;\n\t};\n\tSearch.prototype.renderMoveSortRow = function () {\n\t\tvar buf = '<li class=\"result\"><div class=\"sortrow\">';\n\t\tbuf += '<button class=\"sortcol movenamesortcol' + (this.sortCol === 'name' ? ' cur' : '') + '\" data-sort=\"name\">Name</button>';\n\t\tbuf += '<button class=\"sortcol movetypesortcol' + (this.sortCol === 'type' ? ' cur' : '') + '\" data-sort=\"type\">Type</button>';\n\t\tbuf += '<button class=\"sortcol movetypesortcol' + (this.sortCol === 'category' ? ' cur' : '') + '\" data-sort=\"category\">Cat</button>';\n\t\tbuf += '<button class=\"sortcol powersortcol' + (this.sortCol === 'power' ? ' cur' : '') + '\" data-sort=\"power\">Pow</button>';\n\t\tbuf += '<button class=\"sortcol accuracysortcol' + (this.sortCol === 'accuracy' ? ' cur' : '') + '\" data-sort=\"accuracy\">Acc</button>';\n\t\tbuf += '<button class=\"sortcol ppsortcol' + (this.sortCol === 'pp' ? ' cur' : '') + '\" data-sort=\"pp\">PP</button>';\n\t\tbuf += '</div></li>';\n\t\treturn buf;\n\t};\n\tSearch.prototype.renderPokemonRow = function (pokemon, matchStart, matchLength, errorMessage, attrs) {\n\t\tif (!attrs) attrs = '';\n\t\tif (!pokemon) return '<li class=\"result\">Unrecognized pokemon</li>';\n\t\tvar id = toID(pokemon.name);\n\t\tif (Search.urlRoot) attrs += ' href=\"' + Search.urlRoot + 'pokemon/' + id + '\" data-target=\"push\"';\n\t\tvar buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"pokemon|' + escapeHTML(pokemon.name) + '\">';\n\n\t\t// Dex number with suffix for forms (A, B, C...), shown as 6-A, 10-B, etc. Base shows plain number.\n\t\tvar numDisplay = pokemon.num;\n\t\tif (pokemon.forme && pokemon.name !== pokemon.baseSpecies && window.BattleFormOrder) {\n\t\t\tvar baseId = toID(pokemon.baseSpecies || pokemon.name);\n\t\t\tvar order = window.BattleFormOrder[baseId];\n\t\t\tif (order) {\n\t\t\t\tvar idx = order.indexOf(pokemon.id);\n\t\t\t\tif (idx >= 0) {\n\t\t\t\t\tvar letter = String.fromCharCode(65 + idx);\n\t\t\t\t\tnumDisplay = pokemon.num + '-' + letter;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tbuf += '<span class=\"col numcol\">' + numDisplay + \"</span> \";\n\t\t// icon\n\t\tbuf += '<span class=\"col iconcol\">';\n\t\tbuf += '<span style=\"' + getPokemonIcon(pokemon.name) + '\"></span>';\n\t\tbuf += '</span> ';\n\n\t\t// name\n\t\tvar name = pokemon.name;\n\t\tvar tagStart = (pokemon.forme ? name.length - pokemon.forme.length - 1 : 0);\n\t\tif (tagStart) name = name.substr(0, tagStart);\n\t\tif (matchLength) {\n\t\t\tname = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n\t\t}\n\t\tif (tagStart) {\n\t\t\tif (matchLength && matchStart + matchLength > tagStart) {\n\t\t\t\tif (matchStart < tagStart) {\n\t\t\t\t\tmatchLength -= tagStart - matchStart;\n\t\t\t\t\tmatchStart = tagStart;\n\t\t\t\t}\n\t\t\t\tname += '<small>' + pokemon.name.substr(tagStart, matchStart - tagStart) + '<b>' + pokemon.name.substr(matchStart, matchLength) + '</b>' + pokemon.name.substr(matchStart + matchLength) + '</small>';\n\t\t\t} else {\n\t\t\t\tname += '<small>' + pokemon.name.substr(tagStart) + '</small>';\n\t\t\t}\n\t\t}\n\t\tbuf += '<span class=\"col pokemonnamecol\">' + name + '</span> ';\n\n\t\t// error\n\t\tif (errorMessage) {\n\t\t\tbuf += errorMessage + '</a></li>';\n\t\t\treturn buf;\n\t\t}\n\n\n\t\t// type\n\t\tbuf += '<span class=\"col typecol\">';\n\t\tvar types = pokemon.types;\n\t\tfor (var i = 0; i < types.length; i++) {\n\t\t\tbuf += getTypeIcon(types[i]);\n\t\t}\n\t\tbuf += '</span> ';\n\t\t\n\t\tvar abilities = pokemon.abilities;\n\t\tif (abilities['1']) {\n\t\t\tbuf += '<span class=\"col twoabilitycol\">' + abilities['0'] + '<br />' +\n\t\t\t\tabilities['1'] + '</span>';\n\t\t} else {\n\t\t\tbuf += '<span class=\"col abilitycol\">' + abilities['0'] + '</span>';\n\t\t}\n\t\tif (abilities['S']) {\n\t\t\tif (abilities['H']) {\n\t\t\t\tbuf += '<span class=\"col twoabilitycol\">' + (abilities['H'] || '') + '<br />(' + abilities['S'] + ')</span>';\n\t\t\t} else {\n\t\t\t\tbuf += '<span class=\"col abilitycol\">(' + abilities['S'] + ')</span>';\n\t\t\t}\n\t\t} else if (abilities['H']) {\n\t\t\tbuf += '<span class=\"col abilitycol\">'+abilities['H']+'</span>';\n\t\t} else {\n\t\t\tbuf += '<span class=\"col abilitycol\"></span>';\n\t\t}\n\n\t\t// base stats\n\t\tvar stats = pokemon.baseStats;\n\t\tbuf += '<span class=\"col statcol\"><em>HP</em><br />' + stats.hp + '</span> ';\n\t\tbuf += '<span class=\"col statcol\"><em>Atk</em><br />' + stats.atk + '</span> ';\n\t\tbuf += '<span class=\"col statcol\"><em>Def</em><br />' + stats.def + '</span> ';\n\t\tbuf += '<span class=\"col statcol\"><em>SpA</em><br />' + stats.spa + '</span> ';\n\t\tbuf += '<span class=\"col statcol\"><em>SpD</em><br />' + stats.spd + '</span> ';\n\t\tbuf += '<span class=\"col statcol\"><em>Spe</em><br />' + stats.spe + '</span> ';\n\t\tvar bst = 0;\n\t\tfor (i in stats) bst += stats[i];\n\t\tbuf += '<span class=\"col bstcol\"><em>BST<br />' + bst + '</em></span> ';\n\n\t\tbuf += '</a></li>';\n\n\t\treturn buf;\n\t};\n\tSearch.prototype.renderTaggedPokemonRowInner = function (pokemon, tag, errorMessage) {\n\t\tvar attrs = '';\n\t\tif (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'pokemon/' + toID(pokemon.name) + '\" data-target=\"push\"';\n\t\tvar buf = '<a' + attrs + ' data-entry=\"pokemon|' + escapeHTML(pokemon.name) + '\">';\n\n\t\t// tag\n\t\tbuf += '<span class=\"col tagcol shorttagcol\">' + tag + '</span> ';\n\n\t\t// icon\n\t\tbuf += '<span class=\"col iconcol\">';\n\t\tbuf += '<span style=\"' + getPokemonIcon(pokemon.name) + '\"></span>';\n\t\tbuf += '</span> ';\n\n\t\t// name\n\t\tvar name = pokemon.name;\n\t\tvar tagStart = (pokemon.forme ? name.length - pokemon.forme.length - 1 : 0);\n\t\tif (tagStart) name = name.substr(0, tagStart) + '<small>' + pokemon.name.substr(tagStart) + '</small>';\n\t\tbuf += '<span class=\"col shortpokemonnamecol\">' + name + '</span> ';\n\n\t\t// error\n\t\tif (errorMessage) {\n\t\t\tbuf += errorMessage + '</a></li>';\n\t\t\treturn buf;\n\t\t}\n\n\t\t// type\n\t\tbuf += '<span class=\"col typecol\">';\n\t\tfor (var i = 0; i < pokemon.types.length; i++) {\n\t\t\tbuf += getTypeIcon(pokemon.types[i]);\n\t\t}\n\t\tbuf += '</span> ';\n\n\t\t// abilities\n\t\tbuf += '<span style=\"float:left;min-height:26px\">';\n\t\tif (pokemon.abilities['1']) {\n\t\t\tbuf += '<span class=\"col twoabilitycol\">';\n\t\t} else {\n\t\t\tbuf += '<span class=\"col abilitycol\">';\n\t\t}\n\t\tfor (var i in pokemon.abilities) {\n\t\t\tvar ability = pokemon.abilities[i];\n\t\t\tif (!ability) continue;\n\n\t\t\tif (i === '1') buf += '<br />';\n\t\t\tif (i === 'H') ability = '</span><span class=\"col abilitycol\"><em>' + pokemon.abilities[i] + '</em>';\n\t\t\tbuf += ability;\n\t\t}\n\t\tif (!pokemon.abilities['H']) buf += '</span><span class=\"col abilitycol\">';\n\t\tbuf += '</span>';\n\t\tbuf += '</span>';\n\n\t\t// base stats\n\t\tbuf += '<span style=\"float:left;min-height:26px\">';\n\t\tbuf += '<span class=\"col statcol\"><em>HP</em><br />' + pokemon.baseStats.hp + '</span> ';\n\t\tbuf += '<span class=\"col statcol\"><em>Atk</em><br />' + pokemon.baseStats.atk + '</span> ';\n\t\tbuf += '<span class=\"col statcol\"><em>Def</em><br />' + pokemon.baseStats.def + '</span> ';\n\t\tbuf += '<span class=\"col statcol\"><em>SpA</em><br />' + pokemon.baseStats.spa + '</span> ';\n\t\tbuf += '<span class=\"col statcol\"><em>SpD</em><br />' + pokemon.baseStats.spd + '</span> ';\n\t\tbuf += '<span class=\"col statcol\"><em>Spe</em><br />' + pokemon.baseStats.spe + '</span> ';\n\t\tvar bst = 0;\n\t\tfor (i in pokemon.baseStats) bst += pokemon.baseStats[i];\n\t\tbuf += '<span class=\"col bstcol\"><em>BST<br />' + bst + '</em></span> ';\n\t\tbuf += '</span>';\n\n\t\tbuf += '</a>';\n\n\t\treturn buf;\n\t};\n\n\tSearch.prototype.renderItemRow = function (item, matchStart, matchLength, errorMessage, attrs) {\n\t\tif (!attrs) attrs = '';\n\t\tif (!item) return '<li class=\"result\">Unrecognized item</li>';\n\t\tvar id = toID(item.name);\n\t\tif (Search.urlRoot) attrs += ' href=\"' + Search.urlRoot + 'items/' + id + '\" data-target=\"push\"';\n\t\tvar buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"item|' + escapeHTML(item.name) + '\">';\n\n\t\t// icon\n\t\tbuf += '<span class=\"col itemiconcol\">';\n\t\tbuf += '<span style=\"' + getItemIcon(item) + '\"></span>';\n\t\tbuf += '</span> ';\n\n\t\t// name\n\t\tvar name = item.name;\n\t\tif (matchLength) {\n\t\t\tname = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n\t\t}\n\t\tbuf += '<span class=\"col namecol\">' + name + '</span> ';\n\n\t\t// error\n\t\tif (errorMessage) {\n\t\t\tbuf += errorMessage + '</a></li>';\n\t\t\treturn buf;\n\t\t}\n\n\t\t// desc\n\t\tbuf += '<span class=\"col itemdesccol\">' + escapeHTML(item.shortDesc || item.desc) + '</span> ';\n\n\t\tbuf += '</a></li>';\n\n\t\treturn buf;\n\t};\n\tSearch.prototype.renderAbilityRow = function (ability, matchStart, matchLength, errorMessage, attrs) {\n\t\tif (!attrs) attrs = '';\n\t\tif (!ability) return '<li class=\"result\">Unrecognized ability</li>';\n\t\tvar id = toID(ability.name);\n\t\tif (Search.urlRoot) attrs += ' href=\"' + Search.urlRoot + 'abilities/' + id + '\" data-target=\"push\"';\n\t\tvar buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"ability|' + escapeHTML(ability.name) + '\">';\n\n\t\t// name\n\t\tvar name = ability.name;\n\t\tif (matchLength) {\n\t\t\tname = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n\t\t}\n\t\tbuf += '<span class=\"col namecol\">' + name + '</span> ';\n\n\t\t// error\n\t\tif (errorMessage) {\n\t\t\tbuf += errorMessage + '</a></li>';\n\t\t\treturn buf;\n\t\t}\n\n\t\tbuf += '<span class=\"col abilitydesccol\">' + escapeHTML(ability.shortDesc || ability.desc) + '</span> ';\n\n\t\tbuf += '</a></li>';\n\n\t\treturn buf;\n\t};\n\tSearch.prototype.renderMoveRow = function (move, matchStart, matchLength, errorMessage, attrs) {\n\t\tif (!attrs) attrs = '';\n\t\tif (!move) return '<li class=\"result\">Unrecognized move</li>';\n\t\tvar id = toID(move.name);\n\t\tif (Search.urlRoot) attrs += ' href=\"' + Search.urlRoot + 'moves/' + id + '\" data-target=\"push\"';\n\t\tvar buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"move|' + escapeHTML(move.name) + '\">';\n\n\t\t// name\n\t\tvar name = move.name;\n\t\tvar tagStart = (name.substr(0, 12) === 'Hidden Power' ? 12 : 0);\n\t\tif (tagStart) name = name.substr(0, tagStart);\n\t\tif (matchLength) {\n\t\t\tname = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n\t\t}\n\t\tif (tagStart) {\n\t\t\tif (matchLength && matchStart + matchLength > tagStart) {\n\t\t\t\tif (matchStart < tagStart) {\n\t\t\t\t\tmatchLength -= tagStart - matchStart;\n\t\t\t\t\tmatchStart = tagStart;\n\t\t\t\t}\n\t\t\t\tname += '<small>' + move.name.substr(tagStart, matchStart - tagStart) + '<b>' + move.name.substr(matchStart, matchLength) + '</b>' + move.name.substr(matchStart + matchLength) + '</small>';\n\t\t\t} else {\n\t\t\t\tname += '<small>' + move.name.substr(tagStart) + '</small>';\n\t\t\t}\n\t\t}\n\t\tbuf += '<span class=\"col movenamecol\">' + name + '</span> ';\n\n\t\t// error\n\t\tif (errorMessage) {\n\t\t\tbuf += errorMessage + '</a></li>';\n\t\t\treturn buf;\n\t\t}\n\n\t\t// type\n\t\tbuf += '<span class=\"col typecol\">';\n\t\tbuf += getTypeIcon(move.type);\n\t\tbuf += getCategoryIcon(move.category);\n\t\tbuf += '</span> ';\n\n\t\t// power, accuracy, pp\n\t\tvar pp = (move.pp === 1 || move.noPPBoosts ? move.pp : move.pp * 8 / 5);\n\t\tbuf += '<span class=\"col labelcol\">' + (move.category !== 'Status' ? ('<em>Power</em><br />' + (move.basePower || '&mdash;')) : '') + '</span> ';\n\t\tbuf += '<span class=\"col widelabelcol\"><em>Accuracy</em><br />' + (move.accuracy && move.accuracy !== true ? move.accuracy + '%' : '&mdash;') + '</span> ';\n\t\tbuf += '<span class=\"col pplabelcol\"><em>PP</em><br />' + pp + '</span> ';\n\n\t\t// desc\n\t\tbuf += '<span class=\"col movedesccol\">' + escapeHTML(move.shortDesc || move.desc) + '</span> ';\n\n\t\tbuf += '</a></li>';\n\n\t\treturn buf;\n\t};\n\tSearch.prototype.renderMoveRowInner = function (move, errorMessage) {\n\t\tvar attrs = '';\n\t\tif (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'moves/' + toID(move.name) + '\" data-target=\"push\"';\n\t\tvar buf = '<a' + attrs + ' data-entry=\"move|' + escapeHTML(move.name) + '\">';\n\n\t\t// name\n\t\tvar name = move.name;\n\t\tvar tagStart = (name.substr(0, 12) === 'Hidden Power' ? 12 : 0);\n\t\tif (tagStart) name = name.substr(0, tagStart) + '<small>' + move.name.substr(tagStart) + '</small>';\n\t\tbuf += '<span class=\"col movenamecol\">' + name + '</span> ';\n\n\t\t// error\n\t\tif (errorMessage) {\n\t\t\tbuf += errorMessage + '</a></li>';\n\t\t\treturn buf;\n\t\t}\n\n\t\t// type\n\t\tbuf += '<span class=\"col typecol\">';\n\t\tbuf += getTypeIcon(move.type);\n\t\tbuf += getCategoryIcon(move.category);\n\t\tbuf += '</span> ';\n\n\t\t// power, accuracy, pp\n\t\tvar pp = (move.pp === 1 || move.noPPBoosts ? move.pp : move.pp * 8 / 5);\n\t\tbuf += '<span class=\"col labelcol\">' + (move.category !== 'Status' ? ('<em>Power</em><br />' + (move.basePower || '&mdash;')) : '') + '</span> ';\n\t\tbuf += '<span class=\"col widelabelcol\"><em>Accuracy</em><br />' + (move.accuracy && move.accuracy !== true ? move.accuracy + '%' : '&mdash;') + '</span> ';\n\t\tbuf += '<span class=\"col pplabelcol\"><em>PP</em><br />' + pp + '</span> ';\n\n\t\t// desc\n\t\tbuf += '<span class=\"col movedesccol\">' + escapeHTML(move.shortDesc || move.desc) + '</span> ';\n\n\t\tbuf += '</a>';\n\n\t\treturn buf;\n\t};\n\tSearch.prototype.renderTaggedMoveRow = function (move, tag, errorMessage) {\n\t\tvar attrs = '';\n\t\tif (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'moves/' + toID(move.name) + '\" data-target=\"push\"';\n\t\tvar buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"move|' + escapeHTML(move.name) + '\">';\n\n\t\t// tag\n\t\tbuf += '<span class=\"col tagcol\">' + tag + '</span> ';\n\n\t\t// name\n\t\tvar name = move.name;\n\t\tif (name.substr(0, 12) === 'Hidden Power') name = 'Hidden Power';\n\t\tbuf += '<span class=\"col shortmovenamecol\">' + name + '</span> ';\n\n\t\t// error\n\t\tif (errorMessage) {\n\t\t\tbuf += errorMessage + '</a></li>';\n\t\t\treturn buf;\n\t\t}\n\n\t\t// type\n\t\tbuf += '<span class=\"col typecol\">';\n\t\tbuf += getTypeIcon(move.type);\n\t\tbuf += getCategoryIcon(move.category);\n\t\tbuf += '</span> ';\n\n\t\t// power, accuracy, pp\n\t\tbuf += '<span class=\"col labelcol\">' + (move.category !== 'Status' ? ('<em>Power</em><br />' + (move.basePower || '&mdash;')) : '') + '</span> ';\n\t\tbuf += '<span class=\"col widelabelcol\"><em>Accuracy</em><br />' + (move.accuracy && move.accuracy !== true ? move.accuracy + '%' : '&mdash;') + '</span> ';\n\t\tbuf += '<span class=\"col pplabelcol\"><em>PP</em><br />' + (move.noPPBoosts ? move.pp : move.pp * 8 / 5) + '</span> ';\n\n\t\t// desc\n\t\tbuf += '<span class=\"col movedesccol\">' + escapeHTML(move.shortDesc || move.desc) + '</span> ';\n\n\t\tbuf += '</a></li>';\n\n\t\treturn buf;\n\t};\n\n\tSearch.prototype.renderTypeRow = function (type, matchStart, matchLength, errorMessage) {\n\t\tvar attrs = '';\n\t\tif (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'types/' + toID(type.name) + '\" data-target=\"push\"';\n\t\tvar buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"type|' + escapeHTML(type.name) + '\">';\n\n\t\t// name\n\t\tvar name = type.name;\n\t\tif (matchLength) {\n\t\t\tname = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n\t\t}\n\t\tbuf += '<span class=\"col namecol\">' + name + '</span> ';\n\n\t\t// type\n\t\tbuf += '<span class=\"col typecol\">';\n\t\tbuf += getTypeIcon(type.name);\n\t\tbuf += '</span> ';\n\n\t\t// error\n\t\tif (errorMessage) {\n\t\t\tbuf += errorMessage + '</a></li>';\n\t\t\treturn buf;\n\t\t}\n\n\t\tbuf += '</a></li>';\n\n\t\treturn buf;\n\t};\n\tSearch.prototype.renderCategoryRow = function (category, matchStart, matchLength, errorMessage) {\n\t\tvar attrs = '';\n\t\tif (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'categories/' + category.id + '\" data-target=\"push\"';\n\t\tvar buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"category|' + escapeHTML(category.name) + '\">';\n\n\t\t// name\n\t\tvar name = category.name;\n\t\tif (matchLength) {\n\t\t\tname = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n\t\t}\n\t\tbuf += '<span class=\"col namecol\">' + name + '</span> ';\n\n\t\t// category\n\t\tbuf += '<span class=\"col typecol\">' + getCategoryIcon(category.name) + '</span> ';\n\n\t\t// error\n\t\tif (errorMessage) {\n\t\t\tbuf += errorMessage + '</a></li>';\n\t\t\treturn buf;\n\t\t}\n\n\t\tbuf += '</a></li>';\n\n\t\treturn buf;\n\t};\n\tSearch.prototype.renderArticleRow = function (article, matchStart, matchLength, errorMessage) {\n\t\tvar attrs = '';\n\t\tif (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'articles/' + article.id + '\" data-target=\"push\"';\n\t\tvar isSearchType = (article.id === 'pokemon' || article.id === 'moves');\n\t\tif (isSearchType) attrs = ' href=\"' + article.id + '/\" data-target=\"replace\"';\n\t\tvar buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"article|' + escapeHTML(article.name) + '\">';\n\n\t\t// name\n\t\tvar name = article.name;\n\t\tif (matchLength) {\n\t\t\tname = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n\t\t}\n\t\tbuf += '<span class=\"col namecol\">' + name + '</span> ';\n\n\t\t// article\n\t\tif (isSearchType) {\n\t\t\tbuf += '<span class=\"col movedesccol\">(search type)</span> ';\n\t\t} else {\n\t\t\tbuf += '<span class=\"col movedesccol\">(article)</span> ';\n\t\t}\n\n\t\t// error\n\t\tif (errorMessage) {\n\t\t\tbuf += errorMessage + '</a></li>';\n\t\t\treturn buf;\n\t\t}\n\n\t\tbuf += '</a></li>';\n\n\t\treturn buf;\n\t};\n\tSearch.prototype.renderEggGroupRow = function (egggroup, matchStart, matchLength, errorMessage) {\n\t\tvar attrs = '';\n\t\tif (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'egggroups/' + toID(egggroup.name) + '\" data-target=\"push\"';\n\t\tvar buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"egggroup|' + escapeHTML(egggroup.name) + '\">';\n\n\t\t// name\n\t\tvar name = egggroup.name;\n\t\tif (matchLength) {\n\t\t\tname = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n\t\t}\n\t\tbuf += '<span class=\"col namecol\">' + name + '</span> ';\n\n\t\t// error\n\t\tif (errorMessage) {\n\t\t\tbuf += errorMessage + '</a></li>';\n\t\t\treturn buf;\n\t\t}\n\n\t\tbuf += '</a></li>';\n\n\t\treturn buf;\n\t};\n\tSearch.prototype.renderTierRow = function (tier, matchStart, matchLength, errorMessage) {\n\t\tvar attrs = '';\n\t\tif (Search.urlRoot) attrs = ' href=\"' + Search.urlRoot + 'tiers/' + toID(tier.name) + '\" data-target=\"push\"';\n\t\tvar buf = '<li class=\"result\"><a' + attrs + ' data-entry=\"tier|' + escapeHTML(tier.name) + '\">';\n\n\t\t// name\n\t\tvar name = tier.name;\n\t\tif (matchLength) {\n\t\t\tname = name.substr(0, matchStart) + '<b>' + name.substr(matchStart, matchLength) + '</b>' + name.substr(matchStart + matchLength);\n\t\t}\n\t\tbuf += '<span class=\"col namecol\">' + name + '</span> ';\n\n\t\t// error\n\t\tif (errorMessage) {\n\t\t\tbuf += errorMessage + '</a></li>';\n\t\t\treturn buf;\n\t\t}\n\n\t\tbuf += '</a></li>';\n\n\t\treturn buf;\n\t};\n\n\tSearch.gen = 9;\n\tSearch.renderRow = Search.prototype.renderRow;\n\tSearch.renderPokemonRow = Search.prototype.renderPokemonRow;\n\tSearch.renderTaggedPokemonRowInner = Search.prototype.renderTaggedPokemonRowInner;\n\tSearch.renderItemRow = Search.prototype.renderItemRow;\n\tSearch.renderAbilityRow = Search.prototype.renderAbilityRow;\n\tSearch.renderMoveRow = Search.prototype.renderMoveRow;\n\tSearch.renderMoveRowInner = Search.prototype.renderMoveRowInner;\n\tSearch.renderTaggedMoveRow = Search.prototype.renderTaggedMoveRow;\n\tSearch.renderTypeRow = Search.prototype.renderTypeRow;\n\tSearch.renderCategoryRow = Search.prototype.renderCategoryRow;\n\tSearch.renderEggGroupRow = Search.prototype.renderEggGroupRow;\n\tSearch.renderTierRow = Search.prototype.renderTierRow;\n\n\texports.BattleSearch = Search;\n\n})(window, jQuery);\n","/**\n * Search\n *\n * Code for searching for dex information\n *\n *\n * @author Guangcong Luo <guangcongluo@gmail.com>\n * @license MIT\n */\n// Import data.js to ensure globals are available (BattlePokedex, etc.)\nimport './data.js';\n\n/** ID, SearchType, index (if alias), offset (if offset alias) */\nlet BattleSearchIndex = [];\nlet BattleSearchIndexOffset;\nfunction hasAbility(pokemon, ability) {\n    for (let key in pokemon.abilities) {\n        if (toID(pokemon.abilities[key]) == toID(ability)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction generateSearchIndex() {\n    let index = [];\n    index = index.concat(Object.keys(BattlePokedex).map((x) => x + \" pokemon\"));\n    index = index.concat(Object.keys(BattleMovedex).map((x) => x + \" move\"));\n    index = index.concat(Object.keys(BattleItems).map((x) => x + \" item\"));\n    index = index.concat(Object.keys(BattleAbilities).map((x) => x + \" ability\"));\n    index = index.concat(Object.keys(BattleTypeChart).map((x) => toID(x) + \" type\"));\n    index = index.concat([\"physical\", \"special\", \"status\"].map((x) => toID(x) + \" category\"));\n    index = index.concat([\n        \"monster\",\n        \"water1\",\n        \"bug\",\n        \"flying\",\n        \"field\",\n        \"fairy\",\n        \"grass\",\n        \"humanlike\",\n        \"water3\",\n        \"mineral\",\n        \"amorphous\",\n        \"water2\",\n        \"ditto\",\n        \"dragon\",\n        \"undiscovered\",\n    ].map((x) => toID(x) + \" egggroup\"));\n    index.sort();\n    // manually rearrange\n    index[index.indexOf(\"grass type\")] = \"grass egggroup\";\n    index[index.indexOf(\"grass egggroup\")] = \"grass type\";\n    index[index.indexOf(\"fairy type\")] = \"fairy egggroup\";\n    index[index.indexOf(\"fairy egggroup\")] = \"fairy type\";\n    index[index.indexOf(\"flying type\")] = \"flying egggroup\";\n    index[index.indexOf(\"flying egggroup\")] = \"flying type\";\n    index[index.indexOf(\"dragon type\")] = \"dragon egggroup\";\n    index[index.indexOf(\"dragon egggroup\")] = \"dragon type\";\n    index[index.indexOf(\"bug type\")] = \"bug egggroup\";\n    index[index.indexOf(\"bug egggroup\")] = \"bug type\";\n    index[index.indexOf(\"psychic type\")] = \"psychic move\";\n    index[index.indexOf(\"psychic move\")] = \"psychic type\";\n    if (getID(BattlePokedex, \"ditto\")) {\n        index[index.indexOf(\"ditto pokemon\")] = \"ditto egggroup\";\n        index[index.indexOf(\"ditto egggroup\")] = \"ditto pokemon\";\n    }\n    BattleSearchIndex = index.map((x) => {\n        let split = x.split(\" \");\n        if (split.length > 3) {\n            split[3] = Number(split[3]);\n            split[2] = index.indexOf(split[2] + \" \" + split[1]);\n        }\n        return split;\n    });\n    BattleSearchIndexOffset = BattleSearchIndex.map((entry, i) => {\n        var _a, _b, _c, _d;\n        const id = entry[0];\n        let name = \"\";\n        switch (entry[1]) {\n            case \"pokemon\":\n                name = (_a = getID(BattlePokedex, id).name) !== null && _a !== void 0 ? _a : \"\";\n                break;\n            case \"move\":\n                name = (_b = getID(BattleMovedex, id).name) !== null && _b !== void 0 ? _b : \"\";\n                break;\n            case \"item\":\n                name = (_c = getID(BattleItems, id).name) !== null && _c !== void 0 ? _c : \"\";\n                break;\n            case \"ability\":\n                name = (_d = getID(BattleAbilities, id).name) !== null && _d !== void 0 ? _d : \"\";\n                break;\n        }\n        let res = \"\";\n        let nonAlnum = 0;\n        for (let i = 0, j = 0; i < id.length; i++, j++) {\n            while (!/[a-zA-Z0-9]/.test(name[j])) {\n                j++;\n                nonAlnum++;\n            }\n            res += nonAlnum;\n        }\n        if (nonAlnum)\n            return res;\n        return \"\";\n    });\n}\n/**\n * Backend for search UIs.\n */\nclass DexSearch {\n    constructor(searchType = \"\", formatid = \"\", species = \"\") {\n        this.query = \"\";\n        this.typedSearch = null;\n        this.results = null;\n        this.exactMatch = false;\n        this.firstPokemonColumn = \"Number\";\n        /**\n         * Column to sort by. Default is `null`, a smart sort determined by how good\n         * things are according to the base filters, falling back to dex number (for\n         * Pokemon) and name (for everything else).\n         */\n        this.sortCol = null;\n        this.reverseSort = false;\n        /**\n         * Filters for the search result. Does not include the two base filters\n         * (format and species).\n         */\n        this.filters = null;\n        generateSearchIndex();\n        this.setType(searchType, formatid, species);\n    }\n    getTypedSearch(searchType, format = \"\", speciesOrSet) {\n        if (!searchType)\n            return null;\n        switch (searchType) {\n            case \"pokemon\":\n                return new BattlePokemonSearch(\"pokemon\", format, speciesOrSet);\n            case \"item\":\n                return new BattleItemSearch(\"item\", format, speciesOrSet);\n            case \"move\":\n                return new BattleMoveSearch(\"move\", format, speciesOrSet);\n            case \"ability\":\n                return new BattleAbilitySearch(\"ability\", format, speciesOrSet);\n            case \"type\":\n                return new BattleTypeSearch(\"type\", format, speciesOrSet);\n            case \"category\":\n                return new BattleCategorySearch(\"category\", format, speciesOrSet);\n        }\n        return null;\n    }\n    find(query) {\n        var _a;\n        query = toID(query);\n        if (this.query === query && this.results) {\n            return false;\n        }\n        this.query = query;\n        if (!query) {\n            this.results =\n                ((_a = this.typedSearch) === null || _a === void 0 ? void 0 : _a.getResults(this.filters, this.sortCol, this.reverseSort)) || [];\n        }\n        else {\n            this.results = this.textSearch(query);\n        }\n        return true;\n    }\n    setType(searchType, format = \"\", speciesOrSet) {\n        var _a;\n        // invalidate caches\n        this.results = null;\n        if (searchType !== ((_a = this.typedSearch) === null || _a === void 0 ? void 0 : _a.searchType)) {\n            this.filters = null;\n            this.sortCol = null;\n        }\n        this.typedSearch = this.getTypedSearch(searchType, format, speciesOrSet);\n    }\n    addFilter(entry) {\n        if (!this.typedSearch)\n            return false;\n        let [type] = entry;\n        if (this.typedSearch.searchType === \"pokemon\") {\n            if (type === this.sortCol)\n                this.sortCol = null;\n            if (![\"type\", \"move\", \"ability\", \"egggroup\", \"tier\"].includes(type))\n                return false;\n            if (type === \"move\")\n                entry[1] = toID(entry[1]);\n            if (!this.filters)\n                this.filters = [];\n            this.results = null;\n            for (const filter of this.filters) {\n                if (filter[0] === type && filter[1] === entry[1]) {\n                    return true;\n                }\n            }\n            this.filters.push(entry);\n            return true;\n        }\n        else if (this.typedSearch.searchType === \"move\") {\n            if (type === this.sortCol)\n                this.sortCol = null;\n            if (![\"type\", \"category\", \"pokemon\"].includes(type))\n                return false;\n            if (type === \"pokemon\")\n                entry[1] = toID(entry[1]);\n            if (!this.filters)\n                this.filters = [];\n            this.filters.push(entry);\n            this.results = null;\n            return true;\n        }\n        return false;\n    }\n    removeFilter(entry) {\n        if (!this.filters)\n            return false;\n        if (entry) {\n            const filterid = entry.join(\":\");\n            let deleted = null;\n            // delete specific filter\n            for (let i = 0; i < this.filters.length; i++) {\n                if (filterid === this.filters[i].join(\":\")) {\n                    deleted = this.filters[i];\n                    this.filters.splice(i, 1);\n                    break;\n                }\n            }\n            if (!deleted)\n                return false;\n        }\n        else {\n            this.filters.pop();\n        }\n        if (!this.filters.length)\n            this.filters = null;\n        this.results = null;\n        return true;\n    }\n    toggleSort(sortCol) {\n        if (this.sortCol === sortCol) {\n            if (!this.reverseSort) {\n                this.reverseSort = true;\n            }\n            else {\n                this.sortCol = null;\n                this.reverseSort = false;\n            }\n        }\n        else {\n            this.sortCol = sortCol;\n            this.reverseSort = false;\n        }\n        this.results = null;\n    }\n    filterLabel(filterType) {\n        if (this.typedSearch && this.typedSearch.searchType !== filterType) {\n            return \"Filter\";\n        }\n        return null;\n    }\n    illegalLabel(id) {\n        var _a, _b;\n        return ((_b = (_a = this.typedSearch) === null || _a === void 0 ? void 0 : _a.illegalReasons) === null || _b === void 0 ? void 0 : _b[id]) || null;\n    }\n    textSearch(query) {\n        var _a, _b, _c;\n        query = toID(query);\n        this.exactMatch = false;\n        let searchType = ((_a = this.typedSearch) === null || _a === void 0 ? void 0 : _a.searchType) || \"\";\n        // If searchType exists, we're searching mainly for results of that type.\n        // We'll still search for results of other types, but those results\n        // will only be used to filter results for that type.\n        let searchTypeIndex = searchType ? DexSearch.typeTable[searchType] : -1;\n        /** searching for \"Psychic type\" will make the type come up over the move */\n        let qFilterType = \"\";\n        if (query.slice(-4) === \"type\") {\n            if (query.slice(0, -4) in BattleTypeChart) {\n                query = query.slice(0, -4);\n                qFilterType = \"type\";\n            }\n        }\n        // i represents the location of the search index we're looking at\n        let i = DexSearch.getClosest(query);\n        this.exactMatch = BattleSearchIndex[i][0] === query;\n        // Even with output buffer buckets, we make multiple passes through\n        // the search index. searchPasses is a queue of which pass we're on:\n        // [passType, i, query]\n        // By doing an alias pass after the normal pass, we ensure that\n        // mid-word matches only display after start matches.\n        let passType = \"\";\n        let searchPasses = [[\"normal\", i, query]];\n        // For performance reasons, only do an alias pass if query is at\n        // least 2 chars long\n        if (query.length > 1)\n            searchPasses.push([\"alias\", i, query]);\n        // If there are no matches starting with query: Do a fuzzy match pass\n        // Fuzzy matches will still be shown after alias matches\n        if (!this.exactMatch &&\n            BattleSearchIndex[i][0].substr(0, query.length) !== query) {\n            // No results start with this. Do a fuzzy match pass.\n            let matchLength = query.length - 1;\n            if (!i)\n                i++;\n            while (matchLength &&\n                BattleSearchIndex[i][0].substr(0, matchLength) !==\n                    query.substr(0, matchLength) &&\n                BattleSearchIndex[i - 1][0].substr(0, matchLength) !==\n                    query.substr(0, matchLength)) {\n                matchLength--;\n            }\n            let matchQuery = query.substr(0, matchLength);\n            while (i >= 1 &&\n                BattleSearchIndex[i - 1][0].substr(0, matchLength) === matchQuery)\n                i--;\n            searchPasses.push([\"fuzzy\", i, \"\"]);\n        }\n        // We split the output buffers into 8 buckets.\n        // Bucket 0 is usually unused, and buckets 1-7 represent\n        // pokemon, types, moves, etc (see typeTable).\n        // When we're done, the buffers are concatenated together to form\n        // our results, with each buffer getting its own header, unlike\n        // multiple-pass results, which have no header.\n        // Notes:\n        // - if we have a searchType, that searchType's buffer will be on top\n        let bufs = [[], [], [], [], [], [], [], [], [], []];\n        let topbufIndex = -1;\n        let count = 0;\n        let nearMatch = false;\n        /** [type, id, typeIndex] */\n        let instafilter = null;\n        let instafilterSort = [0, 1, 2, 5, 4, 3, 6, 7, 8];\n        let illegal = (_b = this.typedSearch) === null || _b === void 0 ? void 0 : _b.illegalReasons;\n        // We aren't actually looping through the entirety of the searchIndex\n        for (i = 0; i < BattleSearchIndex.length; i++) {\n            if (!passType) {\n                let searchPass = searchPasses.shift();\n                if (!searchPass)\n                    break;\n                passType = searchPass[0];\n                i = searchPass[1];\n                query = searchPass[2];\n            }\n            let entry = BattleSearchIndex[i];\n            let id = entry[0];\n            let type = entry[1];\n            if (!id)\n                break;\n            if (passType === \"fuzzy\") {\n                // fuzzy match pass; stop after 2 results\n                if (count >= 2) {\n                    passType = \"\";\n                    continue;\n                }\n                nearMatch = true;\n            }\n            else if (passType === \"exact\") {\n                // exact pass; stop after 1 result\n                if (count >= 1) {\n                    passType = \"\";\n                    continue;\n                }\n            }\n            else if (id.substr(0, query.length) !== query) {\n                // regular pass, time to move onto our next match\n                passType = \"\";\n                continue;\n            }\n            if (entry.length > 2) {\n                // alias entry\n                if (passType !== \"alias\")\n                    continue;\n            }\n            else {\n                // normal entry\n                if (passType === \"alias\")\n                    continue;\n            }\n            let typeIndex = DexSearch.typeTable[type];\n            // For performance, with a query length of 1, we only fill the first bucket\n            if (query.length === 1 &&\n                typeIndex !== (searchType ? searchTypeIndex : 1))\n                continue;\n            // For pokemon queries, accept types/tier/abilities/moves/eggroups as filters\n            if (searchType === \"pokemon\" && (typeIndex === 5 || typeIndex > 7))\n                continue;\n            // For move queries, accept types/categories as filters\n            if (searchType === \"move\" &&\n                ((typeIndex !== 8 && typeIndex > 4) || typeIndex === 3))\n                continue;\n            // For move queries in the teambuilder, don't accept pokemon as filters\n            if (searchType === \"move\" && illegal && typeIndex === 1)\n                continue;\n            // For ability/item queries, don't accept anything else as a filter\n            if ((searchType === \"ability\" || searchType === \"item\") &&\n                typeIndex !== searchTypeIndex)\n                continue;\n            // Query was a type name followed 'type'; only show types\n            if (qFilterType === \"type\" && typeIndex !== 2)\n                continue;\n            // hardcode cases of duplicate non-consecutive aliases\n            if ((id === \"megax\" || id === \"megay\") && \"mega\".startsWith(query))\n                continue;\n            let matchStart = 0;\n            let matchEnd = 0;\n            if (passType === \"alias\") {\n                // alias entry\n                // [aliasid, type, originalid, matchStart, originalindex]\n                matchStart = entry[3];\n                let originalIndex = entry[2];\n                if (matchStart) {\n                    matchEnd = matchStart + query.length;\n                    matchStart +=\n                        (BattleSearchIndexOffset[originalIndex][matchStart] || \"0\").charCodeAt(0) - 48;\n                    matchEnd +=\n                        (BattleSearchIndexOffset[originalIndex][matchEnd - 1] || \"0\").charCodeAt(0) - 48;\n                }\n                id = BattleSearchIndex[originalIndex][0];\n            }\n            else {\n                matchEnd = query.length;\n                if (matchEnd)\n                    matchEnd +=\n                        (BattleSearchIndexOffset[i][matchEnd - 1] || \"0\").charCodeAt(0) -\n                            48;\n            }\n            if (searchType && searchTypeIndex !== typeIndex) {\n                // This is a filter, set it as an instafilter candidate\n                if (!instafilter ||\n                    instafilterSort[typeIndex] < instafilterSort[instafilter[2]]) {\n                    instafilter = [type, id, typeIndex];\n                }\n            }\n            // show types above Arceus formes\n            if (topbufIndex < 0 &&\n                searchTypeIndex < 2 &&\n                passType === \"alias\" &&\n                !bufs[1].length &&\n                bufs[2].length) {\n                topbufIndex = 2;\n            }\n            if (illegal && typeIndex === searchTypeIndex) {\n                // Always show illegal results under legal results.\n                // This is done by putting legal results (and the type header)\n                // in bucket 0, and illegal results in the searchType's bucket.\n                // searchType buckets are always on top (but under bucket 0), so\n                // illegal results will be seamlessly right under legal results.\n                if (!bufs[typeIndex].length && !bufs[0].length) {\n                    bufs[0] = [[\"header\", DexSearch.typeName[type]]];\n                }\n                if (!(id in illegal))\n                    typeIndex = 0;\n            }\n            else {\n                if (!bufs[typeIndex].length) {\n                    bufs[typeIndex] = [[\"header\", DexSearch.typeName[type]]];\n                }\n            }\n            // don't match duplicate aliases\n            let curBufLength = passType === \"alias\" && bufs[typeIndex].length;\n            if (curBufLength && bufs[typeIndex][curBufLength - 1][1] === id)\n                continue;\n            bufs[typeIndex].push([type, id, matchStart, matchEnd]);\n            count++;\n        }\n        let topbuf = [];\n        if (nearMatch) {\n            topbuf = [\n                [\n                    \"html\",\n                    `<em>No exact match found. The closest matches alphabetically are:</em>`,\n                ],\n            ];\n        }\n        if (topbufIndex >= 0) {\n            topbuf = topbuf.concat(bufs[topbufIndex]);\n            bufs[topbufIndex] = [];\n        }\n        if (searchTypeIndex >= 0) {\n            topbuf = topbuf.concat(bufs[0]);\n            topbuf = topbuf.concat(bufs[searchTypeIndex]);\n            bufs[searchTypeIndex] = [];\n            bufs[0] = [];\n        }\n        if (instafilter && count < 20) {\n            // Result count is less than 20, so we can instafilter\n            bufs.push(this.instafilter(searchType, instafilter[0], instafilter[1]));\n        }\n        this.results = Array.prototype.concat.apply(topbuf, bufs);\n        return (_c = this.results) !== null && _c !== void 0 ? _c : [];\n    }\n    instafilter(searchType, fType, fId) {\n        var _a;\n        let buf = [];\n        let illegalBuf = [];\n        let illegal = (_a = this.typedSearch) === null || _a === void 0 ? void 0 : _a.illegalReasons;\n        if (searchType === \"pokemon\") {\n            switch (fType) {\n                case \"type\":\n                    let type = (fId.charAt(0).toUpperCase() + fId.slice(1));\n                    buf.push([\"header\", `${type}-type Pok&eacute;mon`]);\n                    for (let id in BattlePokedex) {\n                        if (!BattlePokedex[id].types)\n                            continue;\n                        if (BattlePokedex[id].types.includes(type)) {\n                            (illegal && id in illegal ? illegalBuf : buf).push([\n                                \"pokemon\",\n                                id,\n                            ]);\n                        }\n                    }\n                    break;\n                case \"ability\":\n                    let ability = getID(BattleAbilities, fId).name;\n                    buf.push([\"header\", `${ability} Pok&eacute;mon`]);\n                    for (let id in BattlePokedex) {\n                        if (!BattlePokedex[id].abilities)\n                            continue;\n                        if (hasAbility(BattlePokedex[id], ability)) {\n                            (illegal && id in illegal ? illegalBuf : buf).push([\n                                \"pokemon\",\n                                id,\n                            ]);\n                        }\n                    }\n                    break;\n            }\n        }\n        else if (searchType === \"move\") {\n            switch (fType) {\n                case \"type\":\n                    let type = fId.charAt(0).toUpperCase() + fId.slice(1);\n                    buf.push([\"header\", `${type}-type moves`]);\n                    for (let id in BattleMovedex) {\n                        if (BattleMovedex[id].type === type) {\n                            (illegal && id in illegal ? illegalBuf : buf).push([\n                                \"move\",\n                                id,\n                            ]);\n                        }\n                    }\n                    break;\n                case \"category\":\n                    let category = fId.charAt(0).toUpperCase() + fId.slice(1);\n                    buf.push([\"header\", `${category} moves`]);\n                    for (let id in BattleMovedex) {\n                        if (BattleMovedex[id].category === category) {\n                            (illegal && id in illegal ? illegalBuf : buf).push([\n                                \"move\",\n                                id,\n                            ]);\n                        }\n                    }\n                    break;\n            }\n        }\n        return [...buf, ...illegalBuf];\n    }\n    static getClosest(query) {\n        // binary search through the index!\n        let left = 0;\n        let right = BattleSearchIndex.length - 1;\n        while (right > left) {\n            let mid = Math.floor((right - left) / 2 + left);\n            if (BattleSearchIndex[mid][0] === query &&\n                (mid === 0 || BattleSearchIndex[mid - 1][0] !== query)) {\n                // that's us\n                return mid;\n            }\n            else if (BattleSearchIndex[mid][0] < query) {\n                left = mid + 1;\n            }\n            else {\n                right = mid - 1;\n            }\n        }\n        if (left >= BattleSearchIndex.length - 1)\n            left = BattleSearchIndex.length - 1;\n        else if (BattleSearchIndex[left + 1][0] &&\n            BattleSearchIndex[left][0] < query)\n            left++;\n        if (left && BattleSearchIndex[left - 1][0] === query)\n            left--;\n        return left;\n    }\n}\nDexSearch.typeTable = {\n    pokemon: 1,\n    type: 2,\n    tier: 3,\n    move: 4,\n    item: 5,\n    ability: 6,\n    egggroup: 7,\n    category: 8,\n    article: 9,\n};\nDexSearch.typeName = {\n    pokemon: \"Pok&eacute;mon\",\n    type: \"Type\",\n    tier: \"Tiers\",\n    move: \"Moves\",\n    item: \"Items\",\n    ability: \"Abilities\",\n    egggroup: \"Egg group\",\n    category: \"Category\",\n    article: \"Article\",\n};\nclass BattleTypedSearch {\n    constructor(searchType, format = \"\", speciesOrSet = \"\") {\n        /**\n         * `species` is the second of two base filters. It constrains results to\n         * things that species can use, and affects the default sort.\n         */\n        this.species = \"\";\n        /**\n         * `set` is a pseudo-base filter; it has minor effects on move sorting.\n         * (Abilities/items can affect what moves are sorted as usable.)\n         */\n        this.set = null;\n        /**\n         * Cached copy of what the results list would be with only base filters\n         * (i.e. with an empty `query` and `filters`)\n         */\n        this.baseResults = null;\n        /**\n         * Cached copy of all results not in `baseResults` - mostly in case a user\n         * is wondering why a specific result isn't showing up.\n         */\n        this.baseIllegalResults = null;\n        this.illegalReasons = null;\n        this.results = null;\n        this.sortRow = null;\n        this.searchType = searchType;\n        this.baseResults = null;\n        this.baseIllegalResults = null;\n        this.species = \"\";\n        this.set = null;\n        if (typeof speciesOrSet === \"string\") {\n            if (speciesOrSet)\n                this.species = speciesOrSet;\n        }\n        else {\n            this.set = speciesOrSet;\n            this.species = toID(this.set.species);\n        }\n        if (!searchType || !this.set)\n            return;\n    }\n    getResults(filters, sortCol, reverseSort) {\n        if (sortCol === \"type\") {\n            return [\n                this.sortRow,\n                ...BattleTypeSearch.prototype.getDefaultResults.call(this),\n            ];\n        }\n        else if (sortCol === \"category\") {\n            return [\n                this.sortRow,\n                ...BattleCategorySearch.prototype.getDefaultResults.call(this),\n            ];\n        }\n        else if (sortCol === \"ability\") {\n            return [\n                this.sortRow,\n                ...BattleAbilitySearch.prototype.getDefaultResults.call(this),\n            ];\n        }\n        if (!this.baseResults) {\n            this.baseResults = this.getBaseResults();\n        }\n        if (!this.baseIllegalResults) {\n            const legalityFilter = {};\n            for (const [resultType, value] of this.baseResults) {\n                if (resultType === this.searchType)\n                    legalityFilter[value] = 1;\n            }\n            this.baseIllegalResults = [];\n            this.illegalReasons = {};\n            for (const id in this.getTable()) {\n                if (!(id in legalityFilter)) {\n                    this.baseIllegalResults.push([this.searchType, id]);\n                    this.illegalReasons[id] = \"Illegal\";\n                }\n            }\n        }\n        let results;\n        let illegalResults;\n        if (filters) {\n            results = [];\n            illegalResults = [];\n            for (const result of this.baseResults) {\n                if (this.filter(result, filters)) {\n                    if (results.length &&\n                        result[0] === \"header\" &&\n                        results[results.length - 1][0] === \"header\") {\n                        results[results.length - 1] = result;\n                    }\n                    else {\n                        results.push(result);\n                    }\n                }\n            }\n            if (results.length && results[results.length - 1][0] === \"header\") {\n                results.pop();\n            }\n            for (const result of this.baseIllegalResults) {\n                if (this.filter(result, filters)) {\n                    illegalResults.push(result);\n                }\n            }\n        }\n        else {\n            results = [...this.baseResults];\n            illegalResults = null;\n        }\n        if (sortCol) {\n            results = results.filter(([rowType]) => rowType === this.searchType);\n            results = this.sort(results, sortCol, reverseSort);\n            if (illegalResults) {\n                illegalResults = illegalResults.filter(([rowType]) => rowType === this.searchType);\n                illegalResults = this.sort(illegalResults, sortCol, reverseSort);\n            }\n        }\n        if (this.sortRow) {\n            results = [this.sortRow, ...results];\n        }\n        if (illegalResults && illegalResults.length) {\n            results = [...results, [\"header\", \"Illegal results\"], ...illegalResults];\n        }\n        return results;\n    }\n}\nclass BattlePokemonSearch extends BattleTypedSearch {\n    constructor() {\n        super(...arguments);\n        this.sortRow = [\"sortpokemon\", \"\"];\n    }\n    filter(row, filters) {\n        if (!filters)\n            return true;\n        if (row[0] !== \"pokemon\")\n            return true;\n        const poke = getID(BattlePokedex, row[1]);\n        for (const [filterType, value] of filters) {\n            switch (filterType) {\n                case \"type\":\n                    if (poke.types.every((t) => t != value))\n                        return false;\n                    break;\n                case \"move\":\n                    if (!canLearn(poke.id, value))\n                        return false;\n                    break;\n                case \"ability\":\n                    if (!hasAbility(poke, value))\n                        return false;\n                    break;\n                case \"egggroup\":\n                    if (poke.eggGroups.every((t) => t != value))\n                        return false;\n                    break;\n            }\n        }\n        return true;\n    }\n    getTable() {\n        return BattlePokedex;\n    }\n    getDefaultResults() {\n        const groups = {};\n        for (const id in BattlePokedex) {\n            const p = BattlePokedex[id];\n            if (!p)\n                continue;\n            const baseId = toID(p.baseSpecies || p.name);\n            if (!groups[baseId]) {\n                groups[baseId] = { base: id, num: p.num || 0, forms: [] };\n            }\n            // Identify base (prefer the entry whose name equals baseSpecies or has no forme)\n            const isBase = !p.forme || p.name === p.baseSpecies;\n            if (isBase) {\n                groups[baseId].base = id;\n                groups[baseId].num = p.num || groups[baseId].num;\n            }\n            else {\n                groups[baseId].forms.push(id);\n            }\n        }\n        // Sort forms within each group deterministically (by name/forme)\n        for (const baseId in groups) {\n            groups[baseId].forms.sort((a, b) => {\n                const pa = BattlePokedex[a];\n                const pb = BattlePokedex[b];\n                const fa = (pa.forme || pa.name).toLowerCase();\n                const fb = (pb.forme || pb.name).toLowerCase();\n                return fa < fb ? -1 : fa > fb ? 1 : 0;\n            });\n        }\n        // Order groups by dex number then base id\n        const ordered = Object.values(groups).sort((a, b) => a.num - b.num || (a.base < b.base ? -1 : a.base > b.base ? 1 : 0));\n        // Build global form order mapping for suffix rendering in UI\n        window.BattleFormOrder = {};\n        for (const g of ordered) {\n            window.BattleFormOrder[toID(BattlePokedex[g.base].baseSpecies || BattlePokedex[g.base].name)] = g.forms.slice();\n        }\n        const results = [];\n        for (const g of ordered) {\n            const baseId = g.base;\n            switch (baseId) {\n                case \"bulbasaur\":\n                    results.push([\"header\", \"Generation 1\"]);\n                    break;\n                case \"chikorita\":\n                    results.push([\"header\", \"Generation 2\"]);\n                    break;\n                case \"treecko\":\n                    results.push([\"header\", \"Generation 3\"]);\n                    break;\n                case \"turtwig\":\n                    results.push([\"header\", \"Generation 4\"]);\n                    break;\n                case \"victini\":\n                    results.push([\"header\", \"Generation 5\"]);\n                    break;\n                case \"chespin\":\n                    results.push([\"header\", \"Generation 6\"]);\n                    break;\n                case \"rowlet\":\n                    results.push([\"header\", \"Generation 7\"]);\n                    break;\n                case \"grookey\":\n                    results.push([\"header\", \"Generation 8\"]);\n                    break;\n                case \"sprigatito\":\n                    results.push([\"header\", \"Generation 9\"]);\n                    break;\n                case \"missingno\":\n                    results.push([\"header\", \"Glitch\"]);\n                    break;\n                case \"syclar\":\n                    results.push([\"header\", \"CAP\"]);\n                    break;\n                case \"pikachucosplay\":\n                    continue; // skip cosplay aggregate\n            }\n            results.push([\"pokemon\", baseId]);\n            for (const fid of g.forms) {\n                results.push([\"pokemon\", fid]);\n            }\n        }\n        return results;\n    }\n    getBaseResults() {\n        return this.getDefaultResults();\n    }\n    sort(results, sortCol, reverseSort) {\n        const sortOrder = reverseSort ? -1 : 1;\n        if ([\"hp\", \"atk\", \"def\", \"spa\", \"spd\", \"spe\"].includes(sortCol)) {\n            return results.sort(([rowType1, id1], [rowType2, id2]) => {\n                const stat1 = getID(BattlePokedex, id1).baseStats[sortCol];\n                const stat2 = getID(BattlePokedex, id2).baseStats[sortCol];\n                return (stat2 - stat1) * sortOrder;\n            });\n        }\n        else if (sortCol === \"bst\") {\n            return results.sort(([rowType1, id1], [rowType2, id2]) => {\n                const base1 = getID(BattlePokedex, id1).baseStats;\n                const base2 = getID(BattlePokedex, id2).baseStats;\n                const bst1 = base1.hp + base1.atk + base1.def + base1.spa + base1.spd + base1.spe;\n                const bst2 = base2.hp + base2.atk + base2.def + base2.spa + base2.spd + base2.spe;\n                return (bst2 - bst1) * sortOrder;\n            });\n        }\n        else if (sortCol === \"name\") {\n            return results.sort(([rowType1, id1], [rowType2, id2]) => {\n                const name1 = id1;\n                const name2 = id2;\n                return (name1 < name2 ? -1 : name1 > name2 ? 1 : 0) * sortOrder;\n            });\n        }\n        throw new Error(\"invalid sortcol\");\n    }\n}\nclass BattleAbilitySearch extends BattleTypedSearch {\n    getTable() {\n        return BattleAbilities;\n    }\n    getDefaultResults() {\n        const results = [];\n        for (let id in BattleAbilities) {\n            results.push([\"ability\", id]);\n        }\n        return results;\n    }\n    getBaseResults() {\n        return this.getDefaultResults();\n    }\n    filter(row, filters) {\n        if (!filters)\n            return true;\n        if (row[0] !== \"ability\")\n            return true;\n        const ability = getID(BattleAbilities, row[1]);\n        for (const [filterType, value] of filters) {\n            switch (filterType) {\n                case \"pokemon\":\n                    if (!hasAbility(getID(BattlePokedex, value), ability.name))\n                        return false;\n                    break;\n            }\n        }\n        return true;\n    }\n    sort(results, sortCol, reverseSort) {\n        throw new Error(\"invalid sortcol\");\n    }\n}\nclass BattleItemSearch extends BattleTypedSearch {\n    getTable() {\n        return BattleItems;\n    }\n    getDefaultResults() {\n        let results = [];\n        results.push([\"header\", \"Items\"]);\n        for (let id in BattleItems) {\n            results.push([\"item\", id]);\n        }\n        return results;\n    }\n    getBaseResults() {\n        return this.getDefaultResults();\n    }\n    filter(row, filters) {\n        throw new Error(\"invalid filter\");\n    }\n    sort(results, sortCol, reverseSort) {\n        throw new Error(\"invalid sortcol\");\n    }\n}\nclass BattleMoveSearch extends BattleTypedSearch {\n    constructor() {\n        super(...arguments);\n        this.sortRow = [\"sortmove\", \"\"];\n    }\n    getTable() {\n        return BattleMovedex;\n    }\n    getDefaultResults() {\n        let results = [];\n        results.push([\"header\", \"Moves\"]);\n        for (let id in BattleMovedex) {\n            results.push([\"move\", id]);\n        }\n        return results;\n    }\n    getBaseResults() {\n        return this.getDefaultResults();\n    }\n    filter(row, filters) {\n        if (!filters)\n            return true;\n        if (row[0] !== \"move\")\n            return true;\n        const move = getID(BattleMovedex, row[1]);\n        for (const [filterType, value] of filters) {\n            switch (filterType) {\n                case \"type\":\n                    if (move.type !== value)\n                        return false;\n                    break;\n                case \"category\":\n                    if (move.category !== value)\n                        return false;\n                    break;\n                case \"pokemon\":\n                    if (!canLearn(value, move.id))\n                        return false;\n                    break;\n            }\n        }\n        return true;\n    }\n    sort(results, sortCol, reverseSort) {\n        const sortOrder = reverseSort ? -1 : 1;\n        switch (sortCol) {\n            case \"power\":\n                let powerTable = {\n                    return: 102,\n                    frustration: 102,\n                    spitup: 300,\n                    trumpcard: 200,\n                    naturalgift: 80,\n                    grassknot: 120,\n                    lowkick: 120,\n                    gyroball: 150,\n                    electroball: 150,\n                    flail: 200,\n                    reversal: 200,\n                    present: 120,\n                    wringout: 120,\n                    crushgrip: 120,\n                    heatcrash: 120,\n                    heavyslam: 120,\n                    fling: 130,\n                    magnitude: 150,\n                    beatup: 24,\n                    punishment: 1020,\n                    psywave: 1250,\n                    nightshade: 1200,\n                    seismictoss: 1200,\n                    dragonrage: 1140,\n                    sonicboom: 1120,\n                    superfang: 1350,\n                    endeavor: 1399,\n                    sheercold: 1501,\n                    fissure: 1500,\n                    horndrill: 1500,\n                    guillotine: 1500,\n                };\n                return results.sort(([rowType1, id1], [rowType2, id2]) => {\n                    let move1 = getID(BattleMovedex, id1);\n                    let move2 = getID(BattleMovedex, id2);\n                    let pow1 = move1.basePower ||\n                        powerTable[id1] ||\n                        (move1.category === \"Status\" ? -1 : 1400);\n                    let pow2 = move2.basePower ||\n                        powerTable[id2] ||\n                        (move2.category === \"Status\" ? -1 : 1400);\n                    return (pow2 - pow1) * sortOrder;\n                });\n            case \"accuracy\":\n                return results.sort(([rowType1, id1], [rowType2, id2]) => {\n                    let accuracy1 = getID(BattleMovedex, id1).accuracy || 0;\n                    let accuracy2 = getID(BattleMovedex, id2).accuracy || 0;\n                    if (accuracy1 === true)\n                        accuracy1 = 101;\n                    if (accuracy2 === true)\n                        accuracy2 = 101;\n                    return (accuracy2 - accuracy1) * sortOrder;\n                });\n            case \"pp\":\n                return results.sort(([rowType1, id1], [rowType2, id2]) => {\n                    let pp1 = getID(BattleMovedex, id1).pp || 0;\n                    let pp2 = getID(BattleMovedex, id2).pp || 0;\n                    return (pp2 - pp1) * sortOrder;\n                });\n            case \"name\":\n                return results.sort(([rowType1, id1], [rowType2, id2]) => {\n                    const name1 = id1;\n                    const name2 = id2;\n                    return (name1 < name2 ? -1 : name1 > name2 ? 1 : 0) * sortOrder;\n                });\n        }\n        throw new Error(\"invalid sortcol\");\n    }\n}\nclass BattleCategorySearch extends BattleTypedSearch {\n    getTable() {\n        return { physical: 1, special: 1, status: 1 };\n    }\n    getDefaultResults() {\n        return [\n            [\"category\", \"physical\"],\n            [\"category\", \"special\"],\n            [\"category\", \"status\"],\n        ];\n    }\n    getBaseResults() {\n        return this.getDefaultResults();\n    }\n    filter(row, filters) {\n        throw new Error(\"invalid filter\");\n    }\n    sort(results, sortCol, reverseSort) {\n        throw new Error(\"invalid sortcol\");\n    }\n}\nclass BattleTypeSearch extends BattleTypedSearch {\n    getTable() {\n        return BattleTypeChart;\n    }\n    getDefaultResults() {\n        const results = [];\n        for (let id in BattleTypeChart) {\n            results.push([\"type\", id]);\n        }\n        return results;\n    }\n    getBaseResults() {\n        return this.getDefaultResults();\n    }\n    filter(row, filters) {\n        throw new Error(\"invalid filter\");\n    }\n    sort(results, sortCol, reverseSort) {\n        throw new Error(\"invalid sortcol\");\n    }\n}\nwindow.DexSearch = DexSearch;\nexport {};\n"],"names":["parcelRequire","$parcel$global","globalThis","parcelRegister","register","module","exports","$6KOho","window","$","a","__esModule","default","Search","elem","viewport","$el","el","$viewport","urlRoot","q","undefined","exactMatch","resultSet","filters","sortCol","renderedIndex","renderingDone","externalFilter","cur","$inputEl","gen","mod","engine","DexSearch","search","self","on","e","preventDefault","updateScroll","removeFilter","focus","stopPropagation","currentTarget","dataset","sort","toggleSort","find","prototype","query","firstElem","results","typedSearch","searchType","concat","length","includes","sortRow","getFilterText","addFilter","node","entry","split","result","value","buf","i","text","getID","BattleMovedex","name","BattlePokedex","escapeHTML","join","forceAdd","top","scrollTop","bottom","height","windowHeight","finalIndex","Math","floor","label","row","errorMessage","filterLabel","illegalLabel","mStart","mEnd","renderRow","moreVisible","remove","firstChild","append","innerHTML","setType","qType","format","set","id","type","matchStart","matchLength","attrs","renderPokemonSortRow","renderMoveSortRow","pokemon","renderPokemonRow","move","renderMoveRow","item","BattleItems","renderItemRow","ability","BattleAbilities","renderAbilityRow","toUpperCase","substr","renderTypeRow","egName","egggroup","renderEggGroupRow","renderTierRow","tierTable","uber","ou","uu","ru","nu","pu","zu","nfe","lc","cap","caplc","capnfe","uubl","rubl","nubl","publ","category","renderCategoryRow","articleTitle","BattleArticleTitles","renderArticleRow","firstPokemonColumn","toID","numDisplay","num","forme","baseSpecies","BattleFormOrder","baseId","order","idx","indexOf","letter","String","fromCharCode","getPokemonIcon","tagStart","types","getTypeIcon","abilities","stats","baseStats","hp","atk","def","spa","spd","spe","bst","renderTaggedPokemonRowInner","tag","getItemIcon","shortDesc","desc","getCategoryIcon","pp","noPPBoosts","basePower","accuracy","renderMoveRowInner","renderTaggedMoveRow","article","isSearchType","tier","BattleSearch","$cd61f496984300fe$var$BattleSearchIndexOffset","$cd61f496984300fe$var$BattleSearchIndex","$cd61f496984300fe$var$hasAbility","key","$cd61f496984300fe$var$DexSearch","formatid","species","index","reverseSort","Object","keys","map","x","BattleTypeChart","Number","_a","_b","_c","_d","res","nonAlnum","j","test","getTypedSearch","speciesOrSet","$cd61f496984300fe$var$BattlePokemonSearch","$cd61f496984300fe$var$BattleItemSearch","$cd61f496984300fe$var$BattleMoveSearch","$cd61f496984300fe$var$BattleAbilitySearch","$cd61f496984300fe$var$BattleTypeSearch","$cd61f496984300fe$var$BattleCategorySearch","textSearch","getResults","filter","push","filterid","deleted","splice","pop","filterType","illegalReasons","searchTypeIndex","typeTable","qFilterType","slice","getClosest","passType","searchPasses","matchQuery","bufs","topbufIndex","count","nearMatch","instafilter","instafilterSort","illegal","searchPass","shift","typeIndex","startsWith","matchEnd","originalIndex","charCodeAt","typeName","curBufLength","topbuf","Array","apply","fType","fId","illegalBuf","charAt","type1","left","right","mid","$cd61f496984300fe$var$BattleTypedSearch","baseResults","baseIllegalResults","illegalResults","getDefaultResults","call","getBaseResults","legalityFilter","resultType","getTable","rowType","arguments","poke","every","t","canLearn","eggGroups","groups","p","base","forms","b","pa","pb","fa","toLowerCase","fb","ordered","values","g","fid","sortOrder","rowType1","id1","rowType2","id2","stat1","stat2","base1","base2","bst1","bst2","name1","Error","powerTable","return","frustration","spitup","trumpcard","naturalgift","grassknot","lowkick","gyroball","electroball","flail","reversal","present","wringout","crushgrip","heatcrash","heavyslam","fling","magnitude","beatup","punishment","psywave","nightshade","seismictoss","dragonrage","sonicboom","superfang","endeavor","sheercold","fissure","horndrill","guillotine","move1","move2","pow1","pow2","accuracy1","accuracy2","pp1","pp2","physical","special","status"],"version":3,"file":"search.34b036c7.js.map"}